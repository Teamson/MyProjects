!function(){"use strict";class e{constructor(){this.grade=1,this.coin=0,this.exitTime=0}}class t{static getPlayerData(){return localStorage.getItem("playerData")?null==this._playerData&&(this._playerData=JSON.parse(localStorage.getItem("playerData"))):(this._playerData=new e,localStorage.setItem("playerData",JSON.stringify(this._playerData))),this._playerData}static setPlayerData(){localStorage.setItem("playerData",JSON.stringify(this._playerData))}static changeCoin(e){this._playerData.coin+=e,this.setPlayerData()}static setExitTime(){this._playerData.exitTime=(new Date).getTime(),this.setPlayerData()}}t._playerData=null,t.powerMax=10,t.tempSkinId=-1,t.levelDataArr=[];class a{static LoginWx(e){if(!Laya.Browser.onWeiXin)return;let t=Laya.Browser.window.wx.getLaunchOptionsSync();Laya.Browser.window.wx.login({success(a){a.code&&(console.log("res.code:",a.code),e&&e(a.code,t.query))}})}static checkScope(e){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.getSetting({success:t=>{t.authSetting["scope.userInfo"]?console.log("已经授权"):(console.log("没有授权"),this.createScope(e))}})}static createScope(e){this.scopeBtn=Laya.Browser.window.wx.createUserInfoButton({type:"text",text:"",style:{left:e.x,top:e.y,width:e.width,height:e.height,lineHeight:40,backgroundColor:"#ffffff",color:"#ffffff",textAlign:"center",fontSize:16,borderRadius:0}}),this.scopeBtn.onTap(e=>{"getUserInfo:ok"==e.errMsg?(this.scopeBtn.destroy(),this.scopeBtn=null):"getUserInfo:fail auth deny"==e.errMsg&&(this.scopeBtn.destroy(),this.scopeBtn=null)})}static GetLaunchParam(e){Laya.Browser.onWeiXin&&(this.OnShowFun=e,e(this.GetLaunchPassVar()),Laya.Browser.window.wx.onShow(e=>{null!=this.OnShowFun&&this.OnShowFun(e),console.log("wx on show")}))}static GetLaunchPassVar(){return Laya.Browser.onWeiXin?Laya.Browser.window.wx.getLaunchOptionsSync():null}static WxOnHide(e){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.onHide(e)}static WxOffHide(e){e&&Laya.Browser.onWeiXin&&Laya.Browser.window.wx.offHide(e)}static WxOnShow(e){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.onShow(e)}static WxOffShow(e){e&&Laya.Browser.onWeiXin&&Laya.Browser.window.wx.offShow(e)}static httpRequest(e,t,a="get",i){var s=new Laya.HttpRequest;s.http.timeout=5e3,s.once(Laya.Event.COMPLETE,this,i),s.once(Laya.Event.ERROR,this,this.httpRequest,[e,t,a,i]),"get"==a?s.send(e+"?"+t,"",a,"text"):"post"==a&&s.send(e,JSON.stringify(t),a,"text")}static DoVibrate(e=!0){Laya.Browser.onWeiXin&&this.isVibrate&&(e?Laya.Browser.window.wx.vibrateShort():Laya.Browser.window.wx.vibrateLong())}static OpenAlert(e,t=2e3,a=!1){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.showToast({title:e,duration:t,mask:!1,icon:a?"success":"none"})}static NavigateApp(e,t,a,i,s){if(Laya.Browser.onWeiXin){Laya.Browser.window.wx.navigateToMiniProgram({appId:e,path:t,success(e){console.log("打开成功"),s()},fail(e){console.log("打开失败"),i()}})}}static preViewImage(e){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.previewImage({current:e,urls:[e]})}}a.UnityPath="LayaScene_SampleScene/Conventional/",a.openId="",a.version="1.0.0",a.isVibrate=!0,a.isMusic=!0,a.OnShowFun=null,a.scopeBtn=null,a.shareCallback=null,a.front_share_number=0,a.sceneId=0,a.gotOfflineBounes=!1,a.configData=null,a.shareTime=0,a.firstShare=!0,a.hadShowFriendUI=!1,a.launchGameUI=!1,a.firstStartGame=!1,a.isKillBossUI=!1,a.fromKillBossUI=!1,a.killbossCallback=null,a.gameNavCallback=null,a.gameNavOnHide=!1,a.isStartUI=!1,a.isAuditor=!1,a.shieldAppid=!1,a.tempGrade=1;class i{static calcDistance(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}static getWorldDis(e,t){let a=e.transform.position.clone(),i=t.transform.position.clone();return Laya.Vector3.distance(a,i)}static getDirectionAToB(e,t,a=!0){let i=e.transform.position.clone(),s=t.transform.position.clone(),n=new Laya.Vector3(0,0,0);return Laya.Vector3.subtract(s,i,n),a&&Laya.Vector3.normalize(n,n),n}static fixPosY(e,t=1334){return e*Laya.stage.displayHeight/t}static findNodeByName(e,t){let a=null,i=e=>{for(let s=0;s<e.numChildren;s++){if(e.getChildAt(s).name==t)return void(a=e.getChildAt(s));i(e.getChildAt(s))}};return i(e),a}static TmoveTo(e,t,a,i,s){if(!e.transform)return;let n=new Laya.Tween;var o=e.transform.position;n.to(e.transform.position,{x:a.x,y:a.y,z:a.z,update:new Laya.Handler(this,()=>{e.transform&&(e.transform.position=o)})},t,s,Laya.Handler.create(this,()=>{i&&i()}))}static TmoveToYZ(e,t,a,i,s){if(!e.transform)return;let n=new Laya.Tween;var o=e.transform.position;return n.to(e.transform.position,{y:a.y,z:a.z,update:new Laya.Handler(this,()=>{e.transform&&(e.transform.position=o)})},t,null,Laya.Handler.create(this,()=>{i&&i()})),n}static TmoveToX(e,t,a,i,s){if(!e.transform)return;let n=new Laya.Tween;var o=e.transform.localPosition;n.to(e.transform.localPosition,{x:a.x,update:new Laya.Handler(this,()=>{e.transform&&(e.transform.localPosition=o)})},t,null,Laya.Handler.create(this,()=>{i&&i()}))}static TmoveToY(e,t,a,i,s){if(!e.transform)return;let n=new Laya.Tween;var o=e.transform.localPosition;n.to(e.transform.localPosition,{y:a.y,update:new Laya.Handler(this,()=>{e.transform&&(e.transform.localPosition=o)})},t,s,Laya.Handler.create(this,()=>{i&&i()}))}static TmoveToWorld(e,t,a,i,s){if(!e.transform)return;let n=new Laya.Tween;var o=e.transform.position;n.to(e.transform.position,{y:a.y,update:new Laya.Handler(this,()=>{e.transform&&(e.transform.position=o)})},t,null,Laya.Handler.create(this,()=>{i&&i()}))}static RotateWithPoint(e,t,a){let i=new Laya.Vector3,s=e.transform.localPosition.clone();return a=a*Math.PI/180,i.x=s.x*Math.cos(a)+(t.y*s.z-t.z*s.y)*Math.sin(a)+t.x*(t.x*s.x+t.y*s.y+t.z*s.z)*(1-Math.cos(a)),i.y=s.y*Math.cos(a)+(t.x*s.z-t.z*s.x)*Math.sin(a)+t.y*(t.x*s.x+t.y*s.y+t.z*s.z)*(1-Math.cos(a)),i.z=s.z*Math.cos(a)+(t.x*s.y-t.y*s.x)*Math.sin(a)+t.z*(t.x*s.x+t.y*s.y+t.z*s.z)*(1-Math.cos(a)),i}static RotateTo(e,t,a,i){var s=e.transform.rotationEuler;Laya.Tween.to(e.transform.rotationEuler,{x:a.x,y:a.y,z:a.z,update:new Laya.Handler(this,function(){e&&(e.transform.rotationEuler=s)})},t,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){i&&i()}))}static tMove2D(e,t,a,i,s){Laya.Tween.to(e,{x:t,y:a},i,null,new Laya.Handler(this,()=>{s&&s()}))}static scaleTo2D(e,t,a,i){Laya.Tween.to(e,{scaleX:t,scaleY:t},a,null,new Laya.Handler(this,()=>{i&&i()}))}static alphaTo2D(e,t,a,i){Laya.Tween.to(e,{alpha:t},a,null,new Laya.Handler(this,()=>{i&&i()}))}static updateNumber(e,t,a,i=!0,s,n){let o=e*t,r=Math.floor((o-e)/60);r=r<=0?1:r;let l=()=>{s?((e+=r)>=o&&(e=o,n&&n(),Laya.timer.clear(this,l)),i?a.text=e.toString():a.value=e.toString()):((o-=r)<=e&&(o=e,n&&n(),Laya.timer.clear(this,l)),i?a.text=o.toString():a.value=o.toString())};Laya.timer.frameLoop(1,this,l)}static loadJson(e,t){Laya.loader.load(e,Laya.Handler.create(this,t),null,Laya.Loader.JSON)}static objectShake(e,t=1,a=.7){var i=t,s=1,n=e.transform.localPosition.clone();Laya.timer.frameLoop(1,this,function updateShake(){if(i>0){var t=new Laya.Vector3;Laya.Vector3.scale((o=Math.random()>.5?Math.random():-Math.random(),r=Math.random()>.5?Math.random():-Math.random(),new Laya.Vector3(o,r,0)),a,t),Laya.Vector3.add(n,t,t),e.transform.localPosition=t,i-=.02*s}else i=0,e.transform.localPosition=n,Laya.timer.clear(this,updateShake);var o,r})}static getRandomItemInArr(e){return e[Math.floor(Math.random()*e.length)]}static shuffleArr(e){let t=e.length;for(;t;){let a=Math.floor(Math.random()*t--);[e[a],e[t]]=[e[t],e[a]]}return e}static GetRandom(e,t,a=!0){let i=t-e,s=Math.random()*(i+1);return s+=e,a?Math.floor(s):s}static coinCollectAnim(e,t,a,i=10,s){let n=i;for(var o=0;o<i;o++){let i=Laya.Pool.getItemByClass("coin",Laya.Image);i.skin="startUI/zy_zs_1.png",i.x=e.x,i.y=e.y,a.addChild(i);let o=300+100*Math.random()-50;Laya.Tween.to(i,{x:i.x+250*Math.random()-125,y:i.y+250*Math.random()-125},o),Laya.timer.once(o+50,this,function(){Laya.Tween.to(i,{x:t.x,y:t.y},400,null,new Laya.Handler(this,function(){a.removeChild(i),Laya.Pool.recover("coin",i),0==--n&&s&&s()}))})}}static scaleLoop(e,t,a){Laya.Tween.to(e,{scaleX:t,scaleY:t},a,null,new Laya.Handler(this,()=>{Laya.Tween.to(e,{scaleX:1,scaleY:1},a,null,new Laya.Handler(this,()=>{this.scaleLoop(e,t,a)}))}))}static rotateLoop(e,t,a){Laya.Tween.to(e,{rotation:t},a,null,new Laya.Handler(this,()=>{Laya.Tween.to(e,{rotation:-t},2*a,null,new Laya.Handler(this,()=>{Laya.Tween.to(e,{rotation:0},a,null,new Laya.Handler(this,()=>{this.rotateLoop(e,t,a)}))}))}))}static visibleDelay(e,t){e.visible=!1,Laya.timer.once(t,this,()=>{e.visible=!0})}static pointInPolygon(e,t){for(var a=e.x,i=e.y,s=!1,n=0,o=t.length-1;n<t.length;o=n++){var r=t[n].x,l=t[n].y,h=t[o].x,d=t[o].y;l>i!=d>i&&a<(h-r)*(i-l)/(d-l)+r&&(s=!s)}return s}static getSprite3DResByUrl(e,t,i=!1){let s=Laya.loader.getRes(a.UnityPath+e);return Laya.Sprite3D.instantiate(s,t,i,new Laya.Vector3(0,0,0))}static getRandomItemInArrWithoutSelf(e,t,a=1){let i=[].concat(t);return i.splice(i.indexOf(e),1),(i=this.shuffleArr(i)).slice(0,a)}static getBoundBox(e,t=!1){let a=e.getComponent(Laya.PhysicsCollider).colliderShape,i=e.transform.position.clone();i.x+=a.localOffset.x,i.y+=a.localOffset.y,i.z+=a.localOffset.z;let s=e.parent,n=1;s&&s.transform&&t&&(n=s.transform.localScaleZ);let o=new Laya.Vector3(i.x-a.sizeX/2,i.y-a.sizeY/2,i.z-a.sizeZ/2),r=new Laya.Vector3(i.x+a.sizeX/2,i.y+a.sizeY/2,i.z+a.sizeZ*n/2/2);return new Laya.BoundBox(o,r)}static getBoundBoxWithMinMax(e,t){return new Laya.BoundBox(e,t)}static addClickEvent(e,t,a,i,s){if(e.offAllCaller(t),e instanceof Laya.Button&&!s){let s=e=>{a&&a.call(t,e)};e.on(Laya.Event.CLICK,t,s,[i])}else{let s=60,n=1,o=e.scaleX*n,r=e.scaleY*n,l=.9*n,h=!1,d=t=>{h=!0,Laya.Tween.to(e,{scaleX:l,scaleY:l},s)};e.on(Laya.Event.MOUSE_DOWN,t,d,[i]);let c=i=>{0!=h&&(h=!1,Laya.Tween.to(e,{scaleX:o,scaleY:r},s,null,new Laya.Handler(t,()=>{a&&a.call(t,i)})))};e.on(Laya.Event.MOUSE_UP,t,c,[i]);let u=t=>{Laya.Tween.to(e,{scaleX:o,scaleY:r},s)};e.on(Laya.Event.MOUSE_OUT,t,u,[i])}}static getVector3(e,t,a){return new Laya.Vector3(Number(e),Number(t),Number(a))}}class s extends Laya.Script{constructor(){super()}onAwake(){this.myOwner=this.owner}onDisable(){}onUpdate(){}}class n extends Laya.Script{constructor(){super(),this.myOwner=null,this.coll=null,this.hadColl=!1}onAwake(){this.myOwner=this.owner,this.coll=this.myOwner.getChildAt(0)}onDisable(){}checkColl(){if(this.hadColl)return;let e=this.coll.transform.position.clone(),t=f.Share._mosquitoNode.transform.position.clone();e.y=0,t.y=0,Laya.Vector3.distance(e,t)<2&&(this.hadColl=!0,a.DoVibrate(),f.Share.updateMosquitoNum(f.Share._mosquitoNode.numChildren-20))}onUpdate(){this.checkColl()}}class o extends Laya.Script{constructor(){super(),this.myOwner=null,this.hadColl=!1}onAwake(){this.myOwner=this.owner}onDisable(){}checkColl(){if(this.hadColl)return;let e=this.myOwner.transform.position.clone(),t=f.Share._mosquitoNode.transform.position.clone();e.y=0,t.y=0,Laya.Vector3.distance(e,t)<2&&(this.hadColl=!0,a.DoVibrate(),f.Share.updateMosquitoNum(f.Share._mosquitoNode.numChildren-20))}onUpdate(){this.checkColl()}}class r extends Laya.Script{constructor(){super(),this.myOwner=null,this.value="",this.type=1,this.plane=null,this.cxt=null,this.cav=null,this.calType=0,this.num=1,this.hadColl=!1,this.hadClear=!1,this.texture2d=null}onAwake(){this.myOwner=this.owner,this.plane=this.myOwner.getChildByName("Plane")}onDisable(){}init(e){if(this.type=e,"+"==this.value[0]){this.calType=0;let e=this.value.split("+");this.num=parseInt(e[1])}else if("-"==this.value[0]){this.calType=1;let e=this.value.split("-");this.num=parseInt(e[1])}else if("*"==this.value[0]){this.calType=2;let e=this.value.split("*");this.num=parseInt(e[1])}else if("/"==this.value[0]){this.calType=3;let e=this.value.split("/");this.num=parseInt(e[1])}if("*"==this.value[0]){let e=this.value.split("*");this.value="x"+e[1]}else if(-1!=this.value.search("/")){let e=this.value.split("/");this.value="÷"+e[1]}let t=this.plane.meshRenderer.material;this.cav=Laya.Browser.createElement("canvas"),this.cxt=this.cav.getContext("2d"),this.cav.width=256,this.cav.height=256,this.cxt.fillStyle="rgb(255,255,255)",this.cxt.font="bold 150px Arial",this.cxt.textAlign="center",this.cxt.textBaseline="center",this.cxt.fillText(this.value,130,180,200),this.cxt.strokeStyle="black",this.cxt.font="bold 150px Arial",this.cxt.strokeText(this.value,130,180,200),this.texture2d=new Laya.Texture2D(256,256),this.texture2d.loadImageSource(this.cav),t.albedoTexture=this.texture2d}checkColl(){if(this.hadColl||f.Share.isGameOver)return;let e=this.myOwner.transform.position.clone(),t=f.Share._mosquitoNode.transform.position.clone();if(Math.abs(e.z-t.z)<.1&&t.x>e.x-2&&t.x<e.x+2){a.DoVibrate(),this.hadColl=!0;let e=f.Share._mosquitoNode.numChildren;0==this.calType?e+=this.num:1==this.calType?e-=this.num:2==this.calType?e*=this.num:3==this.calType&&(e/=this.num),f.Share.updateMosquitoNum(Math.floor(e))}}onUpdate(){this.checkColl(),f.Share.isGameOver&&!this.hadClear&&(this.hadClear=!0,this.cxt.clearRect(0,0,256,256))}onDestroy(){this.texture2d.destroy()}}class l extends Laya.Script{constructor(){super(),this.myOwner=null,this.coll=null,this.hadColl=!1}onAwake(){this.myOwner=this.owner,this.coll=this.myOwner.getChildAt(0).getChildAt(0)}onDisable(){}checkColl(){if(this.hadColl)return;let e=this.coll.transform.position.clone(),t=f.Share._mosquitoNode.transform.position.clone();e.y=0,t.y=0,Laya.Vector3.distance(e,t)<2&&(this.hadColl=!0,a.DoVibrate(),f.Share.updateMosquitoNum(f.Share._mosquitoNode.numChildren-20))}onUpdate(){this.checkColl()}}var h,d,c;!function(e){e.ANI_IDLE="idle",e.ANI_RUN="run"}(h||(h={}));class u extends Laya.Script{constructor(){super(),this.myOwner=null,this._ani=null,this.currentAniName=""}onAwake(){this.myOwner=this.owner,this._ani=this.owner.getComponent(Laya.Animator),this.playAnimation(h.ANI_RUN)}onDisable(){}getCurAniName(){return this._ani.getControllerLayer().getCurrentPlayState().animatorState.name}playAnimation(e,t=1,a=.2){this.currentAniName=e,this._ani.speed=t,this._ani.crossFade(e,a)}onUpdate(){}}class y extends Laya.Script{constructor(){super(),this.myOwner=null,this.isDied=!1,this.roadEdge=3,this.speed=.2}onAwake(){this.myOwner||(this.myOwner=this.owner)}onDisable(){}moveX(e){if(f.Share.isGameOver)return;if(this.myOwner.transform.position.x+e>this.roadEdge)return void(this.myOwner.transform.position=new Laya.Vector3(this.roadEdge,this.myOwner.transform.position.clone().y,this.myOwner.transform.position.clone().z));if(this.myOwner.transform.position.x+e<-this.roadEdge)return void(this.myOwner.transform.position=new Laya.Vector3(-this.roadEdge,this.myOwner.transform.position.clone().y,this.myOwner.transform.position.clone().z));let t=new Laya.Vector3(e,0,0);this.myOwner.transform.translate(t,!1)}onUpdate(){if(f.Share.isGameOver)for(let e=0;e<this.myOwner.numChildren;e++){this.myOwner.getChildAt(e).active=!0}else for(let e=0;e<this.myOwner.numChildren;e++){this.myOwner.getChildAt(e).active=e<50}!f.Share.isGameOver&&f.Share.isStartGame&&(this.myOwner.transform.translate(new Laya.Vector3(0,0,this.speed),!1),f.Share._camera.transform.translate(new Laya.Vector3(0,0,this.speed),!1),this.myOwner.transform.position.z>=f.Share._floorFinish.transform.position.z&&f.Share.finishCB(!0))}}!function(e){e.ANI_IDLE="idle",e.ANI_SLAP="SLAP",e.ANI_dry="dry"}(d||(d={}));class w extends Laya.Script{constructor(){super(),this.myOwner=null,this.mosquitoNode=null,this._ani=null,this.currentAniName=""}onAwake(){this.myOwner=this.owner,this._ani=this.owner.getComponent(Laya.Animator),this.mosquitoNode=i.findNodeByName(this.myOwner,"mosquitoNode"),this.playAnimation(d.ANI_IDLE)}onDisable(){}getCurAniName(){return this._ani.getControllerLayer().getCurrentPlayState().animatorState.name}playAnimation(e,t=1,a=.2){this.currentAniName=e,this._ani.speed=t,this._ani.crossFade(e,a)}onUpdate(){}}class m{constructor(){this.effectArr=[]}static get instance(){return this._instance||(this._instance=new m),this._instance}initLoading(e){var t=[{url:"res/Sounds/bgm.mp3",type:Laya.Loader.SOUND},{url:"res/Sounds/correct.mp3",type:Laya.Loader.SOUND},{url:"res/Sounds/hit.mp3",type:Laya.Loader.SOUND},{url:"res/Sounds/hurt.mp3",type:Laya.Loader.SOUND},{url:"res/Sounds/wrong.mp3",type:Laya.Loader.SOUND}];Laya.loader.load(t,Laya.Handler.create(this,e)),Laya.SoundManager.setMusicVolume(1),Laya.SoundManager.setSoundVolume(1)}playMusic(e,t=0,a){Laya.SoundManager.playMusic("res/Sounds/"+e,t,new Laya.Handler(this,a))}stopMusic(){Laya.SoundManager.stopMusic()}playSoundEffect(e,t=1,a,i,s){return Laya.SoundManager.playSound("res/Sounds/"+e,t,new Laya.Handler(this,a),i,s)}stopSound(e){Laya.SoundManager.stopSound("res/Sounds/"+e)}}class g{static inidAd(){Laya.Browser.onWeiXin&&(this.initBanner(),this.createVideoAd(),this.initGridAD())}static getSystemInfoSync(){if(Laya.Browser.onWeiXin)return this.sysInfo||(this.sysInfo=window.wx.getSystemInfoSync()),this.sysInfo}static initBanner(){if(Laya.Browser.onWeiXin){this.bannerIdArr=i.shuffleArr(this.bannerIdArr),console.log("bannerId 数组排列：",this.bannerIdArr),!L.canTrapAll&&this.bannerAds.length>1&&this.bannerAds.splice(0,this.bannerAds.length-1);for(let e=0;e<this.bannerIdArr.length;e++)this.bannerTimesArr.push(0),this.bannerShowCount.push(0),this.bannerErrorArr.push(!1);for(let e=0;e<this.bannerIdArr.length;e++){let t=this.createBannerAd(e);this.bannerAds.push(t)}}}static get isAllBannerError(){let e=!0;for(let t=0;t<this.bannerErrorArr.length;t++)if(!this.bannerErrorArr[t]){e=!1;break}return e}static showBannerAd(){Laya.Browser.onWeiXin&&(this.isAllBannerError?this.stopCountBannerTime():(this.bannerAds[this.bannerIndex]&&this.bannerAds[this.bannerIndex].show(),this.stopCountBannerTime(),L.canTrapAll&&Laya.timer.loop(100,this,this.countBannerTime)))}static hideBannerAd(){Laya.Browser.onWeiXin&&!this.isAllBannerError?(this.bannerAds[this.bannerIndex]&&this.bannerAds[this.bannerIndex].hide(),this.stopCountBannerTime()):this.stopCountBannerTime()}static countBannerTime(){this.bannerTimesArr[this.bannerIndex]+=.1,this.bannerTimesArr[this.bannerIndex]>=L.jsonConfig.refresh_banner_time&&(this.bannerAds[this.bannerIndex]&&this.bannerAds[this.bannerIndex].hide(),this.bannerTimesArr[this.bannerIndex]=0,this.bannerShowCount[this.bannerIndex]++,this.bannerShowCount[this.bannerIndex]>=3&&(this.bannerAds[this.bannerIndex]&&this.bannerAds[this.bannerIndex].destroy(),this.bannerAds[this.bannerIndex]=null,this.bannerAds[this.bannerIndex]=this.createBannerAd(this.bannerIndex)),this.bannerIndex++,this.bannerIndex>=this.bannerIdArr.length&&(this.bannerIndex=0),this.showBannerAd())}static stopCountBannerTime(){Laya.timer.clear(this,this.countBannerTime)}static createBannerAd(e,t=!1){if(!Laya.Browser.onWeiXin)return;let a=this.getSystemInfoSync(),i=Laya.Browser.window.wx.createBannerAd({adUnitId:this.bannerIdArr[e],style:{top:.8*a.screenHeight,width:300,left:a.screenWidth/2-150},adIntervals:30});return i.onLoad(()=>{t&&i.show(),this.bannerErrorArr[e]=!1,console.log("Banner广告加载成功")}),i.onError(t=>{this.bannerErrorArr[e]=!0,console.error("Banner广告加载失败",JSON.stringify(t))}),i.onResize(e=>{let t=i.style.realHeight+.1;i.style.top=a.screenHeight-t}),i}static createVideoAd(){if(Laya.Browser.onWeiXin){var e,t=this;null!=(e=this.videoAd)&&(e.offLoad(onLoadVideo),e.offError(onErrorVideo),e.offClose(onCloseVideo)),(e=Laya.Browser.window.wx.createRewardedVideoAd({adUnitId:t.videoId})).onLoad(onLoadVideo),e.onError(onErrorVideo),e.onClose(onCloseVideo),this.videoAd=e}function onLoadVideo(){console.log("video 加载成功"),t.isExistVideoAd=!0}function onErrorVideo(e){console.error("video 加载错误",e),t.isExistVideoAd=!1}function onCloseVideo(e){!!(e&&e.isEnded||void 0===e)&&(t.videoFinishCallback&&t.videoFinishCallback(),t.videoFinishCallback=null),t.videoCancelCallback&&t.videoCancelCallback(),t.videoCancelCallback=null}}static showVideoAd(e,t){if(!Laya.Browser.onWeiXin)return e&&e(),void(t&&t());if(!Laya.Browser.onWeiXin)return;let a=this;if(this.videoFinishCallback=e,this.videoCancelCallback=t,this.isExistVideoAd||this.createVideoAd(),Laya.Browser.onWeiXin){var i=this.videoAd;i.show().then(()=>{}).catch(e=>{i.load().then(()=>i.show()).catch(e=>{a.videoCancelCallback&&a.videoCancelCallback(),a.videoCancelCallback=null})})}}static destroyVideoAd(){this.videoAd&&(this.videoAd.destroy(),this.videoAd=null)}static initGridAD(){Laya.Browser.onWeiXin&&(this.createFullGrid(),this.createBottomGrid(),this.createSideGrid(),this.createSingleGrid())}static createFullGrid(){this.fullGridAd=Laya.Browser.window.wx.createCustomAd({adUnitId:this.fullGridId,adIntervals:30,style:{left:0,top:this.getSystemInfoSync().screenHeight/2-this.getSystemInfoSync().screenWidth/2-50,width:this.getSystemInfoSync().screenWidth}}),this.fullGridAd.onError(()=>{this.fullGridError=!0,console.log("全屏格子加载失败")})}static visibleFullGridAd(e=!0){Laya.Browser.onWeiXin&&this.fullGridAd&&!this.fullGridError&&(e?this.fullGridAd.show():this.fullGridAd.hide())}static createBottomGrid(){this.bottomGridAd=Laya.Browser.window.wx.createCustomAd({adUnitId:this.bottomGridId,adIntervals:30,style:{left:47,top:this.getSystemInfoSync().screenHeight-110,width:this.getSystemInfoSync().screenWidth}}),this.bottomGridAd.onError(()=>{this.bottomGridError=!0,console.log("底部格子加载失败")})}static visibleBottomGridAd(e=!0){Laya.Browser.onWeiXin&&this.bottomGridAd&&!this.bottomGridError&&(e?this.bottomGridAd.show():this.bottomGridAd.hide())}static createSideGrid(){for(let e=0;e<2;e++){let t=Laya.Browser.window.wx.createCustomAd({adUnitId:this.sideGridId,adIntervals:30,style:{left:0==e?0:this.getSystemInfoSync().screenWidth-65,top:200}});t.onError(()=>{console.log("屏幕侧格子加载失败")}),t.onLoad(()=>{this.sideGridAd.push(t)})}}static visibleSideGridAd(e=!0){if(Laya.Browser.onWeiXin&&this.sideGridAd.length>0)for(let t=0;t<this.sideGridAd.length;t++)e?this.sideGridAd[t].show():this.sideGridAd[t].hide()}static createSingleGrid(){for(let e=0;e<2;e++){let t=Laya.Browser.window.wx.createCustomAd({adUnitId:this.singleGridId,adIntervals:30,style:{left:0==e?0:this.getSystemInfoSync().screenWidth-65,top:120}});t.onError(()=>{console.log("屏幕单格子加载失败")}),t.onLoad(()=>{this.singleGridAd.push(t)})}}static visibleSingleGridAd(e=!0){if(Laya.Browser.onWeiXin&&this.singleGridAd.length>0)for(let t=0;t<this.singleGridAd.length;t++)e?this.singleGridAd[t].show():this.singleGridAd[t].hide()}}g.bannerIdArr=["adunit-4eba1812be0f6595","adunit-c2ed9c59deb47d8d"],g.videoId="adunit-ea8888e505097bac",g.fullGridId="adunit-2d19b46342f901de",g.bottomGridId="adunit-7f85b8d639948694",g.sideGridId="adunit-b2ef25cb1e9ffd34",g.singleGridId="adunit-f476308364af2086",g.bannerAds=[],g.bannerIndex=0,g.bannerTimesArr=[],g.bannerShowCount=[],g.bannerErrorArr=[],g.isExistVideoAd=!1,g.fullGridAd=null,g.fullGridError=!1,g.bottomGridAd=null,g.bottomGridError=!1,g.sideGridAd=[],g.singleGridAd=[];class L{static randTouchProgress(){this.wuchuProgressValue<.19?this.wuchuProgressValue=this.getRangeNumer(.08,.3):this.wuchuProgressValue=this.getRangeNumer(this.wuchuProgressValue-.19+.08,this.wuchuProgressValue-.19+.3)}static getRangeNumer(e,t){return Math.random()*(t-e)+e}static bannerShowHide(){g.hideBannerAd(),Laya.timer.once(1e3,this,()=>{g.showBannerAd(),Laya.timer.once(800,this,()=>{this.bannerShowHide()})})}static init(e){this.randTouchProgress(),Laya.Browser.onWeiXin?this.getConfig(e):e&&e()}static loadGame(e){var t=()=>{console.log("关闭首次进入视频"),this.showReMen(()=>{this.gridBoxVideo&&g.showVideoAd(),this.showBox2(e)})};this.loadingVideo?g.showVideoAd(null,t):t()}static showReMen(e){this.showRemen?Laya.Scene.open(c.Remen,!1,{ccb:()=>{e&&e()}}):e&&e()}static showStartReMen(e){this.startRemen?Laya.Scene.open(c.Remen,!1,{ccb:()=>{e&&e()}}):e&&e()}static showBox1(e){this.bannerBox?Laya.Scene.open(c.Box1,!1,{closeCB:e},Laya.Handler.create(this,e=>{Laya.stage.addChild(e),e.size(Laya.stage.width,Laya.stage.height)})):e&&e()}static showBox2(e){this.gridBox?Laya.Scene.open(c.Box2,!1,{closeCB:e},Laya.Handler.create(this,e=>{Laya.stage.addChild(e),e.size(Laya.stage.width,Laya.stage.height)})):e&&e()}static showVirtualWxpage(e){this.showVitualWx&&Laya.Browser.onWeiXin?Laya.Browser.window.wx.showModal({title:"提示",content:"未观看完广告无法获取奖励，是否继续？",success:t=>{this.showVirtualCount<this.jsonConfig.vitualWx_count?(this.showVirtualCount++,g.showVideoAd(null,()=>{this.showVirtualWxpage(e)})):(this.showVirtualCount=0,this.showBox1(e))}}):this.showBox1(e)}static inHomePage(e){g.visibleSideGridAd(),this.banner_gezi_switch?g.showBannerAd():g.visibleBottomGridAd(),this.homepageVideo?g.showVideoAd(null,e):e&&e()}static startGame(e){g.hideBannerAd(),g.visibleSideGridAd(!1),g.visibleBottomGridAd(!1),this.startVideo?g.showVideoAd(null,()=>{this.showVirtualWxpage(()=>{this.showStartReMen(e)})}):this.showVirtualWxpage(()=>{this.showStartReMen(e)})}static inGame(){g.showBannerAd(),g.visibleSingleGridAd()}static showGameOver(){g.hideBannerAd(),g.visibleSingleGridAd(!1)}static inFinish(e){g.visibleSideGridAd(),g.hideBannerAd(),this.endBanner?(this.bannerShowHide(),e&&(e.bottom=20)):(e&&(e.bottom=300),this.banner_gezi_switch?g.showBannerAd():g.visibleBottomGridAd())}static closeFinish(e){Laya.timer.clearAll(this),g.hideBannerAd(),g.visibleBottomGridAd(!1),g.visibleSideGridAd(!1),this.gameCount++,this.loadGame(()=>{e&&e()})}static get allowScene(){if(Laya.Browser.onWeiXin){let e=Laya.Browser.window.wx.getLaunchOptionsSync().scene.toString();return-1!=this.jsonConfig.sceneList.split(",").indexOf(e)}return!0}static getConfig(e){var t=Laya.Browser.window.wx.getLaunchOptionsSync();console.log("当前场景：",t.scene),console.log("wxsdk初始化"),window.wxsdk.init({version:"1.0.0",appid:"265",secret:"2kym58euq3a3xmnh2675vd40abc7i46g",share:{title:"你能过得了这一关吗？",image:"https://game-oss.smallshark.cn/game/20211119/1216327431258.jpg?imageslim"}}),window.wxsdk.onInit(()=>{console.log("wxsdk初始化成功:",window.wxsdk.user);let t=new p;t.allowMistouch=window.wxsdk.conf.allowMistouch,t.bannerBox=window.wxsdk.conf.bannerBox,t.gridBox=window.wxsdk.conf.gridBox,t.startVideo=window.wxsdk.conf.startVideo,t.homepageVideo=window.wxsdk.conf.homepageVideo,t.gridBoxVideo=window.wxsdk.conf.gridBoxVideo,t.showRemen=window.wxsdk.conf.showRemen,t.sceneList=window.wxsdk.conf.sceneList,t.version=window.wxsdk.conf.version,t.showVitualWx=window.wxsdk.conf.showVitualWx,t.refresh_banner_time=window.wxsdk.conf.refresh_banner_time,t.channel_ditch=window.wxsdk.conf.channel_ditch,t.updateBanner=window.wxsdk.conf.updateBanner,t.loadingVideo=window.wxsdk.conf.loadingVideo,t.remenBanner=window.wxsdk.conf.remenBanner,t.delay_play_count=window.wxsdk.conf.delay_play_count,t.delay_play_countBanner=window.wxsdk.conf.delay_play_countBanner,t.delay_play_countVideo=window.wxsdk.conf.delay_play_countVideo,t.banner_gezi_switch=window.wxsdk.conf.banner_gezi_switch,t.loadingGezi=window.wxsdk.conf.loadingGezi,t.vitualWx_count=window.wxsdk.conf.vitualWx_count,t.endBanner=window.wxsdk.conf.endBanner,t.bannerBox_count=window.wxsdk.conf.bannerBox_count,t.remenBanner_count=window.wxsdk.conf.remenBanner_count,t.startRemen=window.wxsdk.conf.startRemen,this.jsonConfig=t,console.log("config:",this.jsonConfig),this.jsonConfig.channel_ditch&&!window.wxsdk.user.channel&&(this.jsonConfig.allowMistouch=!1,console.log("config1:",this.jsonConfig)),g.inidAd(),e&&e()}),window.wxsdk.login()}static get isVersionValid(){return!!Laya.Browser.onWeiXin&&this.version.split(".")[2]<=this.jsonConfig.version.split(".")[2]}static get canTrapAll(){return!!Laya.Browser.onWeiXin&&(this.allowScene&&this.jsonConfig.allowMistouch&&this.version.split(".")[2]<=this.jsonConfig.version.split(".")[2])}static get bannerBox(){return!!Laya.Browser.onWeiXin&&(this.canTrapAll&&this.jsonConfig.bannerBox&&this.gameCount>=this.jsonConfig.delay_play_count)}static get gridBox(){return!!Laya.Browser.onWeiXin&&(this.canTrapAll&&this.jsonConfig.gridBox&&this.gameCount>=this.jsonConfig.delay_play_count)}static get startVideo(){return!!Laya.Browser.onWeiXin&&(this.canTrapAll&&this.jsonConfig.startVideo&&this.gameCount>=this.jsonConfig.delay_play_countVideo)}static get homepageVideo(){return!!Laya.Browser.onWeiXin&&(this.canTrapAll&&this.jsonConfig.homepageVideo&&this.gameCount>=this.jsonConfig.delay_play_count)}static get gridBoxVideo(){return!!Laya.Browser.onWeiXin&&(this.canTrapAll&&this.jsonConfig.gridBoxVideo&&this.gameCount>=this.jsonConfig.delay_play_count)}static get showRemen(){return!!Laya.Browser.onWeiXin&&this.jsonConfig.showRemen}static get showVitualWx(){return!!Laya.Browser.onWeiXin&&(this.canTrapAll&&this.jsonConfig.showVitualWx&&this.gameCount>=this.jsonConfig.delay_play_countVideo)}static get loadingVideo(){return!!Laya.Browser.onWeiXin&&(this.canTrapAll&&this.jsonConfig.loadingVideo)}static get remenBanner(){return!!Laya.Browser.onWeiXin&&(this.canTrapAll&&this.jsonConfig.remenBanner&&this.gameCount>=this.jsonConfig.delay_play_countBanner)}static get banner_gezi_switch(){return!Laya.Browser.onWeiXin||this.jsonConfig.banner_gezi_switch}static get loadingGezi(){return!!Laya.Browser.onWeiXin&&(this.canTrapAll&&this.jsonConfig.loadingGezi)}static get endBanner(){return!!Laya.Browser.onWeiXin&&(this.canTrapAll&&this.jsonConfig.endBanner&&this.gameCount>=this.jsonConfig.delay_play_countBanner)}static get startRemen(){return!!Laya.Browser.onWeiXin&&(this.canTrapAll&&this.jsonConfig.startRemen&&this.gameCount>=this.jsonConfig.delay_play_countBanner)}}L.version="1.0.8",L.wuchuProgressValue=0,L.wuchuProgressStepAdd=.1,L.wuchuProgressFrameSub=.0032,L.gameCount=1,L.showVirtualCount=0;class p{}!function(e){e.Remen="FDScene/Remen.scene",e.VitrualWx="FDScene/VitrualWx.scene",e.Box1="FDScene/Box1.scene",e.Box2="FDScene/Box2.scene"}(c||(c={}));class f{constructor(){this.camStartPos=new Laya.Vector3(0,0,0),this.camStartRotation=null,this._cameraCrl=null,this.lightStartAngle=new Laya.Vector3,this._levelNode=null,this._player=null,this._playerCrl=null,this.startCamField=80,this._floorFinish=null,this._Bench=null,this._woman=null,this._womanCrl=null,this._mosquitoNode=null,this.isStartGame=!1,this.isGameOver=!1,this.isWin=!1,this.isPause=!1,this.isFinish=!1,Laya.Browser.onWeiXin||localStorage.clear(),f.Share=this,t.getPlayerData(),Laya.Browser.onWeiXin&&(Laya.Browser.window.wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),Laya.Browser.window.wx.onShareAppMessage(()=>({title:"蚊子快冲",imageUrl:""}))),Laya.Scene.open("MyScenes/LoadingUI.scene")}initScene(){Laya.Scene3D.load(a.UnityPath+"SampleScene.ls",Laya.Handler.create(this,this.onLoadScene))}onLoadScene(e){Laya.Scene.open("MyScenes/StartUI.scene"),this._scene=Laya.stage.addChild(e),Laya.stage.setChildIndex(this._scene,0),this._camera=this._scene.getChildByName("Main Camera"),this._light=this._scene.getChildByName("Directional Light"),this._light.shadowMode=Laya.ShadowMode.SoftLow,this._light.shadowDistance=15,this._light.shadowResolution=512,this._light.shadowCascadesMode=Laya.ShadowCascadesMode.NoCascades,this.lightStartAngle=this._light.transform.rotationEuler.clone(),this.camStartPos=this._camera.transform.position.clone(),this.camStartRotation=this._camera.transform.rotation.clone(),this._camera.fieldOfView=this.startCamField,this._cameraCrl=this._camera.addComponent(s),this._levelNode=new Laya.Sprite3D,this._scene.addChild(this._levelNode),this._Bench=this._scene.getChildByName("Scene_1").getChildByName("Bench"),this._woman=this._Bench.getChildAt(0),this._womanCrl=this._woman.addComponent(w),this._mosquitoNode=this._levelNode.addChild(new Laya.Sprite3D),this._playerCrl=this._mosquitoNode.addComponent(y),this.createLevel(),this.createMosquito()}gameStart(){Laya.Scene.open("MyScenes/GameUI.scene")}startToWalk(){}createLevel(){let e=t.getPlayerData().grade;e=(e-1)%5;let a=t.levelDataArr[e];for(let e=0;e<a.length;e++){let t=a[e];this.createProp(t)}}createMosquito(){let e=this._mosquitoNode.numChildren,t=Laya.loader.getRes(a.UnityPath+"mosquito_1.lh");t.active=!1;let i=Laya.Sprite3D.instantiate(t,this._mosquitoNode,!1,new Laya.Vector3(0,0,0));i.addComponent(u),i.transform.localPosition=new Laya.Vector3(0==e?0:2.6*Math.random()-1.3,0==e?2.5:2*Math.random()-1+2.5,-e/5)}createProp(e){let t=e.name,a=new Laya.Vector3(Number(e.position.x),Number(e.position.y),Number(e.position.z)),s=new Laya.Vector3(Number(e.rotation.x),Number(e.rotation.y),Number(e.rotation.z)),h=new Laya.Vector3(Number(e.scale.x),Number(e.scale.y),Number(e.scale.z)),d=e.value.v,c=null;if(-1!=t.search("Floor_1"))c=i.getSprite3DResByUrl("Floor_1.lh",this._levelNode);else if(-1!=t.search("Floor_Finsh")){c=i.getSprite3DResByUrl("Floor_Finsh.lh",this._levelNode),this._floorFinish=c;let e=this._Bench.transform.position.clone(),t=this._floorFinish.parent.getChildAt(this._floorFinish.parent.numChildren-2).transform.position.clone();e.z=t.z+80,this._Bench.transform.position=e}else if(-1!=t.search("Runer_1"))(c=i.getSprite3DResByUrl("Runer_1.lh",this._levelNode)).addComponent(o);else if(-1!=t.search("Hammer_1"))(c=i.getSprite3DResByUrl("Hammer_1.lh",this._levelNode)).addComponent(n);else if(-1!=t.search("Slice_1")){let e=(c=i.getSprite3DResByUrl("Slice_1.lh",this._levelNode)).addComponent(r);e.value=d,e.init(1)}else if(-1!=t.search("Slice_2")){let e=(c=i.getSprite3DResByUrl("Slice_2.lh",this._levelNode)).addComponent(r);e.value=d,e.init(2)}else-1!=t.search("Time_1")&&(c=i.getSprite3DResByUrl("Time_1.lh",this._levelNode)).addComponent(l);c.transform.position=a,c.transform.rotationEuler=s,c.transform.setWorldLossyScale(h)}updateMosquitoNum(e){if(e<=0)return this.createFX(this._mosquitoNode.transform.position.clone()),this._mosquitoNode.destroyChildren(),void this.finishCB(!1);let t=this._mosquitoNode.numChildren,a=Math.abs(e-t);if(e>t){m.instance.playSoundEffect("correct.mp3");for(let e=0;e<a;e++)this.createMosquito()}else if(e<t){m.instance.playSoundEffect("wrong.mp3");for(let e=a-1;e>=0;e--)this._mosquitoNode.getChildAt(this._mosquitoNode.numChildren-1).destroy();this.createFX(this._mosquitoNode.transform.position.clone())}}finishCB(e){if(L.showGameOver(),this.isGameOver=!0,this.isWin=e,this.isStartGame=!1,e||a.DoVibrate(!1),e){for(let e=0;e<this._mosquitoNode.numChildren;e++){let t=this._mosquitoNode.getChildAt(e),a=t.transform.position.clone();a.x=6*Math.random()-3,a.z=this._floorFinish.transform.position.z+2,i.TmoveTo(t,1e3,a,null)}let e=this._camera.transform.position.clone();e.y=3,e.z+=2,i.TmoveTo(this._camera,1e3,e,()=>{Laya.timer.once(1e3,this,()=>{this.dryWoman()})});let t=this._camera.transform.rotationEuler.clone();t.x=0,i.RotateTo(this._camera,1e3,t,null)}else Laya.timer.once(2e3,this,()=>{Laya.Scene.open("MyScenes/FinishUI.scene")})}dryWoman(){let e=this._mosquitoNode.numChildren;for(let e=this._mosquitoNode.numChildren-1;e>=0;e--){let t=this._mosquitoNode.getChildAt(e),a=this._womanCrl.mosquitoNode,s=a.transform.localPosition.clone();s.x=2.3*Math.random()-1.15,s.y-=e/15,s.z=-1.8;let n=a.transform.position.clone();Laya.Vector3.add(n,s,s),i.TmoveTo(t,500,s,()=>{t.transform.localRotationEuler=new Laya.Vector3(-90,0,0);let e=t.transform.position.clone(),i=t.transform.rotationEuler.clone(),s=a.addChild(t);s.transform.setWorldLossyScale(new Laya.Vector3(1,1,1)),s.transform.position=e,s.transform.rotationEuler=i})}Laya.timer.once(1e3,this,()=>{let t=this._camera.transform.position.clone();t.x=20,t.y=30,i.TmoveTo(this._camera,500,t,()=>{Laya.timer.once(1e3,this,()=>{e>=20?(this._womanCrl.playAnimation(d.ANI_dry,.5),Laya.timer.once(300,this,()=>{m.instance.playSoundEffect("hurt.mp3")})):(this._womanCrl.playAnimation(d.ANI_SLAP),Laya.timer.once(1e3,this,()=>{m.instance.playSoundEffect("hit.mp3"),this.createFX(this._womanCrl.mosquitoNode.transform.position.clone(),!1),this._womanCrl.mosquitoNode.destroyChildren()})),Laya.timer.once(2e3,this,()=>{Laya.Scene.open("MyScenes/FinishUI.scene")})})});let a=this._camera.transform.rotationEuler.clone();a.x-=30,a.y-=20,i.RotateTo(this._camera,500,a,null)})}createFX(e,t=!0){t&&(e.z+=2);let a=i.getSprite3DResByUrl("mosquitoFX.lh",this._levelNode);a.transform.position=e,Laya.timer.once(500,this,()=>{a.destroy()})}restartGame(){this.isStartGame=!1,this.isGameOver=!1,this.isWin=!1,this.isPause=!1,this._camera.fieldOfView=this.startCamField,this.isFinish=!1,this._camera.transform.position=this.camStartPos,this._camera.transform.rotation=this.camStartRotation,this._light.transform.localRotationEuler=this.lightStartAngle,Laya.Browser.createElement("canvas").getContext("2d").clearRect(0,0,256,256),this._levelNode.destroyChildren(),this._mosquitoNode=this._levelNode.addChild(new Laya.Sprite3D),this._playerCrl=this._mosquitoNode.addComponent(y),this._womanCrl.mosquitoNode.destroyChildren(),this._womanCrl.playAnimation(d.ANI_IDLE),this.createLevel(),this.createMosquito()}}class S extends Laya.Scene{constructor(){super(...arguments),this.progressValue=0,this.wuchuCount=1,this.hadShowBanner=!1,this.onShowCB=null}onAwake(){this.size(Laya.stage.width,Laya.stage.height)}onOpened(e){this.wuchuCount=L.jsonConfig.bannerBox_count,e&&e.closeCB&&(this.closeCB=e.closeCB),g.hideBannerAd(),this.btnPress.on(Laya.Event.CLICK,this,this.onPress),Laya.timer.frameLoop(1,this,this.reFreshUI),this.onShowCB=(()=>{this.close()}),Laya.Browser.onWeiXin&&Laya.Browser.window.wx.onShow(this.onShowCB)}onClosed(){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.offShow(this.onShowCB),g.hideBannerAd(),Laya.timer.clearAll(this),this.closeCB&&this.closeCB()}onPress(){this.progressValue+=L.wuchuProgressStepAdd,Laya.Tween.to(this.btnPress,{scaleX:1.2,scaleY:1.2},100,null,Laya.Handler.create(this,()=>{Laya.Tween.to(this.btnPress,{scaleX:1,scaleY:1},100,null)})),this.progressValue>=L.wuchuProgressValue&&(g.showBannerAd(),this.hadShowBanner=!0,L.randTouchProgress(),Laya.timer.once(2e3,this,()=>{this.wuchuCount--,this.wuchuCount>0?(g.hideBannerAd(),this.hadShowBanner=!1):this.close()})),Laya.Tween.to(this.imgSushi,{rotation:30},100,null,Laya.Handler.create(this,()=>{Laya.Tween.to(this.imgSushi,{rotation:0},100)})),this.pressBar.value=this.progressValue}reFreshUI(){this.progressValue>L.wuchuProgressFrameSub&&(this.progressValue-=L.wuchuProgressFrameSub),this.pressBar.value=this.progressValue,this.light.rotation+=1}}class B extends Laya.Scene{constructor(){super(...arguments),this.progressValue=0,this.wuchuCount=1}onAwake(){this.size(Laya.stage.width,Laya.stage.height)}onOpened(e){e&&e.count&&(this.wuchuCount=e.count),e&&e.closeCB&&(this.closeCB=e.closeCB),g.visibleFullGridAd(!1),this.btnPress.on(Laya.Event.CLICK,this,this.onPress),Laya.timer.frameLoop(1,this,this.reFreshUI),this.tweenScale(),g.showBannerAd()}onClosed(){g.hideBannerAd(),g.visibleFullGridAd(!1),Laya.timer.clearAll(this),Laya.Tween.clearAll(this.imgEffect),this.closeCB&&this.closeCB()}onPress(){this.progressValue+=L.wuchuProgressStepAdd,Laya.Tween.to(this.imgGift,{scaleX:1.2,scaleY:1.2},100,null,Laya.Handler.create(this,()=>{Laya.Tween.to(this.imgGift,{scaleX:1,scaleY:1},100,null)})),this.progressValue>=L.wuchuProgressValue&&(g.visibleFullGridAd(),L.randTouchProgress(),Laya.timer.once(2e3,this,()=>{this.wuchuCount--,this.wuchuCount>0?g.visibleFullGridAd(!1):this.close()}))}reFreshUI(){this.progressValue>L.wuchuProgressFrameSub&&(this.progressValue-=L.wuchuProgressFrameSub),this.light.rotation+=1}tweenScale(){var e=200;Laya.Tween.to(this.imgEffect,{scaleX:1.2,scaleY:1.2,alpha:.8},e),Laya.timer.once(e,this,()=>{Laya.Tween.to(this.imgEffect,{scaleX:1,scaleY:1,alpha:1},e),Laya.timer.once(e,this,this.tweenScale)})}}class C extends Laya.Scene{constructor(){super(),this.ccb=null,this.onShowCB=null,this.clickCount=0}onAwake(){this.size(Laya.stage.displayWidth,Laya.stage.displayHeight)}onOpened(e){e&&e.ccb&&(this.ccb=e.ccb),this.btnContinue.on(Laya.Event.CLICK,this,this.btnContinueCB),g.visibleFullGridAd(),L.remenBanner&&this.bannerShowHide(),g.bannerIndex=0,this.onShowCB=(()=>{this.close()}),Laya.Browser.onWeiXin&&Laya.Browser.window.wx.onShow(this.onShowCB)}onClosed(){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.offShow(this.onShowCB),Laya.timer.clearAll(this),g.hideBannerAd(),g.visibleFullGridAd(!1),Laya.timer.once(100,this,()=>{this.ccb&&this.ccb()})}bannerShowHide(){g.hideBannerAd(),Laya.timer.once(1e3,this,()=>{g.showBannerAd(),Laya.timer.once(800,this,()=>{this.bannerShowHide()})})}btnContinueCB(){this.clickCount++,this.clickCount>=L.jsonConfig.remenBanner_count&&this.close()}}class x extends Laya.Scene{constructor(){super()}onOpened(e){let t=f.Share.isWin;this.winTitle.visible=t,this.loseTitle.visible=!t,this.nextBtn.visible=t,this.restartBtn.visible=!t,i.addClickEvent(this.restartBtn,this,this.back),i.addClickEvent(this.nextBtn,this,this.back),L.inFinish(t?this.nextBtn:this.restartBtn)}onClosed(){}back(){L.closeFinish(()=>{f.Share.isWin&&(t.getPlayerData().grade++,t.setPlayerData()),this.close(),f.Share.restartGame(),Laya.Scene.open("MyScenes/StartUI.scene",!0)})}}class A extends Laya.Script{constructor(){super()}onAwake(){let e=this.owner;e.y=e.y*Laya.stage.displayHeight/1334}}class b extends Laya.Scene{constructor(){super(),this.touchStartX=0,this.touchPreX=0,this.touching=!1}onOpened(){b.Share=this,this.gradeNum.value=t.getPlayerData().grade.toString(),this.touchBtn.on(Laya.Event.MOUSE_DOWN,this,this.touchBtnDownCB),this.touchBtn.on(Laya.Event.MOUSE_MOVE,this,this.touchBtnMoveCB),this.touchBtn.on(Laya.Event.MOUSE_UP,this,this.touchBtnUpCB),this.touchBtn.on(Laya.Event.MOUSE_OUT,this,this.touchBtnUpCB),Laya.timer.frameLoop(1,this,this.updateCB),L.inGame()}onClosed(){Laya.timer.clearAll(this)}touchBtnDownCB(e){f.Share.isGameOver||(f.Share.isStartGame||(f.Share.isStartGame=!0,this.guideAni.visible=!1,this.countTips.visible=!0,f.Share.startToWalk()),this.touching=!0,this.touchStartX=e.stageX,this.touchPreX=e.stageX)}touchBtnMoveCB(e){if(!this.touching||f.Share.isGameOver||!f.Share.isStartGame)return;let t=e.stageX,a=this.touchPreX-t;f.Share._playerCrl.moveX(a/80),this.touchPreX=t}touchBtnUpCB(e){this.touching&&!f.Share.isGameOver&&f.Share.isStartGame&&(this.touching=!1)}updateCB(){this.countTips.visible=f.Share.isStartGame,this.gradeNum.value=t.getPlayerData().grade.toString(),this.countNum.value=f.Share._mosquitoNode.numChildren.toString();let e=f.Share._floorFinish.transform.position.z;this.disBar.value=f.Share._mosquitoNode.transform.position.z/e}}class _ extends Laya.Scene{constructor(){super(),this.maxGrade=5}onOpened(){Laya.Browser.onWeiXin||localStorage.clear(),L.init(()=>{this.loadJsonData(1)}),Laya.timer.frameLoop(1,this,()=>{this.bar.value+=.01})}onClosed(){}loadJsonData(e){i.loadJson("res/config/Level"+e+".json",a=>{if(t.levelDataArr.push(a),++e>this.maxGrade)return this.loadRes(),void console.log("levelDataArr:",t.levelDataArr);this.loadJsonData(e)})}loadRes(){var e=[a.UnityPath+"Runer_1.lh",a.UnityPath+"Hammer_1.lh",a.UnityPath+"Slice_1.lh",a.UnityPath+"Slice_2.lh",a.UnityPath+"Floor_1.lh",a.UnityPath+"Floor_Finsh.lh",a.UnityPath+"Time_1.lh",a.UnityPath+"mosquito_1.lh",a.UnityPath+"mosquitoFX.lh"];Laya.loader.create(e,Laya.Handler.create(this,this.onComplete),Laya.Handler.create(this,this.onProgress))}onComplete(){L.loadGame(()=>{m.instance.initLoading(()=>{f.Share.initScene()})})}onProgress(e){}}class v extends Laya.Scene{constructor(){super(),this.hadStart=!1}onAwake(){m.instance.playMusic("bgm.mp3")}onOpened(){a.isStartUI=!0,Laya.timer.frameLoop(1,this,this.updateCB),this.startBtn.on(Laya.Event.CLICK,this,this.startBtnCB),L.inHomePage()}onClosed(){a.isStartUI=!1,Laya.timer.clearAll(this),g.hideBannerAd()}startBtnCB(){this.hadStart||(this.hadStart=!0,L.startGame(()=>{f.Share.gameStart()}))}updateCB(){}}class V extends Laya.Script{constructor(){super()}onAwake(){this.myOwnwer=this.owner,this.scaleLoop(this.myOwnwer,1.1,400)}scaleLoop(e,t,a){Laya.Tween.to(e,{scaleX:t,scaleY:t},a,null,new Laya.Handler(this,()=>{Laya.Tween.to(e,{scaleX:1,scaleY:1},a,null,new Laya.Handler(this,()=>{this.scaleLoop(e,t,a)}))}))}}class I{constructor(){}static init(){var e=Laya.ClassUtils.regClass;e("FanDong/Box1.ts",S),e("FanDong/Box2.ts",B),e("FanDong/Remen.ts",C),e("View/FinishUI.ts",x),e("Libs/FixNodeY.ts",A),e("View/GameUI.ts",b),e("View/LoadingUI.ts",_),e("View/StartUI.ts",v),e("Libs/ScaleLoop.ts",V)}}I.width=750,I.height=1334,I.scaleMode="fixedwidth",I.screenMode="vertical",I.alignV="top",I.alignH="left",I.startScene="FDScene/Remen.scene",I.sceneRoot="",I.debug=!1,I.stat=!1,I.physicsDebug=!1,I.exportSceneToJson=!0,I.init();new class{constructor(){window.Laya3D?Laya3D.init(I.width,I.height):Laya.init(I.width,I.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=I.scaleMode,Laya.stage.screenMode=I.screenMode,Laya.stage.alignV=I.alignV,Laya.stage.alignH=I.alignH,Laya.URL.exportSceneToJson=I.exportSceneToJson,Laya.stage.useRetinalCanvas=!0,(I.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),I.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),I.stat&&Laya.Stat.show(),Laya.alertGlobalError(!0),Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){new f}}}();