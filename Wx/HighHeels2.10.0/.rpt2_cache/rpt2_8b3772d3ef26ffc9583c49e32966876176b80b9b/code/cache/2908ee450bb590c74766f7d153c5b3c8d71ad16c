{
  "code": "import PlayerDataMgr from \"../Libs/PlayerDataMgr\";\r\nimport GameLogic from \"./GameLogic\";\r\nexport default class Player extends Laya.Script {\r\n    constructor() {\r\n        super();\r\n        this.myOwner = null;\r\n        this._ani = null;\r\n        this.isDied = false;\r\n        this.speed = 0.2;\r\n        this.roadEdge = 3;\r\n        this.myColorId = 0;\r\n    }\r\n    onEnable() {\r\n        this.myOwner = this.owner;\r\n        this._ani = this.owner.getComponent(Laya.Animator);\r\n        this.playIdle();\r\n    }\r\n    onDisable() {\r\n    }\r\n    playIdle() {\r\n        this._ani.speed = 1;\r\n        this._ani.play('idle');\r\n    }\r\n    playPush() {\r\n        this._ani.speed = 2;\r\n        this._ani.play('push');\r\n    }\r\n    playKick1() {\r\n        this._ani.speed = 0.5;\r\n        this._ani.play('kick1');\r\n    }\r\n    playKick2() {\r\n        this._ani.speed = 0.2;\r\n        this._ani.play('kick2');\r\n    }\r\n    moveX(dtX) {\r\n        if (GameLogic.Share.isGameOver || this.isDied) {\r\n            return;\r\n        }\r\n        if (this.myOwner.transform.position.x + dtX > this.roadEdge) {\r\n            this.myOwner.transform.position = new Laya.Vector3(this.roadEdge, this.myOwner.transform.position.clone().y, this.myOwner.transform.position.clone().z);\r\n            return;\r\n        }\r\n        else if (this.myOwner.transform.position.x + dtX < -this.roadEdge) {\r\n            this.myOwner.transform.position = new Laya.Vector3(-this.roadEdge, this.myOwner.transform.position.clone().y, this.myOwner.transform.position.clone().z);\r\n            return;\r\n        }\r\n        let newPos = new Laya.Vector3(dtX, 0, 0);\r\n        this.myOwner.transform.translate(newPos, false);\r\n    }\r\n    setMyColor(id) {\r\n        this.myColorId = id;\r\n        let c = PlayerDataMgr.getFruitColor(id);\r\n        let ms = this.myOwner.getChildByName('Hero_01');\r\n        ms.skinnedMeshRenderer.sharedMaterial.albedoColor = new Laya.Vector4(c.r, c.g, c.b, c.a);\r\n        ms.skinnedMeshRenderer.sharedMaterial.shininess = 0.01;\r\n        ms.skinnedMeshRenderer.sharedMaterial.albedoIntensity = 0.7;\r\n        ms.skinnedMeshRenderer.sharedMaterial.specularColor = new Laya.Vector4(0, 0, 0, 1);\r\n    }\r\n    onUpdate() {\r\n        if (!GameLogic.Share.isStartGame || GameLogic.Share.isGameOver || GameLogic.Share.isPause)\r\n            return;\r\n        let newPos = new Laya.Vector3(0, 0, this.speed);\r\n        this.myOwner.transform.translate(newPos, false);\r\n        GameLogic.Share._camera.transform.translate(newPos, false);\r\n        for (let i = 0; i < GameLogic.Share._roadNode.numChildren; i++) {\r\n            let r = GameLogic.Share._roadNode.getChildAt(i);\r\n            let id = parseInt(r.name);\r\n            if (Math.abs(this.myOwner.transform.position.z - r.transform.position.z) <= 0.2 &&\r\n                this.myColorId != id) {\r\n                GameLogic.Share.colorId = id;\r\n                this.setMyColor(id);\r\n                GameLogic.Share._playerBallCrl.setMyColor(id);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=Player.js.map",
  "references": [
    "E:/LayaProjects/PoleRush/src/Libs/PlayerDataMgr.ts",
    "E:/LayaProjects/PoleRush/src/Mod/Utility.ts",
    "E:/LayaProjects/PoleRush/src/Crl/GameLogic.ts"
  ],
  "map": "{\"version\":3,\"file\":\"Player.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/Crl/Player.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,aAAa,MAAM,uBAAuB,CAAA;AAEjD,OAAO,SAAS,MAAM,aAAa,CAAA;AAEnC,MAAM,CAAC,OAAO,OAAO,MAAO,SAAQ,IAAI,CAAC,MAAM;IAC3C;QACI,KAAK,EAAE,CAAA;QAGX,YAAO,GAAkB,IAAI,CAAA;QAC7B,SAAI,GAAkB,IAAI,CAAA;QAC1B,WAAM,GAAY,KAAK,CAAA;QACvB,UAAK,GAAW,GAAG,CAAA;QACnB,aAAQ,GAAW,CAAC,CAAA;QAEpB,cAAS,GAAW,CAAC,CAAA;IARrB,CAAC;IAUD,QAAQ;QACJ,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,KAAsB,CAAA;QAC1C,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;QAElD,IAAI,CAAC,QAAQ,EAAE,CAAA;IACnB,CAAC;IAED,SAAS;IAET,CAAC;IAED,QAAQ;QACJ,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAA;QACnB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;IAC1B,CAAC;IACD,QAAQ;QACJ,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAA;QACnB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;IAC1B,CAAC;IACD,SAAS;QACL,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAA;QACrB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;IAC3B,CAAC;IACD,SAAS;QACL,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAA;QACrB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;IAC3B,CAAC;IAED,KAAK,CAAC,GAAW;QACb,IAAI,SAAS,CAAC,KAAK,CAAC,UAAU,IAAI,IAAI,CAAC,MAAM,EAAE;YAC3C,OAAM;SACT;QAED,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,QAAQ,EAAE;YACzD,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAA;YACvJ,OAAM;SACT;aAAM,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE;YACjE,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAA;YACxJ,OAAM;SACT;QACD,IAAI,MAAM,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;QACxC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,CAAC,CAAA;IACnD,CAAC;IAED,UAAU,CAAC,EAAU;QACjB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAA;QACnB,IAAI,CAAC,GAAG,aAAa,CAAC,aAAa,CAAC,EAAE,CAAC,CAAA;QACvC,IAAI,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,SAAS,CAA6B,CAAC;QAC3E,EAAE,CAAC,mBAAmB,CAAC,cAA0C,CAAC,WAAW,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QACrH,EAAE,CAAC,mBAAmB,CAAC,cAA0C,CAAC,SAAS,GAAG,IAAI,CAAC;QACnF,EAAE,CAAC,mBAAmB,CAAC,cAA0C,CAAC,eAAe,GAAG,GAAG,CAAC;QACxF,EAAE,CAAC,mBAAmB,CAAC,cAA0C,CAAC,aAAa,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IACpH,CAAC;IAED,QAAQ;QACJ,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,WAAW,IAAI,SAAS,CAAC,KAAK,CAAC,UAAU,IAAI,SAAS,CAAC,KAAK,CAAC,OAAO;YAAE,OAAM;QAEjG,IAAI,MAAM,GAAG,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAA;QAC/C,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,CAAC,CAAA;QAC/C,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,CAAC,CAAA;QAE1D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,EAAE,EAAE;YAC5D,IAAI,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAkB,CAAA;YAChE,IAAI,EAAE,GAAG,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAA;YACzB,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,GAAG;gBAC3E,IAAI,CAAC,SAAS,IAAI,EAAE,EAAE;gBACtB,SAAS,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAA;gBAC5B,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,CAAA;gBACnB,SAAS,CAAC,KAAK,CAAC,cAAc,CAAC,UAAU,CAAC,EAAE,CAAC,CAAA;gBAC7C,MAAK;aACR;SACJ;IACL,CAAC;CACJ\"}"
}
