{
  "code": "import GameLogic from \"./GameLogic\";\r\nexport default class MoveComponent extends Laya.Script3D {\r\n    onAwake() {\r\n        this._self = this.owner;\r\n        this.init();\r\n    }\r\n    init() {\r\n        this.initData();\r\n        this._speedFactor = 1;\r\n        this._maxDis = 0;\r\n        this._maxPosX = 2.4;\r\n        Laya.stage.on(Laya.Event.MOUSE_UP, this, this.onMouseUpEvent);\r\n        Laya.stage.on(Laya.Event.MOUSE_DOWN, this, this.onMouseDownEvent);\r\n        Laya.stage.on(Laya.Event.MOUSE_MOVE, this, this.onMouseMoveEvent);\r\n    }\r\n    initData() {\r\n        this._targetPos = new Laya.Vector3;\r\n        this._lerpPos = new Laya.Vector3;\r\n    }\r\n    onMouseDownEvent(evt) {\r\n        if (!GameLogic.Share.isStartGame)\r\n            return;\r\n        Laya.timer.clear(this, this.frameUpdateRolePos);\r\n        Laya.timer.frameLoop(1, this, this.frameUpdateRolePos);\r\n        this.isPressed = true;\r\n        this._originPosX = evt.stageX;\r\n    }\r\n    onMouseUpEvent() {\r\n        if (!GameLogic.Share.isStartGame)\r\n            return;\r\n        this.isPressed = false;\r\n    }\r\n    onMouseMoveEvent(evt) {\r\n        if (!GameLogic.Share.isStartGame)\r\n            return;\r\n        if (this.isPressed) {\r\n            let posLimit = this._maxPosX;\r\n            if (evt.stageX != this._originPosX) {\r\n                let pos = this._self.transform.position.clone();\r\n                let rot = this._self.transform.rotationEuler.clone();\r\n                let dis = evt.stageX - this._originPosX;\r\n                if ((dis > 0 && this._maxDis < 0) || (dis < 0 && this._maxDis > 0))\r\n                    this._maxDis = 0;\r\n                if (Math.abs(dis) > Math.abs(this._maxDis)) {\r\n                    this._maxDis = dis;\r\n                }\r\n                pos.x -= 0.02 * this._maxDis * this._speedFactor;\r\n                if (pos.x > posLimit)\r\n                    pos.x = posLimit;\r\n                else if (pos.x < -posLimit)\r\n                    pos.x = -posLimit;\r\n                this._targetPos = pos;\r\n                this._self.transform.rotationEuler = rot;\r\n                this._originPosX = evt.stageX;\r\n            }\r\n        }\r\n    }\r\n    frameUpdateRolePos() {\r\n        this._targetPos.setValue(this._targetPos.x, this._self.transform.position.y, this._self.transform.position.z);\r\n        Laya.Vector3.lerp(this._self.transform.position, this._targetPos, 0.5, this._lerpPos);\r\n        this._self.transform.position = this._lerpPos;\r\n        if (Math.abs(this._lerpPos.x - this._targetPos.x) < 0.01) {\r\n            this._maxDis = 0;\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=MoveComponent.js.map",
  "references": [
    "E:/LayaProjects/HighHeels/src/Crl/GameLogic.ts"
  ],
  "map": "{\"version\":3,\"file\":\"MoveComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/Crl/MoveComponent.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
