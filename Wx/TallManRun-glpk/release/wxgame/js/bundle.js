!function(){"use strict";class e{constructor(){this.grade=1,this.skinArr=[1,0,0,0,0,0],this.skinId=0,this.coin=0}}class t{static getPlayerData(){return localStorage.getItem("playerData")?null==this._playerData&&(this._playerData=JSON.parse(localStorage.getItem("playerData"))):(this._playerData=new e,localStorage.setItem("playerData",JSON.stringify(this._playerData))),this._playerData}static changeCoin(e){this._playerData.coin+=e,this.setPlayerData()}static setPlayerData(){localStorage.setItem("playerData",JSON.stringify(this._playerData))}static getCostById(e){switch(e){case 0:return 0;case 1:return 400;case 2:return 500;case 3:case 4:case 5:return 600}}}t._playerData=null,t.levelDataArr=[];class i{static LoginWx(e){if(!Laya.Browser.onWeiXin)return;let t=Laya.Browser.window.wx.getLaunchOptionsSync();Laya.Browser.window.wx.login({success(i){i.code&&(console.log("res.code:",i.code),e&&e(i.code,t.query))}})}static GetLaunchParam(e){Laya.Browser.onWeiXin&&(this.OnShowFun=e,e(this.GetLaunchPassVar()),Laya.Browser.window.wx.onShow(e=>{null!=this.OnShowFun&&this.OnShowFun(e),console.log("wx on show")}))}static GetLaunchPassVar(){return Laya.Browser.onWeiXin?Laya.Browser.window.wx.getLaunchOptionsSync():null}static WxOnHide(e){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.onHide(e)}static WxOffHide(e){e&&Laya.Browser.onWeiXin&&Laya.Browser.window.wx.offHide(e)}static WxOnShow(e){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.onShow(e)}static WxOffShow(e){e&&Laya.Browser.onWeiXin&&Laya.Browser.window.wx.offShow(e)}static httpRequest(e,t,i="get",a){var s=new Laya.HttpRequest;s.http.timeout=5e3,s.once(Laya.Event.COMPLETE,this,a),s.once(Laya.Event.ERROR,this,this.httpRequest,[e,t,i,a]),"get"==i?s.send(e+"?"+t,"",i,"text"):"post"==i&&s.send(e,JSON.stringify(t),i,"text")}static DoVibrate(e=!0){Laya.Browser.onWeiXin&&this.isVibrate&&(e?Laya.Browser.window.wx.vibrateShort():Laya.Browser.window.wx.vibrateLong())}static OpenAlert(e,t=2e3,i=!1){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.showToast({title:e,duration:t,mask:!1,icon:i?"success":"none"})}static preViewImage(e){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.previewImage({current:e,urls:[e]})}}i.UnityPath="LayaScene_SampleScene/Conventional/",i.version="",i.isVibrate=!0,i.isMusic=!0,i.OnShowFun=null;class a{constructor(){this.effectArr=[]}static get instance(){return this._instance||(this._instance=new a),this._instance}initLoading(e){var t=[{url:"res/Sounds/bgm.mp3",type:Laya.Loader.SOUND}];Laya.loader.load(t,Laya.Handler.create(this,e)),Laya.SoundManager.setMusicVolume(1),Laya.SoundManager.setSoundVolume(1)}playMusic(e,t=0,i){Laya.SoundManager.playMusic("res/Sounds/"+e+".mp3",t,new Laya.Handler(this,i))}stopMusic(){Laya.SoundManager.stopMusic()}playSoundEffect(e,t=1,i,a,s){return Laya.SoundManager.playSound("res/Sounds/"+e+".mp3",t,new Laya.Handler(this,i),a,s)}stopSound(e){Laya.SoundManager.stopSound("res/Sounds/"+e+".mp3")}}class s{static calcDistance(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}static getWorldDis(e,t){let i=e.transform.position.clone(),a=t.transform.position.clone();return Laya.Vector3.distance(i,a)}static getDirectionAToB(e,t,i=!0){let a=e.transform.position.clone(),s=t.transform.position.clone(),n=new Laya.Vector3(0,0,0);return Laya.Vector3.subtract(s,a,n),i&&Laya.Vector3.normalize(n,n),n}static fixPosY(e,t=1334){return e*Laya.stage.displayHeight/t}static findNodeByName(e,t){let i=null,a=e=>{for(let s=0;s<e.numChildren;s++){if(e.getChildAt(s).name==t)return void(i=e.getChildAt(s));a(e.getChildAt(s))}};return a(e),i}static TmoveTo(e,t,i,a,s){if(!e.transform)return;let n=new Laya.Tween;var r=e.transform.position;n.to(e.transform.position,{x:i.x,y:i.y,z:i.z,update:new Laya.Handler(this,()=>{e.transform&&(e.transform.position=r)})},t,s,Laya.Handler.create(this,()=>{a&&a()}))}static TmoveToYZ(e,t,i,a,s){if(!e.transform)return;let n=new Laya.Tween;var r=e.transform.position;return n.to(e.transform.position,{y:i.y,z:i.z,update:new Laya.Handler(this,()=>{e.transform&&(e.transform.position=r)})},t,s,Laya.Handler.create(this,()=>{a&&a()})),n}static TmoveToX(e,t,i,a,s){if(!e.transform)return;let n=new Laya.Tween;var r=e.transform.localPosition;n.to(e.transform.localPosition,{x:i.x,update:new Laya.Handler(this,()=>{e.transform&&(e.transform.localPosition=r)})},t,null,Laya.Handler.create(this,()=>{a&&a()}))}static TmoveToY(e,t,i,a,s){if(!e.transform)return;let n=new Laya.Tween;var r=e.transform.localPosition;n.to(e.transform.localPosition,{y:i.y,update:new Laya.Handler(this,()=>{e.transform&&(e.transform.localPosition=r)})},t,s,Laya.Handler.create(this,()=>{a&&a()}))}static TmoveToWorld(e,t,i,a,s){if(!e.transform)return;let n=new Laya.Tween;var r=e.transform.position;n.to(e.transform.position,{y:i.y,update:new Laya.Handler(this,()=>{e.transform&&(e.transform.position=r)})},t,null,Laya.Handler.create(this,()=>{a&&a()}))}static RotateWithPoint(e,t,i){let a=new Laya.Vector3,s=e.transform.localPosition.clone();return i=i*Math.PI/180,a.x=s.x*Math.cos(i)+(t.y*s.z-t.z*s.y)*Math.sin(i)+t.x*(t.x*s.x+t.y*s.y+t.z*s.z)*(1-Math.cos(i)),a.y=s.y*Math.cos(i)+(t.x*s.z-t.z*s.x)*Math.sin(i)+t.y*(t.x*s.x+t.y*s.y+t.z*s.z)*(1-Math.cos(i)),a.z=s.z*Math.cos(i)+(t.x*s.y-t.y*s.x)*Math.sin(i)+t.z*(t.x*s.x+t.y*s.y+t.z*s.z)*(1-Math.cos(i)),a}static RotateTo(e,t,i,a){var s=e.transform.rotationEuler;Laya.Tween.to(e.transform.rotationEuler,{x:i.x,y:i.y,z:i.z,update:new Laya.Handler(this,function(){e&&(e.transform.rotationEuler=s)})},t,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){a&&a()}))}static ScaleTo(e,t,i,a){var s=e.transform.localScale;Laya.Tween.to(e.transform.localScale,{x:i.x,y:i.y,z:i.z,update:new Laya.Handler(this,function(){e&&(e.transform.localScale=s)})},t,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){a&&a()}))}static tMove2D(e,t,i,a,s){Laya.Tween.to(e,{x:t,y:i},a,null,new Laya.Handler(this,()=>{s&&s()}))}static scaleTo2D(e,t,i,a){Laya.Tween.to(e,{scaleX:t,scaleY:t},i,null,new Laya.Handler(this,()=>{a&&a()}))}static alphaTo2D(e,t,i,a){Laya.Tween.to(e,{alpha:t},i,null,new Laya.Handler(this,()=>{a&&a()}))}static updateNumber(e,t,i,a=!0,s,n){let r=e*t,o=Math.floor((r-e)/60);o=o<=0?1:o;let h=()=>{s?((e+=o)>=r&&(e=r,n&&n(),Laya.timer.clear(this,h)),a?i.text=e.toString():i.value=e.toString()):((r-=o)<=e&&(r=e,n&&n(),Laya.timer.clear(this,h)),a?i.text=r.toString():i.value=r.toString())};Laya.timer.frameLoop(1,this,h)}static loadJson(e,t){Laya.loader.load(e,Laya.Handler.create(this,t),null,Laya.Loader.JSON)}static objectShake(e,t=1,i=.7){var a=t,s=1,n=e.transform.localPosition.clone();Laya.timer.frameLoop(1,this,function updateShake(){if(a>0){var t=new Laya.Vector3;Laya.Vector3.scale((r=Math.random()>.5?Math.random():-Math.random(),o=Math.random()>.5?Math.random():-Math.random(),new Laya.Vector3(r,o,0)),i,t),Laya.Vector3.add(n,t,t),e.transform.localPosition=t,a-=.02*s}else a=0,e.transform.localPosition=n,Laya.timer.clear(this,updateShake);var r,o})}static getRandomItemInArr(e){return e[Math.floor(Math.random()*e.length)]}static shuffleArr(e){let t=e.length;for(;t;){let i=Math.floor(Math.random()*t--);[e[i],e[t]]=[e[t],e[i]]}return e}static GetRandom(e,t,i=!0){let a=t-e,s=Math.random()*(a+1);return s+=e,i?Math.floor(s):s}static coinCollectAnim(e,t,i,a=10,s){let n=a;for(var r=0;r<a;r++){let a=Laya.Pool.getItemByClass("coin",Laya.Image);a.skin="startUI/zy_zs_1.png",a.x=e.x,a.y=e.y,i.addChild(a);let r=300+100*Math.random()-50;Laya.Tween.to(a,{x:a.x+250*Math.random()-125,y:a.y+250*Math.random()-125},r),Laya.timer.once(r+50,this,function(){Laya.Tween.to(a,{x:t.x,y:t.y},400,null,new Laya.Handler(this,function(){i.removeChild(a),Laya.Pool.recover("coin",a),0==--n&&s&&s()}))})}}static scaleLoop(e,t,i){Laya.Tween.to(e,{scaleX:t,scaleY:t},i,null,new Laya.Handler(this,()=>{Laya.Tween.to(e,{scaleX:1,scaleY:1},i,null,new Laya.Handler(this,()=>{this.scaleLoop(e,t,i)}))}))}static rotateLoop(e,t,i){Laya.Tween.to(e,{rotation:t},i,null,new Laya.Handler(this,()=>{Laya.Tween.to(e,{rotation:-t},2*i,null,new Laya.Handler(this,()=>{Laya.Tween.to(e,{rotation:0},i,null,new Laya.Handler(this,()=>{this.rotateLoop(e,t,i)}))}))}))}static visibleDelay(e,t){e.visible=!1,Laya.timer.once(t,this,()=>{e.visible=!0})}static pointInPolygon(e,t){for(var i=e.x,a=e.y,s=!1,n=0,r=t.length-1;n<t.length;r=n++){var o=t[n].x,h=t[n].y,l=t[r].x,d=t[r].y;h>a!=d>a&&i<(l-o)*(a-h)/(d-h)+o&&(s=!s)}return s}static getSprite3DResByUrl(e,t,a=!1){let s=Laya.loader.getRes(i.UnityPath+e);return Laya.Sprite3D.instantiate(s,t,a,new Laya.Vector3(0,0,0))}static getRandomItemInArrWithoutSelf(e,t,i=1){let a=[].concat(t);return a.splice(a.indexOf(e),1),(a=this.shuffleArr(a)).slice(0,i)}static getBoundBox(e,t=!1){let i=e.getComponent(Laya.PhysicsCollider).colliderShape,a=e.transform.position.clone();a.x+=i.localOffset.x,a.y+=i.localOffset.y,a.z+=i.localOffset.z;let s=e.parent,n=1;s&&s.transform&&t&&(n=s.transform.localScaleZ);let r=new Laya.Vector3(a.x-i.sizeX/2,a.y-i.sizeY/2,a.z-i.sizeZ/2),o=new Laya.Vector3(a.x+i.sizeX/2,a.y+i.sizeY/2,a.z+i.sizeZ*n/2/2);return new Laya.BoundBox(r,o)}static getBoundBoxWithMinMax(e,t){return new Laya.BoundBox(e,t)}static addClickEvent(e,t,i,s,n){if(e.offAllCaller(t),e instanceof Laya.Button&&!n){let a=e=>{i&&i.call(t,e)};e.on(Laya.Event.CLICK,t,a,[s])}else{let n=60,r=1,o=e.scaleX*r,h=e.scaleY*r,l=.9*r,d=!1,c=t=>{d=!0,a.instance.playSoundEffect("Click"),Laya.Tween.to(e,{scaleX:l,scaleY:l},n)};e.on(Laya.Event.MOUSE_DOWN,t,c,[s]);let y=a=>{0!=d&&(d=!1,Laya.Tween.to(e,{scaleX:o,scaleY:h},n,null,new Laya.Handler(t,()=>{i&&i.call(t,a)})))};e.on(Laya.Event.MOUSE_UP,t,y,[s]);let m=t=>{Laya.Tween.to(e,{scaleX:o,scaleY:h},n)};e.on(Laya.Event.MOUSE_OUT,t,m,[s])}}static getVector3(e,t,i){return new Laya.Vector3(Number(e),Number(t),Number(i))}}class n extends Laya.Script{constructor(){super()}onAwake(){this.myOwner=this.owner}onDisable(){}moveToBoss(){let e=b.Share._boss.transform.position.clone();e.y=25,s.TmoveTo(this.myOwner,2e3,e,null);let t=this.myOwner.transform.rotationEuler.clone();t.x=-90,s.RotateTo(this.myOwner,3e3,t,null)}onUpdate(){if(b.Share.isGameOver||!b.Share.isStartGame)return;let e=b.Share._player.transform.position.clone(),t=this.myOwner.transform.position.clone();t.y=e.y+4.76,t.z=e.z-8,Laya.Vector3.lerp(this.myOwner.transform.position.clone(),t,.2,t),this.myOwner.transform.position=t}}var r,o,h;!function(e){e.ANI_IDLE="idle",e.ANI_FLYING="flying",e.ANI_FLYINGKICK="flyingkick",e.ANI_JUMPSTART="jump_start",e.ANI_JUMPFALL="jump_fall",e.ANI_RUN="run",e.ANI_SPRINT="sprint"}(r||(r={}));class l{static createBoom1(e){let t=Laya.Sprite3D.instantiate(b.Share.getItemByName("Bomb_1"),b.Share._levelNode,!1);t.transform.position=e,Laya.timer.once(1e3,this,()=>{t&&!t.destroyed&&t.destroy()})}static createPurple(e){let t=Laya.Sprite3D.instantiate(b.Share.getItemByName("Bomb_2_Purple"),b.Share._levelNode,!1);t.transform.position=e,Laya.timer.once(500,this,()=>{t&&!t.destroyed&&t.destroy()})}static createGreen(e){let t=Laya.Sprite3D.instantiate(b.Share.getItemByName("Bomb_2_Green"),b.Share._levelNode,!1);t.transform.position=e,Laya.timer.once(500,this,()=>{t&&!t.destroyed&&t.destroy()})}static createOrange(e){let t=Laya.Sprite3D.instantiate(b.Share.getItemByName("Bomb_2_Orange"),b.Share._levelNode,!1);t.transform.position=e,Laya.timer.once(500,this,()=>{t&&!t.destroyed&&t.destroy()})}static createBoom4(e){let t=Laya.Sprite3D.instantiate(b.Share.getItemByName("Bomb_4"),b.Share._levelNode,!1);t.transform.position=e,t.transform.setWorldLossyScale(new Laya.Vector3(2,2,2)),Laya.timer.once(1500,this,()=>{t&&!t.destroyed&&t.destroy()})}static createFireWork(e){Laya.Sprite3D.instantiate(b.Share.getItemByName("Fireworks_1"),b.Share._levelNode,!1).transform.position=e}}class d extends Laya.Script{constructor(){super(),this.myOwner=null,this.hatNode=null,this.Bones_L_Forearm=null,this.Bones_L_UpperArm=null,this.Bones_L_Clavicle=null,this.Bones_R_Forearm=null,this.Bones_R_UpperArm=null,this.Bones_R_Clavicle=null,this.Bones_Pelvis=null,this.Bones_L_Calf=null,this.Bones_L_Thigh=null,this.Bones_R_Calf=null,this.Bones_R_Thigh=null,this.Bones_Spine=null,this.Dummy_Head_Vertex=null,this.Dummy001=null,this.Dummy_Arm001=null,this.Dummy_Arm002=null,this.touchX=0,this.speed=.1,this.edgeMax=3,this.tempSpeed=0,this.scaleH=1,this.maxH=10,this.scaleV=1,this.maxV=15,this.HArr=[],this.isJumping=!1,this.canMove=!0,this.curAniName=""}onAwake(){this.myOwner=this.owner,this._ani=this.myOwner.getComponent(Laya.Animator),this.hatNode=s.findNodeByName(this.myOwner,"Dummy_Head"),this.Bones_L_Forearm=s.findNodeByName(this.myOwner,"Bones_L_Forearm"),this.Bones_L_UpperArm=s.findNodeByName(this.myOwner,"Bones_L_UpperArm"),this.Bones_L_Clavicle=s.findNodeByName(this.myOwner,"Bones_L_Clavicle"),this.Bones_R_Forearm=s.findNodeByName(this.myOwner,"Bones_R_Forearm"),this.Bones_R_UpperArm=s.findNodeByName(this.myOwner,"Bones_R_UpperArm"),this.Bones_R_Clavicle=s.findNodeByName(this.myOwner,"Bones_R_Clavicle"),this.Bones_Pelvis=s.findNodeByName(this.myOwner,"Bones_Pelvis"),this.Bones_L_Calf=s.findNodeByName(this.myOwner,"Bones_L_Calf"),this.Bones_L_Thigh=s.findNodeByName(this.myOwner,"Bones_L_Thigh"),this.Bones_R_Calf=s.findNodeByName(this.myOwner,"Bones_R_Calf"),this.Bones_R_Thigh=s.findNodeByName(this.myOwner,"Bones_R_Thigh"),this.Bones_Spine=s.findNodeByName(this.myOwner,"Bones_Spine"),this.Dummy_Head_Vertex=s.findNodeByName(this.myOwner,"Dummy_Head_Vertex"),this.Dummy001=s.findNodeByName(this.myOwner,"Dummy001"),this.Dummy_Arm001=s.findNodeByName(this.myOwner,"Dummy_Arm001"),this.Dummy_Arm002=s.findNodeByName(this.myOwner,"Dummy_Arm002"),this.HArr=[this.Bones_L_Forearm,this.Bones_L_UpperArm,this.Bones_L_Clavicle,this.Bones_R_Forearm,this.Bones_R_UpperArm,this.Bones_R_Clavicle,this.Bones_L_Calf,this.Bones_L_Thigh,this.Bones_R_Calf,this.Bones_R_Thigh,this.Bones_Spine,this.Dummy_Arm001,this.Dummy_Arm002],this.playAni(r.ANI_IDLE),this.init()}init(){this.changeSkin(t.getPlayerData().skinId)}changeSkin(e){let t="res/Heros/Hero_"+(e+1)+".jpg";Laya.Texture2D.load(t,Laya.Handler.create(this,e=>{this.myOwner.getChildAt(0).skinnedMeshRenderer.material.albedoTexture=e,this.myOwner.getChildAt(1).skinnedMeshRenderer.material.albedoTexture=e,this.myOwner.getChildAt(3).skinnedMeshRenderer.material.albedoTexture=e,s.findNodeByName(this.myOwner,"Head").meshRenderer.material.albedoTexture=e}));for(let t=0;t<5;t++){this.hatNode.getChildAt(t).active=e>0&&t+1==e}}startRun(){this.myOwner.transform.position=new Laya.Vector3(0,0,0),this.myOwner.transform.rotationEuler=new Laya.Vector3(0,0,0),this.playAni(r.ANI_RUN)}playAni(e,t=1,i=0){e!=this.curAniName&&(this._ani.crossFade(e,.2,0,i),this._ani.speed=t,this.curAniName=e)}moveX(){if(b.Share.isGameOver||!this.canMove)return;let e=this.speed+this.tempSpeed,t=new Laya.Vector3(0,0,e);this.myOwner.transform.translate(t,!1);let i=this.touchX;i=(i-=Laya.stage.displayWidth/2)/(Laya.stage.displayWidth/2)*this.edgeMax,(t=this.myOwner.transform.position.clone()).x=-i,Laya.Vector3.lerp(this.myOwner.transform.position.clone(),t,.2,t),this.myOwner.transform.position=t}hurtCB(e){}jump(){this.isJumping=!0,this.playAni(r.ANI_JUMPSTART),Laya.timer.once(200,this,()=>{this.playAni(r.ANI_FLYING)});let e=this.myOwner.transform.position.clone(),t=e.clone();t.z+=5,t.y+=8;let i=e.clone();i.z+=10,i.y=0,s.TmoveToYZ(this.myOwner,800,t,()=>{s.TmoveToYZ(this.myOwner,800,i,()=>{this.playAni(r.ANI_RUN),this.isJumping=!1},Laya.Ease.sineIn)},Laya.Ease.sineInOut)}changeV(e,t){switch(e){case"+":t/=15,this.scaleV+=t;break;case"-":t/=15,this.scaleV-=t;break;case"*":this.scaleV*=t;break;case"/":this.scaleV/=t}this.scaleV<0&&(this.scaleV=0),this.scaleV>this.maxV&&(this.scaleV=this.maxV)}changeH(e,t){switch(e){case"+":t/=15,this.scaleH+=t;break;case"-":t/=15,this.scaleH-=t;break;case"*":this.scaleH*=t;break;case"/":this.scaleH/=t}this.scaleH<0&&(this.scaleH=0),this.scaleH>this.maxH&&(this.scaleH=this.maxH)}decHV(e=.4){this.scaleV>1?this.scaleV-=e:this.scaleH-=e,this.scaleH<0&&(this.scaleH=0,this._ani.speed=0,b.Share._bossCrl.playAni("win"),this.diedCB(),b.Share.gameOver(!0)),this.scaleV<0&&(this.scaleV=0)}diedCB(){let e=this.myOwner.transform.position.clone(),t=4*Math.random()-2;e.x=t,e.z+=10*Math.random()+5,s.TmoveTo(this.myOwner,1500,e,null);let i=new Laya.Vector3;i.x=720*Math.random()+360,i.z=720*Math.random()+360,s.RotateTo(this.myOwner,1500,i,null)}updateScaleH(){let e=new Laya.Vector3(1,this.scaleH,this.scaleH);for(let t=0;t<this.HArr.length;t++){let i=this.HArr[t];if(i==this.Bones_Spine&&(e=new Laya.Vector3(1,1.5*this.scaleH,1.5*this.scaleH)),i==this.Bones_R_Calf||i==this.Bones_R_Thigh||i==this.Dummy_Arm001){let e=.03*this.scaleH,t=i.transform.localPosition.clone(),a=t.clone();if(a.z=e,Laya.Vector3.lerp(t,a,.1,a),i.transform.localPosition=a,i==this.Dummy_Arm001)continue}else if(i==this.Bones_L_Calf||i==this.Bones_L_Thigh||i==this.Dummy_Arm002){let e=.03*this.scaleH,t=i.transform.localPosition.clone(),a=t.clone();if(a.z=-e,Laya.Vector3.lerp(t,a,.1,a),i.transform.localPosition=a,i==this.Dummy_Arm002)continue}let a=new Laya.Vector3,s=i.transform.localScale.clone();Laya.Vector3.lerp(s,e,.1,a),i.transform.localScale=a}e=new Laya.Vector3(this.scaleH,this.scaleH,.6*this.scaleH);let t=new Laya.Vector3,i=this.Bones_Pelvis.transform.localScale.clone();Laya.Vector3.lerp(i,e,.1,t),this.Bones_Pelvis.transform.localScale=t}updateScaleV(){let e=new Laya.Vector3(this.scaleV,1,1),t=new Laya.Vector3,i=this.Bones_Spine.transform.localScale.clone();Laya.Vector3.lerp(i,e,.1,t),this.Bones_Spine.transform.localScale=t;let a=this.Dummy001.transform.position.clone();this.Dummy_Head_Vertex.transform.position=a}walkFinish(){b.Share.isFinish=!0;let e=this.myOwner.transform.position.clone();e.x=0,e.z=b.Share._roadFinish.transform.position.z+3.5,s.TmoveTo(this.myOwner,500,e,()=>{this.jumpToDes()});let t=b.Share._roadFinish.transform.position.clone();t.x=1,t.z+=2;let i=b.Share._roadFinish.transform.position.clone();i.x=-1,i.z+=2,l.createFireWork(t),l.createFireWork(i)}jumpToDes(){a.instance.playSoundEffect("spring"),this.playAni(r.ANI_JUMPSTART),Laya.timer.once(200,this,()=>{this.playAni(r.ANI_FLYING)});let e=this.myOwner.transform.position.clone().clone();e.z+=20,e.y+=10;let t=b.Share._roadFinish2.transform.position.clone();s.TmoveToYZ(this.myOwner,1500,e,()=>{s.TmoveToYZ(this.myOwner,800,t,()=>{a.instance.playSoundEffect("land"),this.playAni(r.ANI_SPRINT),Laya.timer.frameLoop(1,this,this.rushToBoss)},Laya.Ease.sineIn)},Laya.Ease.sineInOut);let i=b.Share._camera.transform.rotationEuler.clone();i.y+=15,s.RotateTo(b.Share._camera,1e3,i,null);let n=b.Share._camera.transform.position.clone();n.x-=3,s.TmoveToX(b.Share._camera,1e3,n,null)}rushToBoss(){if(b.Share.isGameOver)return;let e=2*this.speed,t=new Laya.Vector3(0,0,e);this.myOwner.transform.translate(t,!1);let i=b.Share._roadFinish2.getChildAt(1);this.myOwner.transform.position.z>=i.transform.position.z&&(Laya.timer.clear(this,this.rushToBoss),this.jumpToBoss())}jumpToBoss(){a.instance.playSoundEffect("spring"),b.Share.isGameOver=!0,b.Share._cameraCrl.moveToBoss(),this.playAni(r.ANI_FLYINGKICK,.15);let e=b.Share._boss.transform.position.clone();e.y=14,e.z-=1.5,s.TmoveTo(this.myOwner,2300,e,()=>{a.instance.playSoundEffect("boss"),l.createBoom4(new Laya.Vector3(e.x,e.y,e.z+1.5)),b.Share._bossCrl.playAni("die",.2);let t=this.myOwner.transform.position.clone();t.y=0,Laya.timer.once(1e3,this,()=>{this._ani.speed=.5,s.TmoveTo(this.myOwner,2e3,t,null),b.Share.gameOver(!0)})})}onUpdate(){if(this.updateScaleH(),this.updateScaleV(),!b.Share.isGameOver&&b.Share.isStartGame&&!b.Share.isFinish)if(this.moveX(),this.myOwner.transform.position.z>=b.Share._roadFinish.transform.position.z&&this.walkFinish(),this.myOwner.transform.position.x<-this.edgeMax){let e=this.myOwner.transform.position.clone();e.x=-this.edgeMax,this.myOwner.transform.position=e}else if(this.myOwner.transform.position.x>this.edgeMax){let e=this.myOwner.transform.position.clone();e.x=this.edgeMax,this.myOwner.transform.position=e}}}class c{static inidAd(e){if(!Laya.Browser.onWeiXin)return void(e&&e());this.initBanner(),this.createVideoAd(),this.initGridAD(),this.createInterstitialAd();let t=()=>{this.isFullGridAdLoaded&&(Laya.timer.clear(this,t),e&&e())};Laya.timer.loop(100,this,t)}static getSystemInfoSync(){if(Laya.Browser.onWeiXin)return this.sysInfo||(this.sysInfo=Laya.Browser.window.wx.getSystemInfoSync()),this.sysInfo}static initBanner(){if(Laya.Browser.onWeiXin){this.bannerIdArr=this.shuffleArr(this.bannerIdArr),console.log("bannerId 数组排列：",this.bannerIdArr),!y.canTrapAll&&this.bannerAds.length>1&&this.bannerAds.splice(0,this.bannerAds.length-1);for(let e=0;e<this.bannerIdArr.length;e++)this.bannerTimesArr.push(0),this.bannerShowCount.push(0),this.bannerErrorArr.push(!1);for(let e=0;e<this.bannerIdArr.length;e++){let t=this.createBannerAd(e);this.bannerAds.push(t)}}}static get isAllBannerError(){let e=!0;for(let t=0;t<this.bannerErrorArr.length;t++)if(!this.bannerErrorArr[t]){e=!1;break}return e}static showBannerAd(){if(Laya.Browser.onWeiXin)if(this.isAllBannerError)this.stopCountBannerTime();else{for(let e=0;e<this.bannerErrorArr.length&&this.bannerErrorArr[this.bannerIndex];e++)this.bannerIndex++,this.bannerIndex>=this.bannerIdArr.length&&(this.bannerIndex=0);this.bannerAds[this.bannerIndex]&&this.bannerAds[this.bannerIndex].show(),this.stopCountBannerTime(),y.canTrapAll&&Laya.timer.loop(100,this,this.countBannerTime)}}static hideBannerAd(){Laya.Browser.onWeiXin&&(this.isAllBannerError?this.stopCountBannerTime():(this.bannerAds[this.bannerIndex]&&this.bannerAds[this.bannerIndex].hide(),this.stopCountBannerTime()))}static countBannerTime(){this.bannerTimesArr[this.bannerIndex]+=.1,this.bannerTimesArr[this.bannerIndex]>=y.jsonConfig.refresh_banner_time&&(this.bannerAds[this.bannerIndex]&&this.bannerAds[this.bannerIndex].hide(),this.bannerTimesArr[this.bannerIndex]=0,this.bannerShowCount[this.bannerIndex]++,this.bannerShowCount[this.bannerIndex]>=y.jsonConfig.updateBanner&&(this.bannerShowCount[this.bannerIndex]=0,this.bannerAds[this.bannerIndex]&&this.bannerAds[this.bannerIndex].destroy(),this.bannerAds[this.bannerIndex]=null,this.bannerAds[this.bannerIndex]=this.createBannerAd(this.bannerIndex)),this.bannerIndex++,this.bannerIndex>=this.bannerIdArr.length&&(this.bannerIndex=0),this.showBannerAd())}static stopCountBannerTime(){Laya.timer.clear(this,this.countBannerTime)}static createBannerAd(e,t=!1){if(!Laya.Browser.onWeiXin)return;let i=this.getSystemInfoSync(),a=Laya.Browser.window.wx.createBannerAd({adUnitId:this.bannerIdArr[e],style:{top:.8*i.screenHeight,width:300,left:i.screenWidth/2-150},adIntervals:30});return a.onLoad(()=>{t&&a.show(),this.bannerErrorArr[e]=!1,console.log("Banner广告加载成功")}),a.onError(t=>{this.bannerErrorArr[e]=!0,console.error("Banner广告加载失败",JSON.stringify(t))}),a.onResize(e=>{let t=a.style.realHeight+.1;a.style.top=i.screenHeight-t}),a}static createVideoAd(){if(Laya.Browser.onWeiXin){var e,t=this;null!=(e=this.videoAd)&&(e.offLoad(onLoadVideo),e.offError(onErrorVideo),e.offClose(onCloseVideo)),(e=Laya.Browser.window.wx.createRewardedVideoAd({adUnitId:t.videoId[0]})).onLoad(onLoadVideo),e.onError(onErrorVideo),e.onClose(onCloseVideo),this.videoAd=e}function onLoadVideo(){console.log("video 加载成功"),t.isExistVideoAd=!0}function onErrorVideo(e){console.error("video 加载错误",e),t.isExistVideoAd=!1}function onCloseVideo(e){!!(e&&e.isEnded||void 0===e)&&(t.videoFinishCallback&&t.videoFinishCallback(),t.videoFinishCallback=null),t.videoCancelCallback&&t.videoCancelCallback(),t.videoCancelCallback=null}}static showVideoAd(e,t){if(!Laya.Browser.onWeiXin)return e&&e(),void(t&&t());if(!Laya.Browser.onWeiXin)return;let i=this;if(this.videoFinishCallback=e,this.videoCancelCallback=t,this.isExistVideoAd||this.createVideoAd(),Laya.Browser.onWeiXin){var a=this.videoAd;a.show().then(()=>{}).catch(e=>{a.load().then(()=>a.show()).catch(e=>{i.videoCancelCallback&&i.videoCancelCallback(),i.videoCancelCallback=null,i.videoFinishCallback&&i.videoFinishCallback(),i.videoFinishCallback=null})})}}static destroyVideoAd(){this.videoAd&&(this.videoAd.destroy(),this.videoAd=null)}static initGridAD(){Laya.Browser.onWeiXin&&(this.createFullGrid(),this.createBottomGrid(),this.createSideGrid(),this.createSingleGrid())}static createFullGrid(){Laya.Browser.onWeiXin&&(this.fullGridAd&&(this.fullGridAd.destroy(),this.fullGridAd=null),this.fullGridAd=Laya.Browser.window.wx.createCustomAd({adUnitId:this.fullGridId[0],adIntervals:30,style:{left:0,top:this.getSystemInfoSync().screenHeight/2-this.getSystemInfoSync().screenWidth/2-50,width:this.getSystemInfoSync().screenWidth}}),this.fullGridAd.onError(e=>{this.isFullGridAdLoaded=!0,this.fullGridError=!0,console.log("全屏格子加载失败:",JSON.stringify(e))}),this.fullGridAd.onLoad(()=>{this.isFullGridAdLoaded=!0,this.fullGridError=!1}))}static visibleFullGridAd(e=!0){Laya.Browser.onWeiXin&&this.fullGridAd&&!this.fullGridError&&(e?this.fullGridAd.show():this.fullGridAd.hide())}static getIsFullGridAdError(){return this.fullGridError&&this.createFullGrid(),this.fullGridError}static createBottomGrid(){this.bottomGridAd&&(this.bottomGridAd.destroy(),this.bottomGridAd=null),this.bottomGridAd=Laya.Browser.window.wx.createCustomAd({adUnitId:this.bottomGridId[0],adIntervals:30,style:{left:0,top:this.getSystemInfoSync().screenHeight-110,width:this.getSystemInfoSync().screenWidth}}),this.bottomGridAd.onError(e=>{this.bottomGridError=!0,console.log("底部格子加载失败:",JSON.stringify(e))}),this.bottomGridAd.onLoad(()=>{this.bottomGridError=!1})}static visibleBottomGridAd(e=!0){Laya.Browser.onWeiXin&&(this.bottomGridError?this.createBottomGrid():this.bottomGridAd&&(e?this.bottomGridAd.show():this.bottomGridAd.hide()))}static createSideGrid(){for(let e=0;e<this.sideGridAd.length;e++)this.sideGridAd[e].destroy(),this.sideGridAd=[];for(let e=0;e<2;e++){let t=Laya.Browser.window.wx.createCustomAd({adUnitId:this.sideGridId[0],adIntervals:30,style:{left:0==e?0:this.getSystemInfoSync().screenWidth-65,top:this.getSystemInfoSync().screenHeight/2-220}});t.onError(e=>{console.log("屏幕侧格子加载失败:",JSON.stringify(e))}),t.onLoad(()=>{this.sideGridAd.push(t)})}}static visibleSideGridAd(e=!0){if(Laya.Browser.onWeiXin)if(this.sideGridAd.length<=0)this.createSideGrid();else for(let t=0;t<this.sideGridAd.length;t++)e?this.sideGridAd[t].show():this.sideGridAd[t].hide()}static createSingleGrid(){for(let e=0;e<this.singleGridAd.length;e++)this.singleGridAd[e].destroy(),this.singleGridAd=[];for(let e=0;e<2;e++){let t=Laya.Browser.window.wx.createCustomAd({adUnitId:this.singleGridId[0],adIntervals:30,style:{left:0==e?0:this.getSystemInfoSync().screenWidth-65,top:120}});t.onError(e=>{console.log("屏幕单格子加载失败:",JSON.stringify(e))}),t.onLoad(()=>{this.singleGridAd.push(t)})}}static visibleSingleGridAd(e=!0){if(Laya.Browser.onWeiXin)if(this.singleGridAd.length<=0)this.createSingleGrid();else for(let t=0;t<this.singleGridAd.length;t++)e?this.singleGridAd[t].show():this.singleGridAd[t].hide()}static createInterstitialAd(){Laya.Browser.onWeiXin&&(this.intersititialAd&&(this.intersititialAd.offError(),this.intersititialAd.offLoad(),this.intersititialAd.offClose(),this.intersititialAd.destroy(),this.intersititialAd=null),this.intersititialAd=Laya.Browser.window.wx.createInterstitialAd({adUnitId:this.interstitialId[0]}),this.intersititialAd.onError(e=>{this.intersititialError=!0,console.log("插屏广告加载失败:",JSON.stringify(e))}),this.intersititialAd.onLoad(()=>{this.intersititialError=!1}),this.intersititialAd.onClose(()=>{this.intersititialCB&&this.intersititialCB()}),this.intersititialAd.load())}static showInterstitialAd(e){if(!Laya.Browser.onWeiXin||!this.intersititialAd||this.intersititialError)return this.intersititialError&&this.createInterstitialAd(),void(e&&e());this.intersititialCB=e,this.intersititialAd.show().then(()=>{}).catch(e=>{this.intersititialCB&&this.intersititialCB()})}static shuffleArr(e){let t=e.length;for(;t;){let i=Math.floor(Math.random()*t--);[e[i],e[t]]=[e[t],e[i]]}return e}}c.bannerIdArr=[],c.videoId=[],c.fullGridId=[],c.bottomGridId=[],c.sideGridId=[],c.singleGridId=[],c.interstitialId=[],c.bannerAds=[],c.bannerIndex=0,c.bannerTimesArr=[],c.bannerShowCount=[],c.bannerErrorArr=[],c.isExistVideoAd=!1,c.fullGridAd=null,c.fullGridError=!1,c.isFullGridAdLoaded=!1,c.bottomGridAd=null,c.bottomGridError=!1,c.sideGridAd=[],c.singleGridAd=[],c.intersititialAd=null,c.intersititialCB=null,c.intersititialError=!1;class y{static randTouchProgress(){this.wuchuProgressValue=this.getRangeNumer(.3,.8)}static getRangeNumer(e,t){return Math.random()*(t-e)+e}static bannerShowHide(){c.hideBannerAd(),Laya.timer.once(600,this,()=>{c.showBannerAd(),Laya.timer.once(800,this,()=>{this.bannerShowHide()})})}static videoBannerShowHide(){y.visibleVideoBanner(!1,!1),Laya.timer.once(600,this,()=>{y.visibleVideoBanner(!0,!1),Laya.timer.once(800,this,()=>{this.videoBannerShowHide()})})}static init(e){this.randTouchProgress(),Laya.Browser.onWeiXin?Laya.loader.load("WXSDK/FDConfig.json",Laya.Handler.create(this,t=>{y.version=t.version,y.appid=t.appid,y.secret=t.secret,this.getConfig(e)}),null,Laya.Loader.JSON):e&&e()}static loadGame(e){this.showReMen(()=>{this.showBox1(e)})}static showHomeUI(e){e?Laya.Scene.open(o.HomeUI,!1):Laya.Scene.close(o.HomeUI)}static showHomeUIReMen(e){Laya.Scene.open(o.Remen,!1,{ccb:e})}static showReMen(e){this.showRemen?Laya.Scene.open(o.Remen,!1,{ccb:e}):e&&e()}static showStartReMen(e){this.startRemen?Laya.Scene.open(o.Remen,!1,{ccb:e}):e&&e()}static showEndReMen(e){this.endRemen?Laya.Scene.open(o.Remen,!1,{ccb:e,showAdPic:this.endRemen_switch}):e&&e()}static showBox1(e){this.firstBox?Laya.Scene.open(o.Box1,!1,{ccb:e,type:this.firstBox_switch?h.Box_VideoBanner:h.Box_Banner}):e&&e()}static showBox2(e){this.bannerBox?Laya.Scene.open(o.Box1,!1,{ccb:e,type:this.bannerBox_switch?h.Box_VideoBanner:h.Box_Banner}):e&&e()}static visibleVideoBanner(e,t=!0){e?Laya.Scene.open(o.VideoBanner,!1,{showFinger:t}):Laya.Scene.close(o.VideoBanner)}static showVirtualWxpage(e){this.showVitualWx&&Laya.Browser.onWeiXin?Laya.Browser.window.wx.showModal({title:"提示",content:"未观看完广告无法获取奖励，是否继续？",success:t=>{this.showVirtualCount<this.jsonConfig.vitualWx_count?(this.showVirtualCount++,c.showVideoAd(null,()=>{this.showVirtualWxpage(e)})):(this.showVirtualCount=0,e&&e())}}):e&&e()}static inHomePage(e){this.showHomeUI(!0),c.showInterstitialAd(),c.visibleSideGridAd(),c.showBannerAd(),e&&e()}static inShop(){this.showHomeUI(!1),c.visibleSideGridAd(!1),c.visibleBottomGridAd(!1)}static startGame(e){this.showHomeUI(!1),c.hideBannerAd(),c.visibleSideGridAd(!1),c.visibleBottomGridAd(!1),c.showInterstitialAd(()=>{this.showStartReMen(()=>{this.showBox2(()=>{this.showVirtualWxpage(e)})})})}static inGame(){c.showBannerAd(),c.visibleSingleGridAd()}static showGameOver(e){this.visibleVideoBanner(!1),c.hideBannerAd(),c.visibleSingleGridAd(!1),this.showEndReMen(e)}static inFinish(e){c.showInterstitialAd(),c.visibleSideGridAd(),c.hideBannerAd(),this.endBanner?(this.endBanner_switch?this.videoBannerShowHide():this.bannerShowHide(),e&&(e.bottom=20)):(e&&(e.bottom=250),c.showBannerAd())}static closeFinish(e){Laya.timer.clearAll(this),c.visibleBottomGridAd(!1),c.visibleSideGridAd(!1),this.visibleVideoBanner(!1),c.hideBannerAd(),this.gameCount++,this.loadGame(()=>{e&&e()})}static get allowScene(){if(Laya.Browser.onWeiXin&&this.jsonConfig.sceneList){let e=Laya.Browser.window.wx.getLaunchOptionsSync().scene.toString();return-1!=this.jsonConfig.sceneList.split(",").indexOf(e)}return!0}static getConfig(e){window.wxsdk.init({version:y.version,appid:y.appid,secret:y.secret,share:{title:"你能过得了这一关吗？",image:"https://game-oss.smallshark.cn/game/20211119/1216327431258.jpg?imageslim"}}),window.wxsdk.onInit(()=>{console.log("wxsdk初始化成功:",window.wxsdk);let t=new m;for(let e in t)t[e]=window.wxsdk.conf[e];this.jsonConfig=window.wxsdk.conf,console.log("config:",this.jsonConfig),this.jsonConfig.channel_ditch&&!window.wxsdk.user.channel&&(this.jsonConfig.allowMistouch=!1,console.log("config1:",this.jsonConfig)),c.bannerIdArr=window.wxsdk.conf.bannerIds?window.wxsdk.conf.bannerIds.split(","):[],c.videoId=window.wxsdk.conf.videoIds?window.wxsdk.conf.videoIds.split(","):[],c.fullGridId=window.wxsdk.conf.fullGridIds?window.wxsdk.conf.fullGridIds.split(","):[],c.bottomGridId=window.wxsdk.conf.bottomGridIds?window.wxsdk.conf.bottomGridIds.split(","):[],c.sideGridId=window.wxsdk.conf.sideGridIds?window.wxsdk.conf.sideGridIds.split(","):[],c.singleGridId=window.wxsdk.conf.singleGridIds?window.wxsdk.conf.singleGridIds.split(","):[],c.interstitialId=window.wxsdk.conf.interstitialIds?window.wxsdk.conf.interstitialIds.split(","):[],c.inidAd(()=>{e&&e()})}),window.wxsdk.login()}static get isVersionValid(){return!!Laya.Browser.onWeiXin&&this.version.split(".")[2]<=this.jsonConfig.version.split(".")[2]}static get canTrapAll(){return!!Laya.Browser.onWeiXin&&(this.allowScene&&this.jsonConfig.allowMistouch&&this.version.split(".")[2]<=this.jsonConfig.version.split(".")[2])}static get showRemen(){return!!Laya.Browser.onWeiXin&&this.jsonConfig.showRemen}static get startRemen(){return!!Laya.Browser.onWeiXin&&this.jsonConfig.startRemen}static get showVitualWx(){return!!Laya.Browser.onWeiXin&&(this.canTrapAll&&this.jsonConfig.showVitualWx)}static get remenBanner(){return!!Laya.Browser.onWeiXin&&(this.canTrapAll&&this.jsonConfig.remenBanner)}static get endRemen(){return!!Laya.Browser.onWeiXin&&this.jsonConfig.endRemen}static get endRemen_switch(){return!!Laya.Browser.onWeiXin&&(this.canTrapAll&&this.jsonConfig.endRemen_switch)}static get firstBox(){if(!Laya.Browser.onWeiXin)return!1;let e=!1;return e=this.jsonConfig.firstBox_interval_level<=0?this.gameCount>=this.jsonConfig.firstBox_level:this.gameCount>=this.jsonConfig.firstBox_level&&0==Math.floor((this.gameCount-this.jsonConfig.firstBox_level)%(this.jsonConfig.firstBox_interval_level+1)),this.canTrapAll&&this.jsonConfig.firstBox&&e}static get firstBox_switch(){return!!Laya.Browser.onWeiXin&&(this.canTrapAll&&this.jsonConfig.firstBox_switch)}static get bannerBox(){if(!Laya.Browser.onWeiXin)return!1;let e=!1;return e=this.jsonConfig.bannerBox_interval_level<=0?this.gameCount>=this.jsonConfig.bannerBox_level:this.gameCount>=this.jsonConfig.bannerBox_level&&0==Math.floor((this.gameCount-this.jsonConfig.bannerBox_level)%(this.jsonConfig.bannerBox_interval_level+1)),this.canTrapAll&&this.jsonConfig.bannerBox&&e}static get bannerBox_switch(){return!!Laya.Browser.onWeiXin&&(this.canTrapAll&&this.jsonConfig.bannerBox_switch)}static get endBanner(){return!!Laya.Browser.onWeiXin&&(this.canTrapAll&&this.jsonConfig.endBanner)}static get endBanner_switch(){return!!Laya.Browser.onWeiXin&&(this.canTrapAll&&this.jsonConfig.endBanner_switch)}static get homeViedo(){return!!Laya.Browser.onWeiXin&&(this.canTrapAll&&this.jsonConfig.homeViedo)}}y.version="1.0.7",y.appid="",y.secret="",y.wuchuProgressValue=0,y.wuchuProgressStepAdd=.2,y.wuchuProgressFrameSub=.01,y.gameCount=1,y.showVirtualCount=0;class m{}!function(e){e.Remen="FDScene/Remen.scene",e.Box1="FDScene/Box1.scene",e.VideoBanner="FDScene/VideoBanner.scene",e.HomeUI="FDScene/HomeUI.scene"}(o||(o={})),function(e){e[e.Box_Banner=0]="Box_Banner",e[e.Box_VideoBanner=1]="Box_VideoBanner"}(h||(h={}));class w extends Laya.Script{constructor(){super(),this.myOwner=null,this.isDied=!1,this.curAniName=""}onAwake(){this.myOwner=this.owner,this._ani=this.myOwner.getComponent(Laya.Animator),this.init()}init(){}playAni(e,t=1,i=0){this._ani.crossFade(e,.2,0,i),this._ani.speed=t,this.curAniName=e}hitCB(){}dieCB(){}onUpdate(){}}class u extends Laya.Script{constructor(){super(),this.myOwner=null,this.type=1,this.num=""}onAwake(){this.myOwner=this.owner}init(e,t){this.type=e,this.num=t;let i=this.myOwner.getChildByName("Hurdle_Word_1"),a=this.myOwner.getChildByName("Hurdle_Num_1"),s=this.myOwner.getChildByName("Hurdle_Num_2"),n=this.myOwner.getChildByName("Hurdle_Num_3"),r=this.myOwner.getChildByName("Hurdle_Gate_1"),o="+"==t.substring(0,1)||"*"==t.substring(0,1);i.meshRenderer.material.tilingOffset=new Laya.Vector4(1,1,o?0:.5,1==e?0:.8);let h=0,l=0;switch(t.substring(0,1)){case"+":h=.5,l=.5;break;case"-":h=.75,l=.5;break;case"*":h=0,l=.25;break;case"/":h=.25,l=.25}a.meshRenderer.material.tilingOffset=new Laya.Vector4(1,1,h,l);let d=parseInt(t.substring(1,2));if(s.meshRenderer.material.tilingOffset=new Laya.Vector4(1,1,.25*Math.floor(d%4),-.25*Math.floor(d/4)),"."==t.substring(2))n.meshRenderer.material.tilingOffset=new Laya.Vector4(1,1,.75,.25),a.transform.translate(new Laya.Vector3(-.5,0,0),!1),s.transform.translate(new Laya.Vector3(-.5,0,0),!1);else{let e=parseInt(t.substring(2));n.meshRenderer.material.tilingOffset=new Laya.Vector4(1,1,.25*Math.floor(e%4),-.25*Math.floor(e/4))}o||(r.meshRenderer.material=r.meshRenderer.materials[1])}onUpdate(){let e=this.myOwner.transform.position.clone(),t=b.Share._player.transform.position.clone();if(Math.abs(e.x-t.x)<=1.5&&Math.abs(e.z-t.z)<=.1){i.DoVibrate();let t=e.clone();t.z+=.5,l.createBoom1(t),"."==this.num.substring(2)&&this.num.replace(".",""),1==this.type?("+"!=this.num.substring(0,1)&&"*"!=this.num.substring(0,1)||a.instance.playSoundEffect("green"),"-"!=this.num.substring(0,1)&&"/"!=this.num.substring(0,1)||a.instance.playSoundEffect("red"),b.Share._playerCrl.changeV(this.num.substring(0,1),parseInt(this.num.substring(1)))):("+"!=this.num.substring(0,1)&&"*"!=this.num.substring(0,1)||a.instance.playSoundEffect("green"),"-"!=this.num.substring(0,1)&&"/"!=this.num.substring(0,1)||a.instance.playSoundEffect("red"),b.Share._playerCrl.changeH(this.num.substring(0,1),parseInt(this.num.substring(1)))),this.myOwner.destroy()}}}class p extends Laya.Script{constructor(){super(),this.myOwner=null,this.isDied=!1}onAwake(){this.myOwner=this.owner}onUpdate(){this.isDied||s.getWorldDis(this.myOwner,b.Share._player)<=1&&(i.DoVibrate(),a.instance.playSoundEffect("spring"),b.Share._playerCrl.jump(),this.isDied=!0)}}class f extends Laya.Script{constructor(){super(),this.myOwner=null,this.isDied=!1}onAwake(){this.myOwner=this.owner}onUpdate(){if(!this.isDied){if(s.getWorldDis(this.myOwner,b.Share._player)<=1)return i.DoVibrate(),a.instance.playSoundEffect("diamond"),l.createPurple(this.myOwner.transform.position.clone()),t.changeCoin(5),this.isDied=!0,void this.myOwner.destroy();let e=this.myOwner.transform.position.clone(),n=b.Share._player.transform.position.clone();e.y<b.Share._playerCrl.Dummy001.transform.position.y+.5&&(e.y=0,n.y=0,Laya.Vector3.distance(n,e)<=1&&(i.DoVibrate(),a.instance.playSoundEffect("diamond"),l.createPurple(this.myOwner.transform.position.clone()),this.isDied=!0,this.myOwner.destroy(),t.changeCoin(5)))}}}class L extends Laya.Script{constructor(){super(),this.myOwner=null,this.isDied=!1}onAwake(){this.myOwner=this.owner}onUpdate(){if(this.isDied||b.Share.isGameOver){let e=this.myOwner.transform.position.clone();(e.x>3.5||e.x<-3.5)&&this.myOwner.transform.position.y>-5&&this.myOwner.transform.translate(new Laya.Vector3(0,-.2,0),!1)}else{let e=this.myOwner.transform.position.clone(),t=b.Share._player.transform.position.clone();if(Math.abs(e.x-t.x)<=1&&Math.abs(e.z-t.z)<=.2){a.instance.playSoundEffect("hurt"),i.DoVibrate(),l.createPurple(this.myOwner.transform.position.clone());let t=Math.random()>=.5?2*Math.random()+3.5:-(2*Math.random()+3.5);e.x=t,e.z+=10*Math.random()+10,s.TmoveTo(this.myOwner,1500,e,null);let n=new Laya.Vector3;n.x=720*Math.random()+360,n.y=720*Math.random()+360,n.z=720*Math.random()+360,s.RotateTo(this.myOwner,1500,n,null),this.isDied=!0,b.Share.isFinish?b.Share._playerCrl.decHV():b.Share._playerCrl.decHV(1)}}}}class g extends Laya.Script{constructor(){super(),this.myOwner=null,this.isDied=!1}onAwake(){this.myOwner=this.owner}onUpdate(){if(!this.isDied){let e=this.myOwner.transform.position.clone(),t=b.Share._player.transform.position.clone();Math.abs(e.z-t.z)<=.1&&b.Share._playerCrl.scaleV>1.7&&!b.Share._playerCrl.isJumping&&(l.createPurple(new Laya.Vector3(t.x,2,t.z)),this.isDied=!0,i.DoVibrate(),a.instance.playSoundEffect("hurt"),b.Share._playerCrl.decHV(1))}}}class B extends Laya.Script{constructor(){super(),this.myOwner=null,this.isLeft=!0}onAwake(){this.myOwner=this.owner}onUpdate(){this.isLeft?(this.myOwner.transform.translate(new Laya.Vector3(.03,0,0),!1),this.myOwner.transform.position.x>1.5&&(this.isLeft=!1)):(this.myOwner.transform.translate(new Laya.Vector3(-.03,0,0),!1),this.myOwner.transform.position.x<-1.5&&(this.isLeft=!0))}}class S extends Laya.Script{constructor(){super(),this.myOwner=null,this.isDied=!1}onAwake(){this.myOwner=this.owner}onUpdate(){let e=this.myOwner.transform.position.x;if(this.myOwner.transform.rotate(new Laya.Vector3(0,e>0?1:-1,0),!1,!1),!this.isDied&&b.Share._playerCrl.scaleV>1.7)for(let e=0;e<this.myOwner.numChildren;e++){let t=this.myOwner.getChildAt(e).transform.position.clone(),s=b.Share._player.transform.position.clone();t.y=0,s.y=0,Laya.Vector3.distance(s,t)<=.5&&(i.DoVibrate(),l.createPurple(t.clone()),a.instance.playSoundEffect("hurt"),this.isDied=!0,b.Share._playerCrl.decHV(1))}}}class A extends Laya.Script{constructor(){super(),this.myOwner=null,this.isDied=!1,this.curAniName=""}onAwake(){this.myOwner=this.owner,this._ani=this.myOwner.getComponent(Laya.Animator),this.playAni("idle")}playAni(e,t=1,i=0){e!=this.curAniName&&(this._ani.crossFade(e,.2,0,i),this._ani.speed=t,this.curAniName=e)}hitCB(){b.Share._player.transform.position.clone();let e=this.myOwner.transform.position.clone();e.z+=15,s.TmoveTo(this.myOwner,800,e,null,Laya.Ease.linearIn)}onUpdate(){let e=b.Share._player.transform.position.clone(),t=this.myOwner.transform.position.clone();if(!this.isDied&&!b.Share.isGameOver&&!b.Share.isFinish&&Laya.Vector3.distance(e,t)<=1)return this.playAni("die"),b.Share._playerCrl.decHV(1),a.instance.playSoundEffect("hit"),i.DoVibrate(),this.isDied=!0,void this.hitCB();if(Math.abs(t.z-e.z)<=7&&!this.isDied){this.playAni("walk"),this.myOwner.transform.lookAt(e,new Laya.Vector3(0,1,0));let i=this.myOwner.transform.localRotationEuler.clone();i.y+=180,this.myOwner.transform.localRotationEuler=i;let a=new Laya.Vector3;Laya.Vector3.subtract(e,t,a),Laya.Vector3.normalize(a,a),Laya.Vector3.scale(a,.05,a),this.myOwner.transform.translate(a,!1)}}}class _ extends Laya.Script{constructor(){super(),this.myOwner=null,this.type=1,this.isDied=!1}onAwake(){this.myOwner=this.owner}init(e){this.type=e}onUpdate(){if(this.myOwner.transform.rotate(new Laya.Vector3(0,1,0),!1,!1),!this.isDied&&s.getWorldDis(this.myOwner,b.Share._player)<=1.5){switch(i.DoVibrate(),this.type){case 1:a.instance.playSoundEffect("green"),b.Share._playerCrl.changeV("+",10),l.createGreen(this.myOwner.transform.position.clone());break;case 2:a.instance.playSoundEffect("red"),b.Share._playerCrl.changeV("-",10),l.createOrange(this.myOwner.transform.position.clone());break;case 3:a.instance.playSoundEffect("green"),b.Share._playerCrl.changeH("+",10),l.createGreen(this.myOwner.transform.position.clone());break;case 4:a.instance.playSoundEffect("red"),l.createPurple(this.myOwner.transform.position.clone()),b.Share._playerCrl.changeH("-",10)}return this.isDied=!0,void this.myOwner.destroy()}}}class C extends Laya.Script{constructor(){super(),this.myOwner=null,this.isDied=!1}onAwake(){this.myOwner=this.owner}onUpdate(){if(!this.isDied){let e=this.myOwner.transform.position.clone(),t=b.Share._player.transform.position.clone();if(e.z<t.z){this.isDied=!0;let e=this.myOwner.meshRenderer.material;e.albedoColor=new Laya.Vector4(1,1,1,1),e.albedoIntensity=4}}}}class b{constructor(){this.camStartPos=new Laya.Vector3(0,0,0),this.camStartRotation=null,this._cameraCrl=null,this.startCamField=70,this.isStartGame=!1,this.isGameOver=!1,this.isWin=!1,this.isPause=!1,this.isFinish=!1,this._levelNode=null,this._player=null,this._boss=null,this._playerCrl=null,this._bossCrl=null,this._roadFinish=null,this._roadFinish2=null,Laya.Browser.onWeiXin||localStorage.clear(),b.Share=this,t.getPlayerData(),Laya.Browser.onWeiXin&&(Laya.Browser.window.wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),Laya.Browser.window.wx.onShareAppMessage(()=>({title:"高个子快冲",imageUrl:""}))),Laya.Scene.open("MyScenes/LoadingUI.scene")}initScene(){Laya.Scene3D.load(i.UnityPath+"SampleScene.ls",Laya.Handler.create(this,this.onLoadScene))}onLoadScene(e){Laya.Scene.open("MyScenes/StartUI.scene"),this._scene=Laya.stage.addChild(e),Laya.stage.setChildIndex(this._scene,0),this._camera=this._scene.getChildByName("Main Camera"),this._light=this._scene.getChildByName("Directional Light"),this._light.shadowMode=Laya.ShadowMode.SoftHigh,this._light.shadowDistance=25,this._light.shadowResolution=1024,this._light.shadowCascadesMode=Laya.ShadowCascadesMode.NoCascades,this._light.shadowNormalBias=0,this._camera.farPlane=50,this.camStartPos=this._camera.transform.position.clone(),this.camStartRotation=this._camera.transform.rotation.clone(),this._camera.fieldOfView=this.startCamField,this._cameraCrl=this._camera.addComponent(n),this._levelNode=this._scene.addChild(new Laya.Sprite3D),this.createLevel()}gameStart(){this.isStartGame=!0,this._playerCrl.startRun()}getItemByName(e){return Laya.loader.getRes(i.UnityPath+"ItemNode.lh").getChildByName(e)}createPlayer(){this._player=Laya.Sprite3D.instantiate(this.getItemByName("Hero"),this._levelNode,!1),this._player.transform.position=new Laya.Vector3(0,0,0),this._playerCrl=this._player.addComponent(d)}createLevel(){this.createPlayer();let e=t.getPlayerData().grade;e=Math.floor((e-1)%5);let i=t.levelDataArr[e];for(let e=0;e<i.length;e++){let t=i[e],a=t.name,s=new Laya.Vector3(Number(t.position.x),Number(t.position.y),Number(t.position.z)),n=new Laya.Vector3(Number(t.rotation.x),Number(t.rotation.y),Number(t.rotation.z)),r=new Laya.Vector3(Number(t.scale.x),Number(t.scale.y),Number(t.scale.z));this.createItem(a,s,n,r)}}createItem(e,t,i,a){let s=e;-1!=e.search("Hurdle")?s="Hurdle":-1!=e.search("Jump1")?s="Jump1":-1!=e.search("Jump2")?s="Jump2":-1!=e.search("Boss")&&(s="Boss");let n=Laya.Sprite3D.instantiate(this.getItemByName(s),this._levelNode,!1,new Laya.Vector3);if(n.transform.position=t,n.transform.rotationEuler=i,n.transform.setWorldLossyScale(a),-1!=e.search("Hurdle")){n.addComponent(u).init(parseInt(e.substring(0,1)),e.substring(1,4)),-1!=e.search("Move")&&n.addComponent(B)}else if(-1!=e.search("Jump1"))n.addComponent(p);else if(-1!=e.search("Diamond"))n.addComponent(f);else if(-1!=e.search("Obstacle_1"))n.addComponent(L);else if(-1!=e.search("Obstacle_2"))n.addComponent(g);else if(-1!=e.search("Obstacle_3"))n.addComponent(S);else if(-1!=e.search("Finish_1"))this._roadFinish=n;else if(-1!=e.search("Finish_2")){this._roadFinish2=n;for(let e=3;e<n.numChildren;e++){n.getChildAt(e).getChildAt(2).addComponent(L),n.getChildAt(e).getChildAt(0).addComponent(C)}this.createDiamond()}else if(-1!=e.search("Boss")&&e.search("Enemy")<0)this._boss=n,this._bossCrl=this._boss.addComponent(w);else if(-1!=e.search("Enemy"))n.addComponent(A);else if(-1!=e.search("Arrow_Up")){n.addComponent(_).init(1)}else if(-1!=e.search("Arrow_Down")){n.addComponent(_).init(2)}else if(-1!=e.search("Arrow_Outside")){n.addComponent(_).init(3)}else if(-1!=e.search("Arrow_Entad")){n.addComponent(_).init(4)}}createDiamond(){for(let e=0;e<20;e++)for(let t=0;t<3;t++){let i=Laya.Sprite3D.instantiate(this.getItemByName("Diamond"),this._levelNode,!1,new Laya.Vector3),a=this._roadFinish2.getChildAt(e+3).transform.position.clone();a.y=2+t,a.z+=1,i.transform.position=a,i.addComponent(f)}}finish(){this.isFinish=!0}gameOver(e){Laya.timer.clearAll(this),i.DoVibrate(!1),this.isWin=e,this.isGameOver=!0,this.isStartGame=!1,Laya.Scene.close("MyScenes/GameUI.scene"),Laya.timer.once(2e3,this,()=>{y.showGameOver(()=>{Laya.Scene.open("MyScenes/FinishUI.scene")})})}restartGame(){this.isStartGame=!1,this.isGameOver=!1,this.isWin=!1,this.isPause=!1,this._camera.fieldOfView=this.startCamField,this.isFinish=!1,this._camera.transform.position=this.camStartPos,this._camera.transform.rotation=this.camStartRotation,this._levelNode.destroyChildren(),this.createLevel()}}class x extends Laya.Scene{constructor(){super(...arguments),this.progressValue=0,this.clickCount=1,this.hadShowBanner=!1,this.onShowCB=null,this.type=h.Box_Banner}onAwake(){this.size(Laya.stage.width,Laya.stage.height)}onOpened(e){e&&e.ccb&&(this.ccb=e.ccb),e&&e.type&&(this.type=e.type),c.hideBannerAd(),this.btnPress.on(Laya.Event.CLICK,this,this.onPress),Laya.timer.frameLoop(1,this,this.reFreshUI),this.onShowCB=(()=>{this.close()}),Laya.Browser.onWeiXin&&Laya.Browser.window.wx.onShow(this.onShowCB)}onClosed(){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.offShow(this.onShowCB),c.hideBannerAd(),Laya.timer.clearAll(this),y.visibleVideoBanner(!1,!1),Laya.timer.once(100,this,()=>{this.ccb&&this.ccb()})}onPress(){this.progressValue+=y.wuchuProgressStepAdd,Laya.Tween.to(this.btnPress,{scaleX:1.2,scaleY:1.2},100,null,Laya.Handler.create(this,()=>{Laya.Tween.to(this.btnPress,{scaleX:1,scaleY:1},100,null)})),this.progressValue>=y.wuchuProgressValue&&!this.hadShowBanner&&(this.hadShowBanner=!0,this.clickCount++,this.type==h.Box_Banner?c.showBannerAd():y.visibleVideoBanner(!0,!1),y.randTouchProgress(),Laya.timer.once(1e3,this,()=>{this.clickCount>=y.jsonConfig.bannerBox_count?this.close():(this.type==h.Box_Banner?c.hideBannerAd():y.visibleVideoBanner(!1,!1),this.hadShowBanner=!1,this.pressBar.value=0,this.progressValue=0)})),Laya.Tween.to(this.imgSushi,{rotation:30},100,null,Laya.Handler.create(this,()=>{Laya.Tween.to(this.imgSushi,{rotation:0},100)})),this.pressBar.value=this.progressValue}reFreshUI(){this.progressValue>y.wuchuProgressFrameSub&&(this.progressValue-=y.wuchuProgressFrameSub),this.pressBar.value=this.progressValue,this.light.rotation+=1}}class v extends Laya.Scene{constructor(){super()}onOpened(e){this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),this.remenBtn.on(Laya.Event.CLICK,this,this.remenCB),this.videoBtn.on(Laya.Event.CLICK,this,this.videoCB),this.videoBtn.active=y.homeViedo}onClosed(){}remenCB(){c.hideBannerAd(),c.visibleSideGridAd(!1),y.showHomeUIReMen(()=>{c.showBannerAd(),c.visibleSideGridAd(!0)})}videoCB(){c.showVideoAd(()=>{Laya.Browser.window.wx.showToast({title:"恭喜获得1000金币！",duration:2e3,mask:!1,icon:"none"})},null)}}class I extends Laya.Scene{constructor(){super(),this.ccb=null,this.onShowCB=null,this.clickCount=0}onAwake(){this.size(Laya.stage.displayWidth,Laya.stage.displayHeight)}onOpened(e){e&&e.ccb&&(this.ccb=e.ccb),this.btnContinue.on(Laya.Event.CLICK,this,this.btnContinueCB),this.adPic.on(Laya.Event.CLICK,this,this.videoBtn),this.onShowCB=(()=>{this.close()}),Laya.Browser.onWeiXin&&Laya.Browser.window.wx.onShow(this.onShowCB),e&&e.showAdPic?this.adPic.visible=!0:(this.adPic.visible=!1,c.getIsFullGridAdError()?y.canTrapAll&&c.getIsFullGridAdError()&&(this.adPic.visible=!0):c.visibleFullGridAd()),this.adPic.visible=!1,y.remenBanner&&this.bannerShowHide(),c.bannerIndex=0}onClosed(){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.offShow(this.onShowCB),Laya.timer.clearAll(this),c.hideBannerAd(),c.visibleFullGridAd(!1),Laya.timer.once(100,this,()=>{this.ccb&&this.ccb()})}bannerShowHide(){c.hideBannerAd(),Laya.timer.once(600,this,()=>{c.showBannerAd(),Laya.timer.once(800,this,()=>{this.bannerShowHide()})})}videoBtn(){c.showVideoAd()}btnContinueCB(){this.clickCount++,this.clickCount>=y.jsonConfig.remenBanner_count&&this.close()}}class O extends Laya.Scene{constructor(){super()}onOpened(e){this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),this.banner1.on(Laya.Event.CLICK,this,this.adBtnCB),this.banner2.on(Laya.Event.CLICK,this,this.adBtnCB);let t=!1;e&&e.showFinger&&(t=t),this.finger.visible=t,this.banner1.visible=Math.random()>.5,this.banner2.visible=!this.banner1.visible}onClosed(){}adBtnCB(){c.showVideoAd(()=>{Laya.Browser.window.wx.showToast({title:"恭喜获得1000金币！",duration:2e3,mask:!1,icon:"none"})},null)}}class V extends Laya.Scene{constructor(){super(),this.freeSkin=[]}onOpened(){this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),s.addClickEvent(this.nextBtn,this,this.closeCB),s.addClickEvent(this.adBtn,this,this.adBtnCB),y.inFinish(this.nextBtn)}onClosed(){}adBtnCB(){c.showVideoAd(()=>{t.getPlayerData().coin+=800,t.setPlayerData(),this.closeCB()})}closeCB(){y.closeFinish(()=>{b.Share.isWin&&(t.getPlayerData().coin+=200,t.getPlayerData().grade++,t.setPlayerData()),b.Share.restartGame(),Laya.Scene.open("MyScenes/StartUI.scene")})}}class D extends Laya.Script{constructor(){super(),this.myOwner=null}onAwake(){this.myOwner=this.owner}onUpdate(){this.myOwner.value=t.getPlayerData().coin.toString()}}class G extends Laya.Scene{constructor(){super(),this.touchStartPosX=0}onOpened(){G.Share=this,this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),Laya.timer.frameLoop(1,this,this.myUpdate),this.gradeNum.value=t.getPlayerData().grade.toString(),this.touchBtn.on(Laya.Event.MOUSE_DOWN,this,this.touchStart),this.touchBtn.on(Laya.Event.MOUSE_MOVE,this,this.touchMove),this.touchBtn.on(Laya.Event.MOUSE_UP,this,this.touchEnd),y.inGame()}onClosed(){Laya.timer.clearAll(this)}touchStart(e){if(b.Share.isGameOver)return;if(b.Share.isFinish)return;b.Share.isStartGame||(this.guideAni.visible=!1,b.Share.gameStart());let t=e.stageX;b.Share._playerCrl.touchX=t}touchMove(e){if(b.Share.isGameOver)return;if(b.Share.isFinish)return;let t=e.stageX;b.Share._playerCrl.touchX=t}touchEnd(e){b.Share.isGameOver||b.Share.isFinish}myUpdate(){}}class N extends Laya.Script{constructor(){super(),this.myOwner=null}onAwake(){this.myOwner=this.owner}onUpdate(){this.myOwner.value=t.getPlayerData().grade.toString()}}class H extends Laya.Scene{constructor(){super(),this.maxGrade=5}onOpened(){this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),y.init(()=>{this.loadJsonData(1)}),Laya.timer.frameLoop(1,this,()=>{this.bar.value+=.01})}onClosed(){}loadJsonData(e){s.loadJson("res/configs/Level"+e+".json",i=>{if(t.levelDataArr.push(i),++e>this.maxGrade)return Laya.Browser.onWeiXin?this.loadSubpackage():this.loadRes(),void console.log("levelDataArr:",t.levelDataArr);this.loadJsonData(e)})}loadSubpackage(){Laya.Browser.window.wx.loadSubpackage({name:"unity",success:e=>{this.loadRes()},fail:e=>{this.loadSubpackage()}}).onProgressUpdate(e=>{console.log("下载进度",e.progress),console.log("已经下载的数据长度",e.totalBytesWritten),console.log("预期需要下载的数据总长度",e.totalBytesExpectedToWrite)})}loadRes(){var e=[i.UnityPath+"ItemNode.lh"];Laya.loader.create(e,Laya.Handler.create(this,this.onComplete),Laya.Handler.create(this,this.onProgress))}onComplete(){y.loadGame(()=>{a.instance.initLoading(()=>{b.Share.initScene()})})}onProgress(e){}}class k extends Laya.Script{constructor(){super(),this.startY=0}onAwake(){this.myOwner=this.owner,this.startY=this.myOwner.y,this.startTween()}startTween(){Laya.Tween.to(this.myOwner,{y:this.startY+50},1e3,Laya.Ease.sineInOut,new Laya.Handler(this,()=>{Laya.Tween.to(this.myOwner,{y:this.startY},1e3,Laya.Ease.sineInOut,new Laya.Handler(this,()=>{this.startTween()}))}))}}class T extends Laya.Scene{constructor(){super(),this.chooseId=0}onOpened(){this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),s.addClickEvent(this.closeBtn,this,this.closeBtnCB),this.chooseId=t.getPlayerData().skinId,this.initList(),Laya.timer.frameLoop(1,this,this.myUpdate)}onClosed(){Laya.timer.clearAll(this),b.Share._playerCrl.changeSkin(t.getPlayerData().skinId),b.Share._camera.transform.translate(new Laya.Vector3(0,3,0),!1)}initList(){this.myList.vScrollBarSkin="",this.myList.array=t.getPlayerData().skinArr,this.myList.repeatX=3,this.myList.repeatY=2,this.myList.renderHandler=Laya.Handler.create(this,this.onmyListRender,null,!1)}onmyListRender(e,i){if(i>=this.myList.array.length)return;var a=e.getChildByName("item");let n=a.getChildByName("bg"),r=a.getChildByName("select"),o=a.getChildByName("icon"),h=a.getChildByName("using"),l=a.getChildByName("unlocked"),d=a.getChildByName("buyBtn"),c=d.getChildByName("cost"),y=a.getChildByName("adBtn");r.visible=this.chooseId==i,o.skin="skinUI/Hero/Hero_"+(i+1)+".png",h.visible=t.getPlayerData().skinId==i,l.visible=t.getPlayerData().skinId!=i&&1==t.getPlayerData().skinArr[i],d.visible=0==t.getPlayerData().skinArr[i]&&t.getCostById(i)<t.getPlayerData().coin,c.value=t.getCostById(i).toString(),y.visible=0==t.getPlayerData().skinArr[i]&&!d.visible,n.off(Laya.Event.CLICK,this,this.chooseCB),n.on(Laya.Event.CLICK,this,this.chooseCB,[i]),s.addClickEvent(d,this,this.buyBtnCB,[i]),s.addClickEvent(y,this,this.adBtnCB,[i])}chooseCB(e){a.instance.playSoundEffect("Click.mp3"),this.chooseId!=e&&(this.chooseId=e,b.Share._playerCrl.changeSkin(e),1==t.getPlayerData().skinArr[e]&&(t.getPlayerData().skinId=e,t.setPlayerData()),this.myList.array=t.getPlayerData().skinArr)}buyBtnCB(e){let i=e[0];t.getPlayerData().coin<t.getCostById(i)||(this.chooseId=i,b.Share._playerCrl.changeSkin(i),t.getPlayerData().coin-=t.getCostById(i),t.getPlayerData().skinArr[i]=1,t.getPlayerData().skinId=i,t.setPlayerData(),this.myList.array=t.getPlayerData().skinArr)}adBtnCB(e){let i=e[0];c.showVideoAd(()=>{this.chooseId=i,b.Share._playerCrl.changeSkin(i),t.getPlayerData().skinArr[i]=1,t.getPlayerData().skinId=i,t.setPlayerData(),this.myList.array=t.getPlayerData().skinArr})}closeBtnCB(){Laya.Scene.open("MyScenes/StartUI.scene")}myUpdate(){this.coinNum.value=t.getPlayerData().coin.toString()}}class M extends Laya.Scene{constructor(){super()}onOpened(){a.instance.playMusic("bgm"),this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),s.addClickEvent(this.startBtn,this,this.startBtnCB),s.addClickEvent(this.skinBtn,this,this.skinBtnCB),y.inHomePage()}onClosed(){}startBtnCB(){y.startGame(()=>{Laya.Scene.open("MyScenes/GameUI.scene")})}skinBtnCB(){y.inShop(),b.Share._camera.transform.translate(new Laya.Vector3(0,-3,0),!1),Laya.Scene.open("MyScenes/SkinUI.scene")}}class E{constructor(){}static init(){var e=Laya.ClassUtils.regClass;e("FanDong/Box1.ts",x),e("FanDong/HomeUI.ts",v),e("FanDong/Remen.ts",I),e("FanDong/VideoBanner.ts",O),e("View/FinishUI.ts",V),e("Mod/UpdateCoin.ts",D),e("View/GameUI.ts",G),e("Mod/UpdateGrade.ts",N),e("View/LoadingUI.ts",H),e("Mod/UpDownLoop.ts",k),e("View/SkinUI.ts",T),e("View/StartUI.ts",M)}}E.width=750,E.height=1334,E.scaleMode="fixedwidth",E.screenMode="vertical",E.alignV="top",E.alignH="left",E.startScene="FDScene/Box1.scene",E.sceneRoot="",E.debug=!1,E.stat=!1,E.physicsDebug=!1,E.exportSceneToJson=!0,E.init();new class{constructor(){window.Laya3D?Laya3D.init(E.width,E.height):Laya.init(E.width,E.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=E.scaleMode,Laya.stage.screenMode=E.screenMode,Laya.stage.alignV=E.alignV,Laya.stage.alignH=E.alignH,Laya.URL.exportSceneToJson=E.exportSceneToJson,Laya.stage.useRetinalCanvas=!0,(E.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),E.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),E.stat&&Laya.Stat.show(),Laya.alertGlobalError(!0),Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){new b}}}();