{
  "code": "import JJWxBannerAd from \"./JJWxBannerAd\";\r\nimport JJMgr from \"./JJMgr\";\r\nexport default class JJWxAd {\r\n    static get Instance() {\r\n        if (!JJWxAd._instance) {\r\n            JJWxAd._instance = new JJWxAd;\r\n        }\r\n        return JJWxAd._instance;\r\n    }\r\n    set bannerLoadError(v) { }\r\n    get bannerLoadError() { return JJWxBannerAd.Instance.isLoadBannerError; }\r\n    init() {\r\n        if (Laya.Browser.onWeiXin) {\r\n            this.sysInfo = wx.getSystemInfoSync();\r\n            this.videoId = \"adunit-75afbbf93cc69fdc\";\r\n            this.interId = \"adunit-c2a286c3aa685ea8\";\r\n            this.gridId = \"adunit-7a373a1019a6070c\";\r\n            this.initAd();\r\n        }\r\n    }\r\n    initAd() {\r\n        if (Laya.Browser.onWeiXin) {\r\n            this.loadVideoAd();\r\n            this.createGameCustomAd();\r\n            this.createSingleCustomAd();\r\n        }\r\n    }\r\n    setBannerTop(top) {\r\n        JJWxBannerAd.Instance.setBannerTop(top);\r\n    }\r\n    showBanner() {\r\n        JJWxBannerAd.Instance.showBanner();\r\n    }\r\n    hideBanner() {\r\n        JJWxBannerAd.Instance.hideBanner();\r\n    }\r\n    loadVideoAd() {\r\n        if (Laya.Browser.onWeiXin) {\r\n            var self = this;\r\n            var videoAd = this.videoAd;\r\n            if (videoAd != null) {\r\n                videoAd.offLoad(onLoadVideo);\r\n                videoAd.offError(onErrorVideo);\r\n                videoAd.offClose(onCloseVideo);\r\n            }\r\n            var videoAd = Laya.Browser.window.wx.createRewardedVideoAd({ adUnitId: self.videoId });\r\n            videoAd.onLoad(onLoadVideo);\r\n            videoAd.onError(onErrorVideo);\r\n            videoAd.onClose(onCloseVideo);\r\n            this.videoAd = videoAd;\r\n        }\r\n        function onLoadVideo() {\r\n            console.log('video 加载成功');\r\n            self.existVideoAd = true;\r\n            if (self.isForceShowVideo) {\r\n                self.isForceShowVideo = false;\r\n                self.showVideoAd();\r\n            }\r\n        }\r\n        function onErrorVideo(err) {\r\n            console.error('video 加载错误', err);\r\n            self.existVideoAd = false;\r\n            if (self.closeVideoCB) {\r\n                self.closeVideoCB(false);\r\n                self.closeVideoCB = null;\r\n            }\r\n        }\r\n        function onCloseVideo(res) {\r\n            let isEnded = (res && res.isEnded || res === undefined) ? true : false;\r\n            if (isEnded) {\r\n            }\r\n            if (self.closeVideoCB) {\r\n                self.closeVideoCB(isEnded);\r\n                self.closeVideoCB = null;\r\n            }\r\n        }\r\n    }\r\n    showVideoAd(isForceShowVideo = false, closeVideoCB) {\r\n        if (!Laya.Browser.onWeiXin)\r\n            return;\r\n        this.closeVideoCB = closeVideoCB;\r\n        if (!this.existVideoAd) {\r\n            this.isForceShowVideo = isForceShowVideo;\r\n            this.videoAd.load();\r\n            return;\r\n        }\r\n        if (Laya.Browser.onWeiXin) {\r\n            var videoAd = this.videoAd;\r\n            videoAd.show().then(() => { }).catch(err => {\r\n                videoAd.load().then(() => videoAd.show());\r\n            });\r\n        }\r\n    }\r\n    createInterAd(isShow) {\r\n        if (Laya.Browser.onWeiXin) {\r\n            this.interAd = wx[\"createInterstitialAd\"]({ adUnitId: this.interId });\r\n            this.interAd.onLoad(() => {\r\n                console.log(\"插屏广告加载成功\");\r\n                if (isShow)\r\n                    this.showInterAd();\r\n            });\r\n        }\r\n    }\r\n    showInterAd() {\r\n        if (this.interAd) {\r\n            this.interAd.show();\r\n        }\r\n    }\r\n    createHomeCustomAd(isShow) {\r\n        if (Laya.Browser.onWeiXin) {\r\n            if (!this.homeGridAds) {\r\n                let gridAmount = JJMgr.instance.dataConfig.front_gezi_number * 2;\r\n                this.homeGridAds = [];\r\n                for (let i = 0; i < gridAmount; i++) {\r\n                    let style2 = this.getGridPos(i, 120 * (Math.floor(i / 2) + 1));\r\n                    let gridAd = wx[\"createCustomAd\"]({ adUnitId: this.gridId, adIntervals: 30, style: style2 });\r\n                    this.homeGridAds.push(gridAd);\r\n                    gridAd.onLoad(() => {\r\n                        if (isShow) {\r\n                            gridAd.show();\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            else if (isShow) {\r\n                this.showHomeGridAd();\r\n            }\r\n        }\r\n    }\r\n    createGameCustomAd() {\r\n        if (Laya.Browser.onWeiXin) {\r\n            this.gameGridAd = [];\r\n            for (let i = 0; i < 2; i++) {\r\n                let style2 = this.getGridPos(i, 240 * (Math.floor(i / 2) + 1));\r\n                let gridAd = wx[\"createCustomAd\"]({ adUnitId: this.gridId, adIntervals: 30, style: style2 });\r\n                this.gameGridAd.push(gridAd);\r\n                gridAd.onLoad(() => { });\r\n            }\r\n        }\r\n    }\r\n    createSingleCustomAd() {\r\n        if (Laya.Browser.onWeiXin) {\r\n            let style2 = this.getGridPos(1);\r\n            let gridAd = wx[\"createCustomAd\"]({ adUnitId: this.gridId, adIntervals: 30, style: style2 });\r\n            this.singleGridAd = gridAd;\r\n            gridAd.onLoad(() => { });\r\n        }\r\n    }\r\n    showHomeGridAd() {\r\n        if (!this.homeGridAds)\r\n            return;\r\n        for (let i = 0; i < this.homeGridAds.length; i++) {\r\n            this.homeGridAds[i].show();\r\n        }\r\n    }\r\n    hideHomeGridAd() {\r\n        if (!this.homeGridAds)\r\n            return;\r\n        for (let i = 0; i < this.homeGridAds.length; i++) {\r\n            this.homeGridAds[i].hide();\r\n        }\r\n    }\r\n    showGameGridAd() {\r\n        if (!this.gameGridAd)\r\n            return;\r\n        for (let i = 0; i < this.gameGridAd.length; i++) {\r\n            this.gameGridAd[i].show();\r\n        }\r\n    }\r\n    hideGameGridAd() {\r\n        if (!this.gameGridAd)\r\n            return;\r\n        for (let i = 0; i < this.gameGridAd.length; i++) {\r\n            this.gameGridAd[i].hide();\r\n        }\r\n    }\r\n    showSingleGridAd() {\r\n        if (!this.singleGridAd)\r\n            return;\r\n        this.singleGridAd.show();\r\n    }\r\n    hideSingleGridAd() {\r\n        if (!this.singleGridAd)\r\n            return;\r\n        this.singleGridAd.hide();\r\n    }\r\n    getGridPos(index, top = 120) {\r\n        let style = { width: 20, height: 20 };\r\n        if (index % 2 == 0) {\r\n            style.left = 20;\r\n            style.top = top;\r\n        }\r\n        else {\r\n            style.left = this.sysInfo.windowWidth - 90;\r\n            style.top = top;\r\n        }\r\n        return style;\r\n    }\r\n}\r\n//# sourceMappingURL=JJWxAd.js.map",
  "references": [
    "E:/LayaProjects/HighHeels2.10.0/src/JJExport/Common/JJWxBannerAd.ts",
    "E:/LayaProjects/HighHeels2.10.0/src/JJExport/Common/JJMgr.ts"
  ],
  "map": "{\"version\":3,\"file\":\"JJWxAd.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/JJExport/Common/JJWxAd.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
