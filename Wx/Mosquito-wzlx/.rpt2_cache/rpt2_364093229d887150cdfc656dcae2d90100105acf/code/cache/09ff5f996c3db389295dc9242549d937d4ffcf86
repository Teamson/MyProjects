{
  "code": "export default class WxApi {\r\n    static LoginWx(cb) {\r\n        if (!Laya.Browser.onWeiXin)\r\n            return;\r\n        let launchData = Laya.Browser.window.wx.getLaunchOptionsSync();\r\n        Laya.Browser.window.wx.login({\r\n            success(res) {\r\n                if (res.code) {\r\n                    console.log('res.code:', res.code);\r\n                    if (cb) {\r\n                        cb(res.code, launchData.query);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    static checkScope(btnNode) {\r\n        if (Laya.Browser.onWeiXin) {\r\n            Laya.Browser.window.wx.getSetting({\r\n                success: (response) => {\r\n                    if (!response.authSetting['scope.userInfo']) {\r\n                        console.log('没有授权');\r\n                        this.createScope(btnNode);\r\n                    }\r\n                    else {\r\n                        console.log('已经授权');\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    static createScope(btnNode) {\r\n        this.scopeBtn = Laya.Browser.window.wx.createUserInfoButton({\r\n            type: 'text',\r\n            text: '',\r\n            style: {\r\n                left: btnNode.x,\r\n                top: btnNode.y,\r\n                width: btnNode.width,\r\n                height: btnNode.height,\r\n                lineHeight: 40,\r\n                backgroundColor: '#ffffff',\r\n                color: '#ffffff',\r\n                textAlign: 'center',\r\n                fontSize: 16,\r\n                borderRadius: 0\r\n            }\r\n        });\r\n        this.scopeBtn.onTap((res) => {\r\n            if (res.errMsg == \"getUserInfo:ok\") {\r\n                this.scopeBtn.destroy();\r\n                this.scopeBtn = null;\r\n            }\r\n            else if (res.errMsg == 'getUserInfo:fail auth deny') {\r\n                this.scopeBtn.destroy();\r\n                this.scopeBtn = null;\r\n            }\r\n        });\r\n    }\r\n    static GetLaunchParam(fun) {\r\n        if (Laya.Browser.onWeiXin) {\r\n            this.OnShowFun = fun;\r\n            fun(this.GetLaunchPassVar());\r\n            Laya.Browser.window.wx.onShow((para) => {\r\n                if (this.OnShowFun != null) {\r\n                    this.OnShowFun(para);\r\n                }\r\n                console.log(\"wx on show\");\r\n            });\r\n        }\r\n    }\r\n    static GetLaunchPassVar() {\r\n        if (Laya.Browser.onWeiXin) {\r\n            return Laya.Browser.window.wx.getLaunchOptionsSync();\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    static WxOnHide(fun) {\r\n        if (Laya.Browser.onWeiXin) {\r\n            Laya.Browser.window.wx.onHide(fun);\r\n        }\r\n    }\r\n    static WxOffHide(fun) {\r\n        if (fun && Laya.Browser.onWeiXin) {\r\n            Laya.Browser.window.wx.offHide(fun);\r\n        }\r\n    }\r\n    static WxOnShow(fun) {\r\n        if (Laya.Browser.onWeiXin) {\r\n            Laya.Browser.window.wx.onShow(fun);\r\n        }\r\n    }\r\n    static WxOffShow(fun) {\r\n        if (fun && Laya.Browser.onWeiXin) {\r\n            Laya.Browser.window.wx.offShow(fun);\r\n        }\r\n    }\r\n    static httpRequest(url, params, type = 'get', completeHandler) {\r\n        var xhr = new Laya.HttpRequest();\r\n        xhr.http.timeout = 5000;\r\n        xhr.once(Laya.Event.COMPLETE, this, completeHandler);\r\n        xhr.once(Laya.Event.ERROR, this, this.httpRequest, [url, params, type, completeHandler]);\r\n        if (type == \"get\") {\r\n            xhr.send(url + '?' + params, \"\", type, \"text\");\r\n        }\r\n        else if (type == \"post\") {\r\n            xhr.send(url, JSON.stringify(params), type, \"text\");\r\n        }\r\n    }\r\n    static DoVibrate(isShort = true) {\r\n        if (Laya.Browser.onWeiXin && this.isVibrate) {\r\n            if (isShort) {\r\n                Laya.Browser.window.wx.vibrateShort();\r\n            }\r\n            else {\r\n                Laya.Browser.window.wx.vibrateLong();\r\n            }\r\n        }\r\n    }\r\n    static OpenAlert(msg, dur = 2000, icon = false) {\r\n        if (Laya.Browser.onWeiXin) {\r\n            Laya.Browser.window.wx.showToast({\r\n                title: msg,\r\n                duration: dur,\r\n                mask: false,\r\n                icon: icon ? 'success' : 'none',\r\n            });\r\n        }\r\n    }\r\n    static NavigateApp(appid, path, title, cancelCB, successCB) {\r\n        if (Laya.Browser.onWeiXin) {\r\n            let self = this;\r\n            Laya.Browser.window.wx.navigateToMiniProgram({\r\n                appId: appid,\r\n                path: path,\r\n                success(res) {\r\n                    console.log('打开成功');\r\n                    successCB();\r\n                },\r\n                fail(res) {\r\n                    console.log('打开失败');\r\n                    cancelCB();\r\n                }\r\n            });\r\n        }\r\n    }\r\n    static preViewImage(url) {\r\n        if (Laya.Browser.onWeiXin) {\r\n            Laya.Browser.window.wx.previewImage({\r\n                current: url,\r\n                urls: [url]\r\n            });\r\n        }\r\n    }\r\n}\r\nWxApi.UnityPath = 'LayaScene_SampleScene/Conventional/';\r\nWxApi.openId = '';\r\nWxApi.version = '1.0.5';\r\nWxApi.isVibrate = true;\r\nWxApi.isMusic = true;\r\nWxApi.OnShowFun = null;\r\nWxApi.scopeBtn = null;\r\nWxApi.shareCallback = null;\r\nWxApi.front_share_number = 0;\r\nWxApi.sceneId = 0;\r\nWxApi.gotOfflineBounes = false;\r\nWxApi.configData = null;\r\nWxApi.shareTime = 0;\r\nWxApi.firstShare = true;\r\nWxApi.hadShowFriendUI = false;\r\nWxApi.launchGameUI = false;\r\nWxApi.firstStartGame = false;\r\nWxApi.isKillBossUI = false;\r\nWxApi.fromKillBossUI = false;\r\nWxApi.killbossCallback = null;\r\nWxApi.gameNavCallback = null;\r\nWxApi.gameNavOnHide = false;\r\nWxApi.isStartUI = false;\r\nWxApi.isAuditor = false;\r\nWxApi.shieldAppid = false;\r\nWxApi.tempGrade = 1;\r\n//# sourceMappingURL=WxApi.js.map",
  "references": [],
  "map": "{\"version\":3,\"file\":\"WxApi.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/Libs/WxApi.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
