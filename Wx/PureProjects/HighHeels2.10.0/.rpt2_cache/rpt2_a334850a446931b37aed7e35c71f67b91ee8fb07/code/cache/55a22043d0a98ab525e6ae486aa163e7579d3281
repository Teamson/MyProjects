{
  "code": "export default class FdAd {\r\n    static inidAd() {\r\n        if (!Laya.Browser.onWeiXin)\r\n            return;\r\n        this.createMoreBanner();\r\n        this.createVideoAd();\r\n    }\r\n    static getSystemInfoSync() {\r\n        if (!Laya.Browser.onWeiXin)\r\n            return;\r\n        if (!this.sysInfo) {\r\n            this.sysInfo = wx.getSystemInfoSync();\r\n        }\r\n        return this.sysInfo;\r\n    }\r\n    static createMoreBanner() {\r\n        if (!Laya.Browser.onWeiXin)\r\n            return;\r\n        if (this.bannerAds.length > 0) {\r\n            for (let i = 0; i < this.bannerAds.length; i++) {\r\n                this.bannerAds[i].destroy();\r\n            }\r\n            this.bannerAds = [];\r\n        }\r\n        for (let i = 0; i < 3; i++) {\r\n            let bannerAd = this.createBannerAd();\r\n            this.bannerAds.push(bannerAd);\r\n        }\r\n    }\r\n    static showNextBanner(index) {\r\n        if (!Laya.Browser.onWeiXin)\r\n            return;\r\n        if (index) {\r\n            this.bannerIndex = index;\r\n        }\r\n        this.bannerAds[this.bannerIndex].show();\r\n    }\r\n    static hideNextBanner() {\r\n        if (!Laya.Browser.onWeiXin)\r\n            return;\r\n        this.bannerAds[this.bannerIndex].hide();\r\n        this.bannerIndex++;\r\n        if (this.bannerIndex >= this.bannerAds.length) {\r\n            this.bannerIndex = 0;\r\n        }\r\n    }\r\n    static createBannerAd(isShow = false) {\r\n        if (!Laya.Browser.onWeiXin)\r\n            return;\r\n        let sysInfo = this.getSystemInfoSync();\r\n        let bannerAd = Laya.Browser.window.wx.createBannerAd({\r\n            adUnitId: this.bannerId,\r\n            style: {\r\n                top: sysInfo.screenHeight * 0.8,\r\n                width: 300,\r\n                left: sysInfo.screenWidth / 2 - 150\r\n            },\r\n            adIntervals: 30\r\n        });\r\n        bannerAd.onLoad(() => {\r\n            if (isShow) {\r\n                FdAd.showBannerAd();\r\n            }\r\n            console.log(\"Banner广告加载成功\");\r\n        });\r\n        bannerAd.onError(err => {\r\n            this.bannerAd = null;\r\n            console.error(\"Banner广告加载失败\", JSON.stringify(err));\r\n        });\r\n        bannerAd.onResize(res => {\r\n            let realHeight = bannerAd.style.realHeight + 0.1;\r\n            bannerAd.style.top = sysInfo.screenHeight - realHeight;\r\n        });\r\n        this.bannerAd = bannerAd;\r\n        return bannerAd;\r\n    }\r\n    static showBannerAd() {\r\n        if (!Laya.Browser.onWeiXin)\r\n            return;\r\n        if (!this.bannerAd) {\r\n            this.createBannerAd(true);\r\n            return;\r\n        }\r\n        this.bannerAd.show().then(() => {\r\n        }).catch((err) => {\r\n            this.createBannerAd(true);\r\n        });\r\n    }\r\n    static hideBannerAd() {\r\n        if (!this.bannerAd)\r\n            return;\r\n        this.bannerAd.hide();\r\n    }\r\n    static destroyBannerAd() {\r\n        if (!this.bannerAd)\r\n            return;\r\n        this.bannerAd.destroy();\r\n        this.bannerAd = null;\r\n    }\r\n    static createVideoAd() {\r\n        if (!Laya.Browser.onWeiXin)\r\n            return;\r\n        if (this.isCreatingVideoAd)\r\n            return;\r\n        this.isCreatingVideoAd = true;\r\n        var videoAd = Laya.Browser.window.wx.createRewardedVideoAd({\r\n            adUnitId: this.videoId\r\n        });\r\n        videoAd.onLoad(res => {\r\n            this.isCreatingVideoAd = false;\r\n            this.videoAd = videoAd;\r\n            console.log(\"激励视频广告加载成功\");\r\n            if (this.isCreateAndShow) {\r\n                videoAd.show();\r\n                this.isCreateAndShow = false;\r\n            }\r\n        });\r\n        videoAd.onError(err => {\r\n            this.isCreatingVideoAd = false;\r\n            this.videoAd = null;\r\n            console.error(\"激励视频广告加载失败\", JSON.stringify(err));\r\n            if (this.videoCancelCallback) {\r\n                this.videoCancelCallback();\r\n                this.videoCancelCallback = null;\r\n                this.videoFinishCallback = null;\r\n            }\r\n        });\r\n        videoAd.onClose((res) => {\r\n            if (res) {\r\n                if (res.isEnded) {\r\n                    this.videoFinishCallback && this.videoFinishCallback();\r\n                }\r\n                this.videoCancelCallback && this.videoCancelCallback();\r\n                this.videoFinishCallback = null;\r\n                this.videoCancelCallback = null;\r\n            }\r\n        });\r\n    }\r\n    static showVideoAd(finishCB, cancelCB) {\r\n        if (!Laya.Browser.onWeiXin) {\r\n            finishCB && finishCB();\r\n            cancelCB && cancelCB();\r\n            return;\r\n        }\r\n        this.videoFinishCallback = finishCB;\r\n        this.videoCancelCallback = cancelCB;\r\n        if (!this.videoAd) {\r\n            this.isCreateAndShow = true;\r\n            this.createVideoAd();\r\n            return;\r\n        }\r\n        this.videoAd.show();\r\n    }\r\n    static destroyVideoAd() {\r\n        if (!this.videoAd)\r\n            return;\r\n        this.videoAd.destroy();\r\n        this.videoAd = null;\r\n    }\r\n    static initGridAD(cb, left = 0, top = 0) {\r\n        if (!Laya.Browser.onWeiXin) {\r\n            cb && cb(false);\r\n            return;\r\n        }\r\n        this.CreateGridAD(this.gridId, left, top);\r\n        if (cb) {\r\n            this.initGridCB = cb;\r\n        }\r\n    }\r\n    static CreateGridAD(id, posx, posy) {\r\n        try {\r\n            if (Laya.Browser.window.wx.createCustomAd) {\r\n                var grid = Laya.Browser.window.wx.createCustomAd({\r\n                    adUnitId: id,\r\n                    adIntervals: 31,\r\n                    style: {\r\n                        left: posx,\r\n                        top: posy,\r\n                        width: Laya.Browser.clientWidth / 2.2\r\n                    }\r\n                });\r\n                grid.onLoad(load => {\r\n                    FdAd.gridAd = grid;\r\n                    grid.show();\r\n                    if (FdAd.initGridCB) {\r\n                        FdAd.initGridCB(true);\r\n                        FdAd.initGridCB = null;\r\n                    }\r\n                });\r\n                grid.onError(err => {\r\n                    console.error(err);\r\n                    if (FdAd.initGridCB) {\r\n                        FdAd.initGridCB(false);\r\n                        FdAd.initGridCB = null;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (err) {\r\n            console.log(\"原生格子报错\" + err);\r\n            if (FdAd.initGridCB) {\r\n                FdAd.initGridCB(false);\r\n                FdAd.initGridCB = null;\r\n            }\r\n        }\r\n    }\r\n    static showGridAD() {\r\n        if (this.gridAd) {\r\n            this.gridAd.show();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    static hideGridAD() {\r\n        if (this.gridAd) {\r\n            this.gridAd.hide();\r\n        }\r\n        Laya.timer.once(500, this, () => {\r\n            if (this.gridAd) {\r\n                this.gridAd.hide();\r\n            }\r\n        });\r\n    }\r\n}\r\nFdAd.bannerId = \"adunit-ae416b4dd56b3441\";\r\nFdAd.videoId = \"adunit-586667b484b94e80\";\r\nFdAd.gridId = \"adunit-02b4087a4e313f0e\";\r\nFdAd.bannerAds = [];\r\nFdAd.bannerIndex = 0;\r\nFdAd.isCreatingVideoAd = false;\r\nFdAd.isCreateAndShow = false;\r\n//# sourceMappingURL=FdAd.js.map",
  "references": [],
  "map": "{\"version\":3,\"file\":\"FdAd.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/FanDong/FdAd.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
