{
  "code": "import PlayerDataMgr from \"../Libs/PlayerDataMgr\";\r\nimport WxApi from \"../Libs/WxApi\";\r\nimport SoundMgr from \"../Mod/SoundMgr\";\r\nimport GameLogic from \"./GameLogic\";\r\nexport default class PlayerBall extends Laya.Script {\r\n    constructor() {\r\n        super();\r\n        this.myOwner = null;\r\n        this.ball = null;\r\n        this.body = null;\r\n        this.myColorId = 0;\r\n        this.biggerFX = null;\r\n        this.smallFX = null;\r\n        this.kickFX = null;\r\n        this.playWinSound = false;\r\n    }\r\n    onEnable() {\r\n        this.myOwner = this.owner;\r\n        this.ball = this.myOwner.getChildAt(0);\r\n        this.body = this.ball.getComponent(Laya.Rigidbody3D);\r\n        this.body.enabled = false;\r\n        this.biggerFX = this.myOwner.getChildByName('BiggerFX');\r\n        this.smallFX = this.myOwner.getChildByName('SmallFX');\r\n        this.kickFX = this.myOwner.getChildByName('KickFX');\r\n    }\r\n    onDisable() {\r\n    }\r\n    setMyColor(id) {\r\n        this.myColorId = id;\r\n        let c = PlayerDataMgr.getFruitColor(id);\r\n        let ms = this.ball;\r\n        var material = new Laya.BlinnPhongMaterial();\r\n        material.shininess = 0.7;\r\n        material.albedoIntensity = 0.7;\r\n        ms.meshRenderer.material = material;\r\n        ms.meshRenderer.sharedMaterial.shininess = 0.01;\r\n        ms.meshRenderer.sharedMaterial.albedoIntensity = 0.7;\r\n        ms.meshRenderer.sharedMaterial.specularColor = new Laya.Vector4(0, 0, 0, 1);\r\n        ms.meshRenderer.sharedMaterial.albedoColor = new Laya.Vector4(c.r, c.g, c.b, c.a);\r\n    }\r\n    scaleBall(v) {\r\n        let s = this.myOwner.transform.getWorldLossyScale().clone();\r\n        s.x += v;\r\n        s.y += v;\r\n        s.z += v;\r\n        if (s.x < 1)\r\n            s.x = 1;\r\n        if (s.y < 1)\r\n            s.y = 1;\r\n        if (s.z < 1)\r\n            s.z = 1;\r\n        this.myOwner.transform.setWorldLossyScale(s);\r\n    }\r\n    playBiggerFX() {\r\n        this.biggerFX.particleSystem.play();\r\n    }\r\n    playSmallFX() {\r\n        this.smallFX.particleSystem.play();\r\n    }\r\n    playKickFX() {\r\n        this.kickFX.particleSystem.play();\r\n    }\r\n    onUpdate() {\r\n        if (this.ball.transform.position.z >= GameLogic.Share.totalDistance + 18 && !this.playWinSound) {\r\n            SoundMgr.instance.playSoundEffect('BowlingHit.mp3');\r\n            WxApi.DoVibrate();\r\n            this.playWinSound = true;\r\n        }\r\n        if (!GameLogic.Share.isStartGame && !GameLogic.Share.isGameOver) {\r\n            if (this.ball.transform.position.z >= GameLogic.Share.totalDistance + 30) {\r\n                GameLogic.Share.winCB();\r\n            }\r\n        }\r\n        if (!GameLogic.Share.isStartGame || GameLogic.Share.isGameOver)\r\n            return;\r\n        let pPos = GameLogic.Share._player.transform.position.clone();\r\n        pPos.z += 0.6;\r\n        this.myOwner.transform.position = pPos;\r\n        if (this.ball.transform.position.z > GameLogic.Share.totalDistance) {\r\n            GameLogic.Share.getDestination();\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=PlayerBall.js.map",
  "references": [
    "E:/LayaProjects/PoleRush/src/Libs/PlayerDataMgr.ts",
    "E:/LayaProjects/PoleRush/src/Libs/WxApi.ts",
    "E:/LayaProjects/PoleRush/src/Mod/SoundMgr.ts",
    "E:/LayaProjects/PoleRush/src/Crl/GameLogic.ts"
  ],
  "map": "{\"version\":3,\"file\":\"PlayerBall.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/Crl/PlayerBall.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
