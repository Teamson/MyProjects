{
  "code": "import FdAd from \"./FdAd\";\r\nimport FdMgr from \"./fdMgr\";\r\nexport default class Box2 extends Laya.Scene {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.progressValue = 0;\r\n        this.wuchuCount = 1;\r\n    }\r\n    onAwake() {\r\n        this.size(Laya.stage.width, Laya.stage.height);\r\n    }\r\n    onOpened(data) {\r\n        if (data && data.count) {\r\n            this.wuchuCount = data.count;\r\n        }\r\n        if (data && data.closeCB) {\r\n            this.closeCB = data.closeCB;\r\n        }\r\n        FdAd.hideGridAD();\r\n        this.btnPress.on(Laya.Event.CLICK, this, this.onPress);\r\n        Laya.timer.frameLoop(1, this, this.reFreshUI);\r\n        this.tweenScale();\r\n    }\r\n    onClosed() {\r\n        FdAd.hideGridAD();\r\n        Laya.timer.clearAll(this);\r\n        Laya.Tween.clearAll(this.imgEffect);\r\n        this.closeCB && this.closeCB();\r\n    }\r\n    onPress() {\r\n        this.progressValue += FdMgr.wuchuProgressStepAdd;\r\n        Laya.Tween.to(this.imgGift, { scaleX: 1.2, scaleY: 1.2 }, 100, null, Laya.Handler.create(this, () => {\r\n            Laya.Tween.to(this.imgGift, { scaleX: 1, scaleY: 1 }, 100, null);\r\n        }));\r\n        if (this.progressValue >= FdMgr.wuchuProgressValue) {\r\n            FdAd.showGridAD();\r\n            FdMgr.randTouchProgress();\r\n            Laya.timer.once(2000, this, () => {\r\n                this.wuchuCount--;\r\n                if (this.wuchuCount > 0) {\r\n                    FdAd.hideGridAD();\r\n                }\r\n                else {\r\n                    this.close();\r\n                }\r\n            });\r\n        }\r\n    }\r\n    reFreshUI() {\r\n        if (this.progressValue > FdMgr.wuchuProgressFrameSub) {\r\n            this.progressValue -= FdMgr.wuchuProgressFrameSub;\r\n        }\r\n        this.light.rotation += 1;\r\n    }\r\n    tweenScale() {\r\n        var t = 200;\r\n        Laya.Tween.to(this.imgEffect, { scaleX: 1.2, scaleY: 1.2, alpha: 0.8 }, t);\r\n        Laya.timer.once(t, this, () => {\r\n            Laya.Tween.to(this.imgEffect, { scaleX: 1, scaleY: 1, alpha: 1 }, t);\r\n            Laya.timer.once(t, this, this.tweenScale);\r\n        });\r\n    }\r\n}\r\n",
  "references": [
    "E:/微信项目集合/工程/HighHeels2.10.0/src/FanDong/FdAd.ts",
    "E:/微信项目集合/工程/HighHeels2.10.0/src/FanDong/fdMgr.ts"
  ]
}
