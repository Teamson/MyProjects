{
  "code": "import WxApi from \"../../Libs/WxApi\";\r\nexport var SceneDir;\r\n(function (SceneDir) {\r\n    SceneDir[\"SCENE_FRIENDGAME\"] = \"JJExport/FriendGameUI.scene\";\r\n    SceneDir[\"SCENE_SCROLLUI\"] = \"JJExport/ScrollUI.scene\";\r\n    SceneDir[\"SCENE_RECOMMENDUI\"] = \"JJExport/RecommendUI.scene\";\r\n    SceneDir[\"SCENE_FULLGAMEUI\"] = \"JJExport/FullGameUI.scene\";\r\n    SceneDir[\"SCENE_FINISHGAMEUI\"] = \"JJExport/FinishGameUI.scene\";\r\n    SceneDir[\"SCENE_DRAWUI\"] = \"JJExport/DrawUI.scene\";\r\n    SceneDir[\"SCENE_PROGRAMUI\"] = \"JJExport/ProgramUI.scene\";\r\n    SceneDir[\"SCENE_WECHATUI\"] = \"JJExport/WeChatUI.scene\";\r\n    SceneDir[\"SCENE_STARTNAVUI\"] = \"JJExport/StartNavUI.scene\";\r\n    SceneDir[\"SCENE_GAMENAVUI\"] = \"JJExport/GameNavUI.scene\";\r\n})(SceneDir || (SceneDir = {}));\r\nclass JJNavData {\r\n}\r\nexport default class JJMgr {\r\n    constructor() {\r\n        this.dataConfig = {\r\n            allow_share: true,\r\n            front_allow_return: true,\r\n            front_banner_number: 8,\r\n            front_banner_second: 800,\r\n            front_button_second: 300,\r\n            front_ckin_banner_move: 700,\r\n            front_ckin_banner_second: 500,\r\n            front_direct_draw: true,\r\n            front_extra_share: false,\r\n            front_home_screen_level: 10,\r\n            front_home_screen_number: 5,\r\n            front_lucky_screen_chance: 50,\r\n            front_lucky_screen_level: 20,\r\n            front_lucky_screen_number: 5,\r\n            front_pass_gate: 10,\r\n            front_proceed_game: 1000,\r\n            front_proceed_history: 1,\r\n            front_share_config: { image: \"https://oss.99huyu.cn/wxhuyu/a1f98703efb3f3bfe2b9a4d5a250f926.png\", title: \"根据实际年纪看看你该在啥水平...\" },\r\n            front_share_number: 4,\r\n            is_allow_area: 1\r\n        };\r\n        this.navDataArr = [];\r\n        this.JJConfigUrl = 'https://jiujiu.99huyu.cn/m/kxbqilin/config.json';\r\n        this.isFinished = false;\r\n    }\r\n    static get instance() {\r\n        if (!this._instance) {\r\n            this._instance = new JJMgr();\r\n        }\r\n        return this._instance;\r\n    }\r\n    canShowFullScreen(level) {\r\n        return level > this.dataConfig.front_auto_remen_level;\r\n    }\r\n    initJJ(completeCB) {\r\n        window['JJGetGameConfigAdShare']().then((res) => {\r\n            console.log(res);\r\n            this.updateDataConfig(res.data.config);\r\n            this.isFinished = this.dataConfig.front_all_export_switch;\r\n            this.updateNavData(res.data.ad);\r\n            var shareConfig = res.data.share[0];\r\n            JJMgr.instance.dataConfig.front_share_config = { title: shareConfig.share_content, image: shareConfig.share_img, id: shareConfig.id };\r\n            completeCB && completeCB();\r\n        }, () => {\r\n            this.dataConfig.front_all_export_switch = false;\r\n            this.dataConfig.is_allow_area = false;\r\n            this.dataConfig.front_share_config = { title: '', image: '', id: -1 };\r\n            completeCB && completeCB();\r\n        });\r\n    }\r\n    updateDataConfig(config) {\r\n        var configs = config.data;\r\n        this.dataConfig.is_allow_area = config.is_allow_area;\r\n        this.dataConfig.front_wuchu_scene = config.front_wuchu_scene;\r\n        for (let key in configs) {\r\n            this.dataConfig[key] = configs[key].config_val;\r\n        }\r\n        console.log(this.dataConfig);\r\n    }\r\n    updateNavData(data) {\r\n        this.navDataArr = [];\r\n        for (var i = 0; i < data.length; i++) {\r\n            var dataItem = data[i];\r\n            var navData = new JJNavData;\r\n            navData.appid = dataItem.channel_game_appid;\r\n            navData.title = dataItem.channel_game_name;\r\n            navData.path = dataItem.path;\r\n            navData.subtitle = dataItem.originality.copywriting;\r\n            navData.icon = dataItem.originality.material;\r\n            navData.id = dataItem.originality.id;\r\n            this.navDataArr.push(navData);\r\n        }\r\n    }\r\n    JJSendEvent(name, param) {\r\n        if (Laya.Browser.onWeiXin) {\r\n            Laya.Browser.window['wx'].JJSendEvent(() => {\r\n                return {\r\n                    name: name,\r\n                    param: param\r\n                };\r\n            });\r\n        }\r\n    }\r\n    openScene(sceneDir, closeOther = false, param, parent) {\r\n        if (!this.dataConfig.front_all_export_switch && param && param.closeCallbackFun) {\r\n            param.closeCallbackFun();\r\n            return;\r\n        }\r\n        else if (!this.dataConfig.front_all_export_switch && param && param.continueCallbackFun) {\r\n            param.continueCallbackFun();\r\n            return;\r\n        }\r\n        else if (!this.dataConfig.front_all_export_switch) {\r\n            return;\r\n        }\r\n        Laya.Scene.open(sceneDir, closeOther, param, Laya.Handler.create(this, (v) => {\r\n            if (parent)\r\n                parent.addChild(v);\r\n        }));\r\n    }\r\n    closeScene(sceneDir) {\r\n        Laya.Scene.close(sceneDir);\r\n    }\r\n    NavigateApp(index, cancelCB, successCB) {\r\n        if (Laya.Browser.onWeiXin) {\r\n            WxApi.aldEvent('导出总点击数');\r\n            var promiseObj = Laya.Browser.window['wx'].JJNavigateToMiniProgram(() => {\r\n                return {\r\n                    appId: this.navDataArr[index].appid,\r\n                    path: this.navDataArr[index].path,\r\n                    id: this.navDataArr[index].id\r\n                };\r\n            });\r\n            promiseObj.then((res) => {\r\n                successCB && successCB();\r\n                WxApi.aldEvent('导出成功-总用户数');\r\n                WxApi.aldEvent('导出成功-' + this.navDataArr[index].title);\r\n            }, (err) => {\r\n                console.log('fail');\r\n                cancelCB && cancelCB();\r\n            });\r\n        }\r\n    }\r\n    getTitle(index, sub = true) {\r\n        if (sub) {\r\n            return this.navDataArr[index].subtitle || this.navDataArr[index].title;\r\n        }\r\n        else {\r\n            return this.navDataArr[index].title;\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=JJMgr.js.map",
  "references": [
    "E:/LayaProjects/PoleRush/src/JJExport/Common/JJUtils.ts",
    "E:/LayaProjects/PoleRush/src/Libs/WxApi.ts"
  ],
  "map": "{\"version\":3,\"file\":\"JJMgr.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/JJExport/Common/JJMgr.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
