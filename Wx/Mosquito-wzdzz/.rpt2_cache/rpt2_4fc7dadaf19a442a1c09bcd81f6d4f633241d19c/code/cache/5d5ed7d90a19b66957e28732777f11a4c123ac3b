{
  "code": "import FdAd from \"./FdAd\";\r\nimport FdMgr, { BoxType } from \"./FdMgr\";\r\nexport default class Box1 extends Laya.Scene {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.progressValue = 0;\r\n        this.clickCount = 1;\r\n        this.hadShowBanner = false;\r\n        this.onShowCB = null;\r\n        this.type = BoxType.Box_Banner;\r\n    }\r\n    onAwake() {\r\n        this.size(Laya.stage.width, Laya.stage.height);\r\n    }\r\n    onOpened(data) {\r\n        if (data && data.ccb) {\r\n            this.ccb = data.ccb;\r\n        }\r\n        if (data && data.type) {\r\n            this.type = data.type;\r\n        }\r\n        FdAd.hideBannerAd();\r\n        this.btnPress.on(Laya.Event.CLICK, this, this.onPress);\r\n        Laya.timer.frameLoop(1, this, this.reFreshUI);\r\n        this.onShowCB = () => {\r\n            this.close();\r\n        };\r\n        if (Laya.Browser.onWeiXin) {\r\n            Laya.Browser.window['wx'].onShow(this.onShowCB);\r\n        }\r\n    }\r\n    onClosed() {\r\n        if (Laya.Browser.onWeiXin) {\r\n            Laya.Browser.window['wx'].offShow(this.onShowCB);\r\n        }\r\n        FdAd.hideBannerAd();\r\n        Laya.timer.clearAll(this);\r\n        FdMgr.visibleVideoBanner(false, false);\r\n        this.ccb && this.ccb();\r\n    }\r\n    onPress() {\r\n        this.progressValue += FdMgr.wuchuProgressStepAdd;\r\n        Laya.Tween.to(this.btnPress, { scaleX: 1.2, scaleY: 1.2 }, 100, null, Laya.Handler.create(this, () => {\r\n            Laya.Tween.to(this.btnPress, { scaleX: 1, scaleY: 1 }, 100, null);\r\n        }));\r\n        if (this.progressValue >= FdMgr.wuchuProgressValue && !this.hadShowBanner) {\r\n            this.hadShowBanner = true;\r\n            this.clickCount++;\r\n            if (this.type == BoxType.Box_Banner)\r\n                FdAd.showBannerAd();\r\n            else\r\n                FdMgr.visibleVideoBanner(true, false);\r\n            FdMgr.randTouchProgress();\r\n            Laya.timer.once(2000, this, () => {\r\n                if (this.clickCount >= FdMgr.jsonConfig.bannerBox_count) {\r\n                    this.close();\r\n                }\r\n                else {\r\n                    if (this.type == BoxType.Box_Banner)\r\n                        FdAd.hideBannerAd();\r\n                    else\r\n                        FdMgr.visibleVideoBanner(false, false);\r\n                    this.hadShowBanner = false;\r\n                    this.pressBar.value = 0;\r\n                    this.progressValue = 0;\r\n                }\r\n            });\r\n        }\r\n        Laya.Tween.to(this.imgSushi, { rotation: 30 }, 100, null, Laya.Handler.create(this, () => {\r\n            Laya.Tween.to(this.imgSushi, { rotation: 0 }, 100);\r\n        }));\r\n        this.pressBar.value = this.progressValue;\r\n    }\r\n    reFreshUI() {\r\n        if (this.progressValue > FdMgr.wuchuProgressFrameSub) {\r\n            this.progressValue -= FdMgr.wuchuProgressFrameSub;\r\n        }\r\n        this.pressBar.value = this.progressValue;\r\n        this.light.rotation += 1;\r\n    }\r\n}\r\n//# sourceMappingURL=Box1.js.map",
  "references": [
    "D:/FD/MyProjects/Wx/Mosquito-wzdzz/src/FanDong/FdAd.ts",
    "D:/FD/MyProjects/Wx/Mosquito-wzdzz/src/FanDong/FdMgr.ts"
  ],
  "map": "{\"version\":3,\"file\":\"Box1.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/FanDong/Box1.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
