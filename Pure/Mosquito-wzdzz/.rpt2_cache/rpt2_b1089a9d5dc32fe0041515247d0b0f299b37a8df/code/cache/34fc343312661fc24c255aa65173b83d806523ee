{
  "code": "import JJUtils from \"./JJUtils\";\r\nimport WxApi from \"../../Libs/WxApi\";\r\nexport var SceneDir;\r\n(function (SceneDir) {\r\n    SceneDir[\"SCENE_FRIENDGAME\"] = \"JJExport/FriendGameUI.scene\";\r\n    SceneDir[\"SCENE_SCROLLUI\"] = \"JJExport/ScrollUI.scene\";\r\n    SceneDir[\"SCENE_RECOMMENDUI\"] = \"JJExport/RecommendUI.scene\";\r\n    SceneDir[\"SCENE_FULLGAMEUI\"] = \"JJExport/FullGameUI.scene\";\r\n    SceneDir[\"SCENE_FINISHGAMEUI\"] = \"JJExport/FinishGameUI.scene\";\r\n    SceneDir[\"SCENE_DRAWUI\"] = \"JJExport/DrawUI.scene\";\r\n    SceneDir[\"SCENE_PROGRAMUI\"] = \"JJExport/ProgramUI.scene\";\r\n    SceneDir[\"SCENE_WECHATUI\"] = \"JJExport/WeChatUI.scene\";\r\n    SceneDir[\"SCENE_STARTNAVUI\"] = \"JJExport/StartNavUI.scene\";\r\n})(SceneDir || (SceneDir = {}));\r\nexport default class JJMgr {\r\n    constructor() {\r\n        this.dataConfig = {\r\n            allow_share: true,\r\n            front_allow_return: true,\r\n            front_banner_number: 8,\r\n            front_banner_second: 800,\r\n            front_button_second: 300,\r\n            front_ckin_banner_move: 700,\r\n            front_ckin_banner_second: 500,\r\n            front_direct_draw: true,\r\n            front_extra_share: false,\r\n            front_home_screen_level: 10,\r\n            front_home_screen_number: 5,\r\n            front_lucky_screen_chance: 50,\r\n            front_lucky_screen_level: 20,\r\n            front_lucky_screen_number: 5,\r\n            front_pass_gate: 10,\r\n            front_proceed_game: 1000,\r\n            front_proceed_history: 1,\r\n            front_share_config: { image: \"https://oss.99huyu.cn/wxhuyu/a1f98703efb3f3bfe2b9a4d5a250f926.png\", title: \"根据实际年纪看看你该在啥水平...\" },\r\n            front_share_number: 4,\r\n            is_allow_area: 1\r\n        };\r\n        this.navDataArr = [];\r\n        this.JJConfigUrl = 'https://wxhy.jiujiuhuyu.com/m/tqxiaonengshou/config.json';\r\n        this.isFinished = false;\r\n        this.isNavigating = false;\r\n    }\r\n    static get instance() {\r\n        if (!this._instance) {\r\n            this._instance = new JJMgr();\r\n        }\r\n        return this._instance;\r\n    }\r\n    canShowFullScreen(level) {\r\n        return level > this.dataConfig.front_auto_remen_level;\r\n    }\r\n    initJJ(version = '1.0.0', completeCB) {\r\n        JJUtils.httpRequest(this.JJConfigUrl, 'version=' + version, 'get', (res) => {\r\n            res = JSON.parse(res);\r\n            console.log('JJ config.json:', res);\r\n            this.dataConfig = res.data.config;\r\n            this.navDataArr = res.data.mores.remen_game;\r\n            this.isFinished = true;\r\n            completeCB && completeCB();\r\n        });\r\n    }\r\n    openScene(sceneDir, closeOther = false, param, parent) {\r\n        if (!this.dataConfig.front_all_export_switch && param && param.closeCallbackFun) {\r\n            param.closeCallbackFun();\r\n            return;\r\n        }\r\n        else if (!this.dataConfig.front_all_export_switch && param && param.continueCallbackFun) {\r\n            param.continueCallbackFun();\r\n            return;\r\n        }\r\n        else if (!this.dataConfig.front_all_export_switch) {\r\n            return;\r\n        }\r\n        Laya.Scene.open(sceneDir, closeOther, param, Laya.Handler.create(this, (v) => {\r\n            if (parent)\r\n                parent.addChild(v);\r\n        }));\r\n    }\r\n    closeScene(sceneDir) {\r\n        Laya.Scene.close(sceneDir);\r\n    }\r\n    NavigateApp(index, cancelCB, successCB) {\r\n        if (Laya.Browser.onWeiXin && !this.isNavigating) {\r\n            this.isNavigating = true;\r\n            WxApi.aldEvent('导出总点击数');\r\n            Laya.Browser.window.wx.navigateToMiniProgram({\r\n                appId: this.navDataArr[index].appid,\r\n                path: this.navDataArr[index].path,\r\n                success: (res) => {\r\n                    this.isNavigating = false;\r\n                    successCB && successCB();\r\n                    WxApi.aldEvent('导出成功-总用户数');\r\n                    WxApi.aldEvent('导出成功-' + this.getTitle(index, false));\r\n                },\r\n                fail: (res) => {\r\n                    this.isNavigating = false;\r\n                    cancelCB && cancelCB();\r\n                }\r\n            });\r\n        }\r\n    }\r\n    getTitle(index, sub = true) {\r\n        if (sub) {\r\n            return this.navDataArr[index].subtitle || this.navDataArr[index].title;\r\n        }\r\n        else {\r\n            return this.navDataArr[index].title;\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=JJMgr.js.map",
  "references": [
    "E:/LayaProjects/PoleRush/src/JJExport/Common/JJUtils.ts",
    "E:/LayaProjects/PoleRush/src/Libs/WxApi.ts"
  ],
  "map": "{\"version\":3,\"file\":\"JJMgr.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/JJExport/Common/JJMgr.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,OAAO,MAAM,WAAW,CAAA;AAC/B,OAAO,KAAK,MAAM,kBAAkB,CAAA;AAEpC,MAAM,CAAN,IAAY,QAUX;AAVD,WAAY,QAAQ;IAChB,4DAAgD,CAAA;IAChD,sDAA0C,CAAA;IAC1C,4DAAgD,CAAA;IAChD,0DAA8C,CAAA;IAC9C,8DAAkD,CAAA;IAClD,kDAAsC,CAAA;IACtC,wDAA4C,CAAA;IAC5C,sDAA0C,CAAA;IAC1C,0DAA8C,CAAA;AAClD,CAAC,EAVW,QAAQ,KAAR,QAAQ,QAUnB;AAED,MAAM,CAAC,OAAO,OAAO,KAAK;IAA1B;QASI,eAAU,GAAQ;YACd,WAAW,EAAE,IAAI;YACjB,kBAAkB,EAAE,IAAI;YACxB,mBAAmB,EAAE,CAAC;YACtB,mBAAmB,EAAE,GAAG;YACxB,mBAAmB,EAAE,GAAG;YACxB,sBAAsB,EAAE,GAAG;YAC3B,wBAAwB,EAAE,GAAG;YAC7B,iBAAiB,EAAE,IAAI;YACvB,iBAAiB,EAAE,KAAK;YACxB,uBAAuB,EAAE,EAAE;YAC3B,wBAAwB,EAAE,CAAC;YAC3B,yBAAyB,EAAE,EAAE;YAC7B,wBAAwB,EAAE,EAAE;YAC5B,yBAAyB,EAAE,CAAC;YAC5B,eAAe,EAAE,EAAE;YACnB,kBAAkB,EAAE,IAAI;YACxB,qBAAqB,EAAE,CAAC;YACxB,kBAAkB,EAAE,EAAE,KAAK,EAAE,mEAAmE,EAAE,KAAK,EAAE,mBAAmB,EAAE;YAC9H,kBAAkB,EAAE,CAAC;YACrB,aAAa,EAAE,CAAC;SACnB,CAAA;QACD,eAAU,GAAU,EAAE,CAAA;QAEtB,gBAAW,GAAW,0DAA0D,CAAA;QAEhF,eAAU,GAAY,KAAK,CAAA;QA0D3B,iBAAY,GAAY,KAAK,CAAA;IAgCjC,CAAC;IA3HU,MAAM,KAAK,QAAQ;QACtB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACjB,IAAI,CAAC,SAAS,GAAG,IAAI,KAAK,EAAE,CAAA;SAC/B;QACD,OAAO,IAAI,CAAC,SAAS,CAAA;IACzB,CAAC;IA+BD,iBAAiB,CAAC,KAAK;QACnB,OAAO,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC;IAC1D,CAAC;IAOD,MAAM,CAAC,UAAkB,OAAO,EAAE,UAAqB;QACnD,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,EAAE,UAAU,GAAG,OAAO,EAAE,KAAK,EAAE,CAAC,GAAG,EAAE,EAAE;YACvE,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;YACrB,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,GAAG,CAAC,CAAA;YACnC,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC,IAAI,CAAC,MAAM,CAAA;YACjC,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAA;YAC3C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAA;YACtB,UAAU,IAAI,UAAU,EAAE,CAAA;QAC9B,CAAC,CAAC,CAAA;IACN,CAAC;IAiBD,SAAS,CAAC,QAAkB,EAAE,aAAsB,KAAK,EAAE,KAAW,EAAE,MAAY;QAChF,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,uBAAuB,IAAI,KAAK,IAAI,KAAK,CAAC,gBAAgB,EAAE;YAC7E,KAAK,CAAC,gBAAgB,EAAE,CAAA;YACxB,OAAM;SACT;aAAM,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,uBAAuB,IAAI,KAAK,IAAI,KAAK,CAAC,mBAAmB,EAAE;YACvF,KAAK,CAAC,mBAAmB,EAAE,CAAA;YAC3B,OAAM;SACT;aAAM,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,uBAAuB,EAAE;YACjD,OAAM;SACT;QACD,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAU,EAAE,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,EAAE,EAAE;YACzE,IAAI,MAAM;gBAAE,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;QACnC,CAAC,CAAC,CAAC,CAAA;IACP,CAAC;IAED,UAAU,CAAC,QAAkB;QACzB,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAA;IAC9B,CAAC;IAID,WAAW,CAAC,KAAa,EAAE,QAAmB,EAAE,SAAoB;QAChE,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YAC7C,IAAI,CAAC,YAAY,GAAG,IAAI,CAAA;YACxB,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAA;YACxB,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,qBAAqB,CAAC;gBACzC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,KAAK;gBACnC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,IAAI;gBACjC,OAAO,EAAE,CAAC,GAAG,EAAE,EAAE;oBAEb,IAAI,CAAC,YAAY,GAAG,KAAK,CAAA;oBACzB,SAAS,IAAI,SAAS,EAAE,CAAA;oBACxB,KAAK,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAA;oBAC3B,KAAK,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAA;gBACzD,CAAC;gBACD,IAAI,EAAE,CAAC,GAAG,EAAE,EAAE;oBAEV,IAAI,CAAC,YAAY,GAAG,KAAK,CAAA;oBACzB,QAAQ,IAAI,QAAQ,EAAE,CAAA;gBAC1B,CAAC;aACJ,CAAC,CAAA;SACL;IACL,CAAC;IAED,QAAQ,CAAC,KAAa,EAAE,MAAe,IAAI;QACvC,IAAI,GAAG,EAAE;YACL,OAAO,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,QAAQ,IAAI,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,KAAK,CAAA;SACzE;aAAM;YACH,OAAO,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,KAAK,CAAA;SACtC;IACL,CAAC;CAEJ\"}"
}
