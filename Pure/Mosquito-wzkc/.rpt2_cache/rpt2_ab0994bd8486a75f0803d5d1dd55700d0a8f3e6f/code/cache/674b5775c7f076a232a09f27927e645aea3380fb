{
  "code": "import GameLogic from \"../GameLogic\";\r\nimport WxApi from \"../../Libs/WxApi\";\r\nexport default class Slice extends Laya.Script {\r\n    constructor() {\r\n        super();\r\n        this.myOwner = null;\r\n        this.value = '';\r\n        this.type = 1;\r\n        this.plane = null;\r\n        this.cxt = null;\r\n        this.cav = null;\r\n        this.calType = 0;\r\n        this.num = 1;\r\n        this.hadColl = false;\r\n        this.hadClear = false;\r\n        this.texture2d = null;\r\n    }\r\n    onAwake() {\r\n        this.myOwner = this.owner;\r\n        this.plane = this.myOwner.getChildByName('Plane');\r\n    }\r\n    onDisable() {\r\n    }\r\n    init(type) {\r\n        this.type = type;\r\n        if (this.value[0] == '+') {\r\n            this.calType = 0;\r\n            let strArr = this.value.split('+');\r\n            this.num = parseInt(strArr[1]);\r\n        }\r\n        else if (this.value[0] == '-') {\r\n            this.calType = 1;\r\n            let strArr = this.value.split('-');\r\n            this.num = parseInt(strArr[1]);\r\n        }\r\n        else if (this.value[0] == '*') {\r\n            this.calType = 2;\r\n            let strArr = this.value.split('*');\r\n            this.num = parseInt(strArr[1]);\r\n        }\r\n        else if (this.value[0] == '/') {\r\n            this.calType = 3;\r\n            let strArr = this.value.split('/');\r\n            this.num = parseInt(strArr[1]);\r\n        }\r\n        if (this.value[0] == '*') {\r\n            let str = this.value.split('*');\r\n            this.value = 'x' + str[1];\r\n        }\r\n        else if (this.value.search('/') != -1) {\r\n            let str = this.value.split('/');\r\n            this.value = 'รท' + str[1];\r\n        }\r\n        let mat = this.plane.meshRenderer.material;\r\n        this.cav = Laya.Browser.createElement(\"canvas\");\r\n        this.cxt = this.cav.getContext(\"2d\");\r\n        this.cav.width = 256;\r\n        this.cav.height = 256;\r\n        this.cxt.fillStyle = 'rgb(255,255,255)';\r\n        this.cxt.font = \"bold 150px Arial\";\r\n        this.cxt.textAlign = \"center\";\r\n        this.cxt.textBaseline = \"center\";\r\n        this.cxt.fillText(this.value, 130, 180, 200);\r\n        this.cxt.strokeStyle = \"black\";\r\n        this.cxt.font = \"bold 150px Arial\";\r\n        this.cxt.strokeText(this.value, 130, 180, 200);\r\n        this.texture2d = new Laya.Texture2D(256, 256);\r\n        this.texture2d.loadImageSource(this.cav);\r\n        mat.albedoTexture = this.texture2d;\r\n    }\r\n    checkColl() {\r\n        if (this.hadColl || GameLogic.Share.isGameOver)\r\n            return;\r\n        let myPos = this.myOwner.transform.position.clone();\r\n        let mPos = GameLogic.Share._mosquitoNode.transform.position.clone();\r\n        if (Math.abs(myPos.z - mPos.z) < 0.1 && mPos.x > myPos.x - 2 && mPos.x < myPos.x + 2) {\r\n            WxApi.DoVibrate();\r\n            this.hadColl = true;\r\n            let totalCount = GameLogic.Share._mosquitoNode.numChildren;\r\n            if (this.calType == 0) {\r\n                totalCount += this.num;\r\n            }\r\n            else if (this.calType == 1) {\r\n                totalCount -= this.num;\r\n            }\r\n            else if (this.calType == 2) {\r\n                totalCount *= this.num;\r\n            }\r\n            else if (this.calType == 3) {\r\n                totalCount /= this.num;\r\n            }\r\n            GameLogic.Share.updateMosquitoNum(Math.floor(totalCount));\r\n        }\r\n    }\r\n    onUpdate() {\r\n        this.checkColl();\r\n        if (GameLogic.Share.isGameOver && !this.hadClear) {\r\n            this.hadClear = true;\r\n            this.cxt.clearRect(0, 0, 256, 256);\r\n        }\r\n    }\r\n    onDestroy() {\r\n        this.texture2d.destroy();\r\n    }\r\n}\r\n//# sourceMappingURL=Slice.js.map",
  "references": [
    "E:/FDProjects/Projects/PureProjects/Mosquito-wzkc/src/Crl/GameLogic.ts",
    "E:/FDProjects/Projects/PureProjects/Mosquito-wzkc/src/Libs/WxApi.ts"
  ],
  "map": "{\"version\":3,\"file\":\"Slice.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/Crl/Prop/Slice.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
