!function(){"use strict";class e{constructor(){this.grade=1,this.skinArr=[1,0,0,0],this.skinId=0,this.coin=9999}}class t{static getPlayerData(){return localStorage.getItem("playerData")?null==this._playerData&&(this._playerData=JSON.parse(localStorage.getItem("playerData"))):(this._playerData=new e,localStorage.setItem("playerData",JSON.stringify(this._playerData))),this._playerData}static changeCoin(e){this._playerData.coin+=e,this.setPlayerData()}static setPlayerData(){localStorage.setItem("playerData",JSON.stringify(this._playerData))}static getSkinStr(){let e="";switch(this._playerData.skinId){case 0:case 1:e="Cat_";break;case 2:e="Huga_";break;case 3:e="Shouter_"}return e}static getCostById(e){switch(e){case 0:return 0;case 1:return 400;case 2:return 500;case 3:return 600}}static getIsBossGrade(){return this._playerData.grade%2==0}}t._playerData=null,t.levelDataArr=[];class a{static LoginWx(e){if(!Laya.Browser.onWeiXin)return;let t=Laya.Browser.window.wx.getLaunchOptionsSync();Laya.Browser.window.wx.login({success(a){a.code&&(console.log("res.code:",a.code),e&&e(a.code,t.query))}})}static GetLaunchParam(e){Laya.Browser.onWeiXin&&(this.OnShowFun=e,e(this.GetLaunchPassVar()),Laya.Browser.window.wx.onShow(e=>{null!=this.OnShowFun&&this.OnShowFun(e),console.log("wx on show")}))}static GetLaunchPassVar(){return Laya.Browser.onWeiXin?Laya.Browser.window.wx.getLaunchOptionsSync():null}static WxOnHide(e){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.onHide(e)}static WxOffHide(e){e&&Laya.Browser.onWeiXin&&Laya.Browser.window.wx.offHide(e)}static WxOnShow(e){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.onShow(e)}static WxOffShow(e){e&&Laya.Browser.onWeiXin&&Laya.Browser.window.wx.offShow(e)}static httpRequest(e,t,a="get",i){var s=new Laya.HttpRequest;s.http.timeout=5e3,s.once(Laya.Event.COMPLETE,this,i),s.once(Laya.Event.ERROR,this,this.httpRequest,[e,t,a,i]),"get"==a?s.send(e+"?"+t,"",a,"text"):"post"==a&&s.send(e,JSON.stringify(t),a,"text")}static DoVibrate(e=!0){Laya.Browser.onWeiXin&&this.isVibrate&&(e?Laya.Browser.window.wx.vibrateShort():Laya.Browser.window.wx.vibrateLong())}static OpenAlert(e,t=2e3,a=!1){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.showToast({title:e,duration:t,mask:!1,icon:a?"success":"none"})}static preViewImage(e){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.previewImage({current:e,urls:[e]})}}a.UnityPath="LayaScene_SampleScene/Conventional/",a.version="",a.isVibrate=!0,a.isMusic=!0,a.OnShowFun=null;class i{constructor(){this.effectArr=[]}static get instance(){return this._instance||(this._instance=new i),this._instance}initLoading(e){var t=[{url:"res/Sounds/bgm.mp3",type:Laya.Loader.SOUND}];Laya.loader.load(t,Laya.Handler.create(this,e)),Laya.SoundManager.setMusicVolume(1),Laya.SoundManager.setSoundVolume(1)}playMusic(e,t=0,a){Laya.SoundManager.playMusic("res/Sounds/"+e,t,new Laya.Handler(this,a))}stopMusic(){Laya.SoundManager.stopMusic()}playSoundEffect(e,t=1,a,i,s){return Laya.SoundManager.playSound("res/Sounds/"+e,t,new Laya.Handler(this,a),i,s)}stopSound(e){Laya.SoundManager.stopSound("res/Sounds/"+e)}}class s{static calcDistance(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}static getWorldDis(e,t){let a=e.transform.position.clone(),i=t.transform.position.clone();return Laya.Vector3.distance(a,i)}static getDirectionAToB(e,t,a=!0){let i=e.transform.position.clone(),s=t.transform.position.clone(),n=new Laya.Vector3(0,0,0);return Laya.Vector3.subtract(s,i,n),a&&Laya.Vector3.normalize(n,n),n}static fixPosY(e,t=1334){return e*Laya.stage.displayHeight/t}static findNodeByName(e,t){let a=null,i=e=>{for(let s=0;s<e.numChildren;s++){if(e.getChildAt(s).name==t)return void(a=e.getChildAt(s));i(e.getChildAt(s))}};return i(e),a}static TmoveTo(e,t,a,i,s){if(!e.transform)return;let n=new Laya.Tween;var r=e.transform.position;n.to(e.transform.position,{x:a.x,y:a.y,z:a.z,update:new Laya.Handler(this,()=>{e.transform&&(e.transform.position=r)})},t,s,Laya.Handler.create(this,()=>{i&&i()}))}static TmoveToYZ(e,t,a,i,s){if(!e.transform)return;let n=new Laya.Tween;var r=e.transform.position;return n.to(e.transform.position,{y:a.y,z:a.z,update:new Laya.Handler(this,()=>{e.transform&&(e.transform.position=r)})},t,null,Laya.Handler.create(this,()=>{i&&i()})),n}static TmoveToX(e,t,a,i,s){if(!e.transform)return;let n=new Laya.Tween;var r=e.transform.localPosition;n.to(e.transform.localPosition,{x:a.x,update:new Laya.Handler(this,()=>{e.transform&&(e.transform.localPosition=r)})},t,null,Laya.Handler.create(this,()=>{i&&i()}))}static TmoveToY(e,t,a,i,s){if(!e.transform)return;let n=new Laya.Tween;var r=e.transform.localPosition;n.to(e.transform.localPosition,{y:a.y,update:new Laya.Handler(this,()=>{e.transform&&(e.transform.localPosition=r)})},t,s,Laya.Handler.create(this,()=>{i&&i()}))}static TmoveToWorld(e,t,a,i,s){if(!e.transform)return;let n=new Laya.Tween;var r=e.transform.position;n.to(e.transform.position,{y:a.y,update:new Laya.Handler(this,()=>{e.transform&&(e.transform.position=r)})},t,null,Laya.Handler.create(this,()=>{i&&i()}))}static RotateWithPoint(e,t,a){let i=new Laya.Vector3,s=e.transform.localPosition.clone();return a=a*Math.PI/180,i.x=s.x*Math.cos(a)+(t.y*s.z-t.z*s.y)*Math.sin(a)+t.x*(t.x*s.x+t.y*s.y+t.z*s.z)*(1-Math.cos(a)),i.y=s.y*Math.cos(a)+(t.x*s.z-t.z*s.x)*Math.sin(a)+t.y*(t.x*s.x+t.y*s.y+t.z*s.z)*(1-Math.cos(a)),i.z=s.z*Math.cos(a)+(t.x*s.y-t.y*s.x)*Math.sin(a)+t.z*(t.x*s.x+t.y*s.y+t.z*s.z)*(1-Math.cos(a)),i}static RotateTo(e,t,a,i){var s=e.transform.rotationEuler;Laya.Tween.to(e.transform.rotationEuler,{x:a.x,y:a.y,z:a.z,update:new Laya.Handler(this,function(){e&&(e.transform.rotationEuler=s)})},t,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){i&&i()}))}static ScaleTo(e,t,a,i){var s=e.transform.localScale;Laya.Tween.to(e.transform.localScale,{x:a.x,y:a.y,z:a.z,update:new Laya.Handler(this,function(){e&&(e.transform.localScale=s)})},t,Laya.Ease.cubicOut,Laya.Handler.create(this,function(){i&&i()}))}static tMove2D(e,t,a,i,s){Laya.Tween.to(e,{x:t,y:a},i,null,new Laya.Handler(this,()=>{s&&s()}))}static scaleTo2D(e,t,a,i){Laya.Tween.to(e,{scaleX:t,scaleY:t},a,null,new Laya.Handler(this,()=>{i&&i()}))}static alphaTo2D(e,t,a,i){Laya.Tween.to(e,{alpha:t},a,null,new Laya.Handler(this,()=>{i&&i()}))}static updateNumber(e,t,a,i=!0,s,n){let r=e*t,o=Math.floor((r-e)/60);o=o<=0?1:o;let h=()=>{s?((e+=o)>=r&&(e=r,n&&n(),Laya.timer.clear(this,h)),i?a.text=e.toString():a.value=e.toString()):((r-=o)<=e&&(r=e,n&&n(),Laya.timer.clear(this,h)),i?a.text=r.toString():a.value=r.toString())};Laya.timer.frameLoop(1,this,h)}static loadJson(e,t){Laya.loader.load(e,Laya.Handler.create(this,t),null,Laya.Loader.JSON)}static objectShake(e,t=1,a=.7){var i=t,s=1,n=e.transform.localPosition.clone();Laya.timer.frameLoop(1,this,function updateShake(){if(i>0){var t=new Laya.Vector3;Laya.Vector3.scale((r=Math.random()>.5?Math.random():-Math.random(),o=Math.random()>.5?Math.random():-Math.random(),new Laya.Vector3(r,o,0)),a,t),Laya.Vector3.add(n,t,t),e.transform.localPosition=t,i-=.02*s}else i=0,e.transform.localPosition=n,Laya.timer.clear(this,updateShake);var r,o})}static getRandomItemInArr(e){return e[Math.floor(Math.random()*e.length)]}static shuffleArr(e){let t=e.length;for(;t;){let a=Math.floor(Math.random()*t--);[e[a],e[t]]=[e[t],e[a]]}return e}static GetRandom(e,t,a=!0){let i=t-e,s=Math.random()*(i+1);return s+=e,a?Math.floor(s):s}static coinCollectAnim(e,t,a,i=10,s){let n=i;for(var r=0;r<i;r++){let i=Laya.Pool.getItemByClass("coin",Laya.Image);i.skin="startUI/zy_zs_1.png",i.x=e.x,i.y=e.y,a.addChild(i);let r=300+100*Math.random()-50;Laya.Tween.to(i,{x:i.x+250*Math.random()-125,y:i.y+250*Math.random()-125},r),Laya.timer.once(r+50,this,function(){Laya.Tween.to(i,{x:t.x,y:t.y},400,null,new Laya.Handler(this,function(){a.removeChild(i),Laya.Pool.recover("coin",i),0==--n&&s&&s()}))})}}static scaleLoop(e,t,a){Laya.Tween.to(e,{scaleX:t,scaleY:t},a,null,new Laya.Handler(this,()=>{Laya.Tween.to(e,{scaleX:1,scaleY:1},a,null,new Laya.Handler(this,()=>{this.scaleLoop(e,t,a)}))}))}static rotateLoop(e,t,a){Laya.Tween.to(e,{rotation:t},a,null,new Laya.Handler(this,()=>{Laya.Tween.to(e,{rotation:-t},2*a,null,new Laya.Handler(this,()=>{Laya.Tween.to(e,{rotation:0},a,null,new Laya.Handler(this,()=>{this.rotateLoop(e,t,a)}))}))}))}static visibleDelay(e,t){e.visible=!1,Laya.timer.once(t,this,()=>{e.visible=!0})}static pointInPolygon(e,t){for(var a=e.x,i=e.y,s=!1,n=0,r=t.length-1;n<t.length;r=n++){var o=t[n].x,h=t[n].y,l=t[r].x,d=t[r].y;h>i!=d>i&&a<(l-o)*(i-h)/(d-h)+o&&(s=!s)}return s}static getSprite3DResByUrl(e,t,i=!1){let s=Laya.loader.getRes(a.UnityPath+e);return Laya.Sprite3D.instantiate(s,t,i,new Laya.Vector3(0,0,0))}static getRandomItemInArrWithoutSelf(e,t,a=1){let i=[].concat(t);return i.splice(i.indexOf(e),1),(i=this.shuffleArr(i)).slice(0,a)}static getBoundBox(e,t=!1){let a=e.getComponent(Laya.PhysicsCollider).colliderShape,i=e.transform.position.clone();i.x+=a.localOffset.x,i.y+=a.localOffset.y,i.z+=a.localOffset.z;let s=e.parent,n=1;s&&s.transform&&t&&(n=s.transform.localScaleZ);let r=new Laya.Vector3(i.x-a.sizeX/2,i.y-a.sizeY/2,i.z-a.sizeZ/2),o=new Laya.Vector3(i.x+a.sizeX/2,i.y+a.sizeY/2,i.z+a.sizeZ*n/2/2);return new Laya.BoundBox(r,o)}static getBoundBoxWithMinMax(e,t){return new Laya.BoundBox(e,t)}static addClickEvent(e,t,a,s,n){if(e.offAllCaller(t),e instanceof Laya.Button&&!n){let i=e=>{a&&a.call(t,e)};e.on(Laya.Event.CLICK,t,i,[s])}else{let n=60,r=1,o=e.scaleX*r,h=e.scaleY*r,l=.9*r,d=!1,c=t=>{d=!0,i.instance.playSoundEffect("Click.mp3"),Laya.Tween.to(e,{scaleX:l,scaleY:l},n)};e.on(Laya.Event.MOUSE_DOWN,t,c,[s]);let y=i=>{0!=d&&(d=!1,Laya.Tween.to(e,{scaleX:o,scaleY:h},n,null,new Laya.Handler(t,()=>{a&&a.call(t,i)})))};e.on(Laya.Event.MOUSE_UP,t,y,[s]);let u=t=>{Laya.Tween.to(e,{scaleX:o,scaleY:h},n)};e.on(Laya.Event.MOUSE_OUT,t,u,[s])}}static getVector3(e,t,a){return new Laya.Vector3(Number(e),Number(t),Number(a))}}class n extends Laya.Script{constructor(){super()}onAwake(){this.myOwner=this.owner}onDisable(){}normalFinishCB(){let e=this.myOwner.transform.position.clone();e.z+=20,e.y-=1,s.TmoveTo(this.myOwner,2200,e,null)}finishCB(){Laya.timer.once(1e3,this,()=>{let e=B.Share._roadFinish.transform.position.clone();e.z+=20,e.x-=13,e.y+=10,s.TmoveTo(this.myOwner,1500,e,null);let t=this.myOwner.transform.rotationEuler.clone();t.y+=90,s.RotateTo(this.myOwner,2700,t,null)})}bossDie(){let e=this.myOwner.transform.rotationEuler.clone();e.y-=73,e.x=0,s.RotateTo(this.myOwner,1800,e,null)}onUpdate(){if(B.Share.isGameOver||!B.Share.isStartGame||B.Share.isFinish)return;let e=B.Share._player.transform.position.clone(),t=this.myOwner.transform.position.clone();t.y=e.y+4,t.z=e.z-6.81,Laya.Vector3.lerp(this.myOwner.transform.position.clone(),t,.2,t),this.myOwner.transform.position=t}}var r,o;!function(e){e.ANI_IDLE="idle",e.ANI_JUMP="jump",e.ANI_RUN="run",e.ANI_WALK="walk",e.ANI_ATTACK="attack",e.ANI_DIE="die",e.ANI_WIN="win",e.ANI_BOXING_ATTACK="boxing_attack",e.ANI_BOXING_HIT="boxing_hit",e.ANI_BOXING_IDLE="boxing_idle"}(r||(r={}));class h extends Laya.Script{constructor(){super(),this.myOwner=null,this.touchX=0,this.speed=.2,this.hp=10,this.hpMax=10,this.edgeMax=3,this.tempSpeed=0,this.isJumping=!1,this.canMove=!0,this.curAniName="",this.canFight=!0,this.readyBoxing=!1}onAwake(){this.myOwner=this.owner,this._ani=this.myOwner.getComponent(Laya.Animator),this.init()}init(){for(let e=1;e<this.myOwner.numChildren;e++){let t=this.myOwner.getChildAt(e);t.active=-1!=t.name.search("Dude")}}startRun(){this.myOwner.transform.position=new Laya.Vector3(0,0,0),this.myOwner.transform.rotationEuler=new Laya.Vector3(0,0,0),this.playAni(r.ANI_RUN)}walkToDes(){this.speed=.1,this.playAni(r.ANI_WALK);let e=B.Share._roadFinish.transform.position.clone();e.z+=19,s.TmoveTo(this.myOwner,3e3,e,()=>{this.win()})}walkToBoss(){i.instance.playSoundEffect("strong.mp3"),this.speed=.1,this.playAni(r.ANI_WALK);let e=B.Share._roadFinish.transform.position.clone();e.z+=19,s.TmoveTo(this.myOwner,3e3,e,()=>{this.playAni(r.ANI_BOXING_IDLE),this.readyBoxing=!0,B.Share.fightWithBoss()}),s.ScaleTo(this.myOwner,4e3,new Laya.Vector3(3,3,3),null)}win(){this.playAni(r.ANI_WIN);let e=this.myOwner.transform.localRotationEuler.clone();e.y+=180,s.RotateTo(this.myOwner,500,e,null),B.Share.gameOver(!0)}playAni(e,t=1,a=0){e!=this.curAniName&&(e==r.ANI_RUN&&(t=2),this._ani.crossFade(e,.2,0,a),this._ani.speed=t,this.curAniName=e,e==r.ANI_ATTACK&&Laya.timer.once(500,this,()=>{this.playAni(r.ANI_RUN)}))}changeBody(e,a){let n=t.getSkinStr();a?(i.instance.playSoundEffect("green.mp3"),B.Share.correctCount++):(n=s.getRandomItemInArr(["Cat_","Huga_","Shouter_"]),i.instance.playSoundEffect("red.mp3"));let r="";switch(e){case 1:r="Head";break;case 2:r="Torso";break;case 3:r="Arm_L";break;case 4:r="Arm_R";break;case 5:r="Leg_L";break;case 6:r="Leg_R"}let o=n+r;this.myOwner.getChildByName("Dude_"+r).active=!1,this.myOwner.getChildByName(o).active=!0}moveX(){if(B.Share.isGameOver||!this.canMove)return;let e=this.speed+this.tempSpeed,t=new Laya.Vector3(0,0,e);this.myOwner.transform.translate(t,!1);let a=this.touchX;a=(a-=Laya.stage.displayWidth/2)/(Laya.stage.displayWidth/2)*this.edgeMax,(t=this.myOwner.transform.position.clone()).x=-a,Laya.Vector3.lerp(this.myOwner.transform.position.clone(),t,.2,t),this.myOwner.transform.position=t}decHp(){a.DoVibrate(),this.hp-=1,this.hp<=0&&(Laya.timer.clearAll(this),this.playAni(r.ANI_DIE,2,.3),B.Share.gameOver(!1))}decHp1(e){this.hp-=e,this.hp<=0&&(Laya.timer.clearAll(this),this.playAni(r.ANI_DIE,2,.3),B.Share.gameOver(!1))}addHp(){this.hp+=.5,this.hp>10&&(this.hp=10)}hurtCB(e){a.DoVibrate(),this.hp-=e,this.playAni(r.ANI_BOXING_HIT,1.5),Laya.timer.once(200,this,()=>{this.playAni(r.ANI_BOXING_IDLE)}),i.instance.playSoundEffect("hurt.mp3"),this.hp<=0&&(Laya.timer.clearAll(this),this.playAni(r.ANI_DIE,2,.3),B.Share.gameOver(!1))}drop(){this.playAni(r.ANI_DIE,1,.5);let e=this.myOwner.transform.position.clone();e.y-=5,e.z+=3,s.TmoveTo(this.myOwner,1500,e,null)}jump(){this.isJumping=!0,this.playAni(r.ANI_JUMP);let e=this.myOwner.transform.position.clone(),t=e.clone();t.z+=9,t.y+=5;let a=e.clone();a.z+=18,a.y=0,s.TmoveToYZ(this.myOwner,800,t,()=>{s.TmoveToYZ(this.myOwner,800,a,()=>{this.playAni(r.ANI_RUN),this.isJumping=!1},Laya.Ease.linearOut)},Laya.Ease.linearIn)}attackBoss(){this.canFight&&!B.Share._bossCrl.isDied&&(B.Share._bossCrl.hitCB(),this.canFight=!1,this.playAni(r.ANI_BOXING_ATTACK,2),Laya.timer.once(500,this,()=>{this.canFight=!0,this.playAni(r.ANI_BOXING_IDLE)}))}onUpdate(){if(!B.Share.isGameOver&&B.Share.isStartGame&&!B.Share.isFinish)if(Math.abs(this.myOwner.transform.position.z-B.Share._desNode.transform.position.z)<=1)B.Share.finish();else{if(this.moveX(),this.myOwner.transform.position.x<-this.edgeMax){let e=this.myOwner.transform.position.clone();e.x=-this.edgeMax,this.myOwner.transform.position=e}else if(this.myOwner.transform.position.x>this.edgeMax){let e=this.myOwner.transform.position.clone();e.x=this.edgeMax,this.myOwner.transform.position=e}for(let e=0;e<B.Share._lavaPoosArr.length;e++){let t=B.Share._lavaPoosArr[e].transform.position.clone(),a=this.myOwner.transform.position.clone();if(Math.abs(t.z-a.z)<2.5&&Math.abs(t.x-a.x)<1.5)return void(this.tempSpeed=-.15)}this.tempSpeed=0}}}class l{static inidAd(){Laya.Browser.onWeiXin&&!d.isPure&&(this.initBanner(),this.createVideoAd(),this.initGridAD())}static getSystemInfoSync(){if(Laya.Browser.onWeiXin)return this.sysInfo||(this.sysInfo=window.wx.getSystemInfoSync()),this.sysInfo}static initBanner(){if(Laya.Browser.onWeiXin){this.bannerIdArr=s.shuffleArr(this.bannerIdArr),console.log("bannerId 数组排列：",this.bannerIdArr),!d.canTrapAll&&this.bannerAds.length>1&&this.bannerAds.splice(0,this.bannerAds.length-1);for(let e=0;e<this.bannerIdArr.length;e++)this.bannerTimesArr.push(0),this.bannerShowCount.push(0),this.bannerErrorArr.push(!1);for(let e=0;e<this.bannerIdArr.length;e++){let t=this.createBannerAd(e);this.bannerAds.push(t)}}}static get isAllBannerError(){let e=!0;for(let t=0;t<this.bannerErrorArr.length;t++)if(!this.bannerErrorArr[t]){e=!1;break}return e}static showBannerAd(){Laya.Browser.onWeiXin&&(this.isAllBannerError?this.stopCountBannerTime():(this.bannerAds[this.bannerIndex]&&this.bannerAds[this.bannerIndex].show(),this.stopCountBannerTime(),d.canTrapAll&&Laya.timer.loop(100,this,this.countBannerTime)))}static hideBannerAd(){Laya.Browser.onWeiXin&&!this.isAllBannerError?(this.bannerAds[this.bannerIndex]&&this.bannerAds[this.bannerIndex].hide(),this.stopCountBannerTime()):this.stopCountBannerTime()}static countBannerTime(){this.bannerTimesArr[this.bannerIndex]+=.1,this.bannerTimesArr[this.bannerIndex]>=d.jsonConfig.refresh_banner_time&&(this.bannerAds[this.bannerIndex]&&this.bannerAds[this.bannerIndex].hide(),this.bannerTimesArr[this.bannerIndex]=0,this.bannerShowCount[this.bannerIndex]++,this.bannerShowCount[this.bannerIndex]>=3&&(this.bannerAds[this.bannerIndex]&&this.bannerAds[this.bannerIndex].destroy(),this.bannerAds[this.bannerIndex]=null,this.bannerAds[this.bannerIndex]=this.createBannerAd(this.bannerIndex)),this.bannerIndex++,this.bannerIndex>=this.bannerIdArr.length&&(this.bannerIndex=0),this.showBannerAd())}static stopCountBannerTime(){Laya.timer.clear(this,this.countBannerTime)}static createBannerAd(e,t=!1){if(!Laya.Browser.onWeiXin)return;let a=this.getSystemInfoSync(),i=Laya.Browser.window.wx.createBannerAd({adUnitId:this.bannerIdArr[e],style:{top:.8*a.screenHeight,width:300,left:a.screenWidth/2-150},adIntervals:30});return i.onLoad(()=>{t&&i.show(),this.bannerErrorArr[e]=!1,console.log("Banner广告加载成功")}),i.onError(t=>{this.bannerErrorArr[e]=!0,console.error("Banner广告加载失败",JSON.stringify(t))}),i.onResize(e=>{let t=i.style.realHeight+.1;i.style.top=a.screenHeight-t}),i}static createVideoAd(){if(Laya.Browser.onWeiXin){var e,t=this;null!=(e=this.videoAd)&&(e.offLoad(onLoadVideo),e.offError(onErrorVideo),e.offClose(onCloseVideo)),(e=Laya.Browser.window.wx.createRewardedVideoAd({adUnitId:t.videoId})).onLoad(onLoadVideo),e.onError(onErrorVideo),e.onClose(onCloseVideo),this.videoAd=e}function onLoadVideo(){console.log("video 加载成功"),t.isExistVideoAd=!0}function onErrorVideo(e){console.error("video 加载错误",e),t.isExistVideoAd=!1}function onCloseVideo(e){!!(e&&e.isEnded||void 0===e)&&(t.videoFinishCallback&&t.videoFinishCallback(),t.videoFinishCallback=null),t.videoCancelCallback&&t.videoCancelCallback(),t.videoCancelCallback=null}}static showVideoAd(e,t){if(!Laya.Browser.onWeiXin||d.isPure)return e&&e(),void(t&&t());if(!Laya.Browser.onWeiXin)return;let a=this;if(this.videoFinishCallback=e,this.videoCancelCallback=t,this.isExistVideoAd||this.createVideoAd(),Laya.Browser.onWeiXin){var i=this.videoAd;i.show().then(()=>{}).catch(e=>{i.load().then(()=>i.show()).catch(e=>{a.videoCancelCallback&&a.videoCancelCallback(),a.videoCancelCallback=null})})}}static destroyVideoAd(){this.videoAd&&(this.videoAd.destroy(),this.videoAd=null)}static initGridAD(){Laya.Browser.onWeiXin&&(this.createFullGrid(),this.createBottomGrid(),this.createSideGrid(),this.createTopGrid())}static createFullGrid(){this.fullGridAd=Laya.Browser.window.wx.createCustomAd({adUnitId:this.fullGridId,adIntervals:30,style:{left:0,top:this.getSystemInfoSync().screenHeight/2-this.getSystemInfoSync().screenWidth/2-50,width:this.getSystemInfoSync().screenWidth}}),this.fullGridAd.onError(()=>{this.fullGridError=!0,console.log("全屏格子加载失败")}),this.fullGridAd.onLoad(()=>{console.log("全屏格子加载成功")})}static visibleFullGridAd(e=!0){Laya.Browser.onWeiXin&&this.fullGridAd&&!this.fullGridError&&(e?this.fullGridAd.show():this.fullGridAd.hide())}static createBottomGrid(){this.bottomGridAd=Laya.Browser.window.wx.createCustomAd({adUnitId:this.bottomGridId,adIntervals:30,style:{left:47,top:this.getSystemInfoSync().screenHeight-110,width:this.getSystemInfoSync().screenWidth}}),this.bottomGridAd.onError(()=>{this.bottomGridError=!0,console.log("底部格子加载失败")}),this.bottomGridAd.onLoad(()=>{console.log("底部格子加载成功")})}static visibleBottomGridAd(e=!0){Laya.Browser.onWeiXin&&this.bottomGridAd&&!this.bottomGridError&&(e?this.bottomGridAd.show():this.bottomGridAd.hide())}static createSideGrid(){for(let e=0;e<2;e++){let t=Laya.Browser.window.wx.createCustomAd({adUnitId:this.sideGridId[e],adIntervals:30,style:{left:0==e?0:this.getSystemInfoSync().screenWidth-65,top:200}});t.onError(()=>{console.log("屏幕侧格子加载失败")}),t.onLoad(()=>{this.sideGridAd.push(t),console.log("屏幕侧格子加载成功")})}}static visibleSideGridAd(e=!0){if(Laya.Browser.onWeiXin&&this.sideGridAd.length>0)for(let t=0;t<this.sideGridAd.length;t++)e?this.sideGridAd[t].show():this.sideGridAd[t].hide()}static createTopGrid(){this.topGridAd=Laya.Browser.window.wx.createCustomAd({adUnitId:this.topGridId,adIntervals:30,style:{left:0,top:50,width:this.getSystemInfoSync().screenWidth}}),this.topGridAd.onError(()=>{this.topGridError=!0,console.log("顶部格子加载失败")}),this.topGridAd.onLoad(()=>{console.log("顶部格子加载成功")})}static visibleTopGrid(e=!0){Laya.Browser.onWeiXin&&this.topGridAd&&!this.topGridError&&(e?this.topGridAd.show():this.topGridAd.hide())}}l.bannerIdArr=["adunit-080b7a9f9b386bf3","adunit-f26a393d4d0fe992"],l.videoId="adunit-3cb6f551837ef0ef",l.fullGridId="adunit-dd997ab011667e02",l.bottomGridId="adunit-bebd9bd44872b65b",l.sideGridId=["adunit-17f621002e1857ef","adunit-8a0f20c00ed77ff0"],l.topGridId="adunit-a63f4497d67b6b98",l.bannerAds=[],l.bannerIndex=0,l.bannerTimesArr=[],l.bannerShowCount=[],l.bannerErrorArr=[],l.isExistVideoAd=!1,l.fullGridAd=null,l.fullGridError=!1,l.bottomGridAd=null,l.bottomGridError=!1,l.sideGridAd=[],l.topGridAd=null,l.topGridError=!1;class d{static randTouchProgress(){this.wuchuProgressValue<.19?this.wuchuProgressValue=this.getRangeNumer(.08,.3):this.wuchuProgressValue=this.getRangeNumer(this.wuchuProgressValue-.19+.08,this.wuchuProgressValue-.19+.3)}static getRangeNumer(e,t){return Math.random()*(t-e)+e}static bannerShowHide(){l.hideBannerAd(),Laya.timer.once(1e3,this,()=>{l.showBannerAd(),Laya.timer.once(800,this,()=>{this.bannerShowHide()})})}static init(e){this.randTouchProgress(),Laya.Browser.onWeiXin?this.getConfig(e):e&&e()}static loadGame(e){var t=()=>{this.showReMen(()=>{this.gridBoxVideo&&l.showVideoAd(),this.showBox2(e)})};this.loadingVideo?l.showVideoAd(null,t):t()}static showReMen(e){this.showRemen?Laya.Scene.open(o.Remen,!1,{ccb:()=>{e&&e()}}):e&&e()}static showStartReMen(e){this.startRemen?Laya.Scene.open(o.Remen,!1,{ccb:()=>{e&&e()}}):e&&e()}static showOverReMen(e){this.endRemen?Laya.Scene.open(o.Remen,!1,{ccb:()=>{e&&e()}}):e&&e()}static showBox1(e){this.bannerBox?Laya.Scene.open(o.Box1,!1,{closeCB:e},Laya.Handler.create(this,e=>{Laya.stage.addChild(e),e.size(Laya.stage.width,Laya.stage.height)})):e&&e()}static showBox2(e){this.gridBox?Laya.Scene.open(o.Box1,!1,{closeCB:e},Laya.Handler.create(this,e=>{Laya.stage.addChild(e),e.size(Laya.stage.width,Laya.stage.height)})):e&&e()}static showVirtualWxpage(e){this.showVitualWx&&Laya.Browser.onWeiXin?Laya.Browser.window.wx.showModal({title:"提示",content:"未观看完广告无法获取奖励，是否继续？",success:t=>{this.showVirtualCount<this.jsonConfig.vitualWx_count?(this.showVirtualCount++,l.showVideoAd(null,()=>{this.showVirtualWxpage(e)})):(this.showVirtualCount=0,this.showBox1(e))}}):this.showBox1(e)}static inHomePage(e){l.visibleSideGridAd(),l.visibleTopGrid(),this.banner_gezi_switch?l.showBannerAd():l.visibleBottomGridAd(),this.homepageVideo?l.showVideoAd(null,e):e&&e()}static startGame(e){l.hideBannerAd(),l.visibleSideGridAd(!1),l.visibleBottomGridAd(!1),l.visibleTopGrid(!1),this.startVideo?l.showVideoAd(null,()=>{this.showVirtualWxpage(()=>{this.showStartReMen(e)})}):this.showVirtualWxpage(()=>{this.showStartReMen(e)})}static inGame(){l.showBannerAd(),l.visibleSideGridAd(),l.visibleTopGrid()}static showGameOver(e){l.hideBannerAd(),l.visibleSideGridAd(!1),l.visibleTopGrid(!1),this.showOverReMen(e)}static inFinish(e){l.visibleSideGridAd(),l.hideBannerAd(),l.visibleTopGrid(),this.endBanner?(this.bannerShowHide(),e&&(e.bottom=20)):(e&&(e.bottom=300),this.banner_gezi_switch?l.showBannerAd():l.visibleBottomGridAd())}static closeFinish(e){Laya.timer.clearAll(this),l.hideBannerAd(),l.visibleBottomGridAd(!1),l.visibleSideGridAd(!1),l.visibleTopGrid(!1),this.gameCount++,this.loadGame(()=>{e&&e()})}static get allowScene(){if(Laya.Browser.onWeiXin&&this.jsonConfig.sceneList){let e=Laya.Browser.window.wx.getLaunchOptionsSync().scene.toString();return-1!=this.jsonConfig.sceneList.split(",").indexOf(e)}return!0}static getConfig(e){var t=Laya.Browser.window.wx.getLaunchOptionsSync();console.log("当前场景：",t.scene),console.log("wxsdk初始化"),window.wxsdk.init({version:"1.0.0",appid:"293",secret:"073zg3jv3a8gduh01ig16tzq4bxajspb",share:{title:"你能过得了这一关吗？",image:"https://game-oss.smallshark.cn/game/20211119/1216327431258.jpg?imageslim"}}),window.wxsdk.onInit(()=>{console.log("wxsdk初始化成功:",window.wxsdk.user);let t=new c;t.allowMistouch=window.wxsdk.conf.allowMistouch,t.bannerBox=window.wxsdk.conf.bannerBox,t.gridBox=window.wxsdk.conf.gridBox,t.startVideo=window.wxsdk.conf.startVideo,t.homepageVideo=window.wxsdk.conf.homepageVideo,t.gridBoxVideo=window.wxsdk.conf.gridBoxVideo,t.showRemen=window.wxsdk.conf.showRemen,t.sceneList=window.wxsdk.conf.sceneList,t.version=window.wxsdk.conf.version,t.showVitualWx=window.wxsdk.conf.showVitualWx,t.refresh_banner_time=window.wxsdk.conf.refresh_banner_time,t.channel_ditch=window.wxsdk.conf.channel_ditch,t.updateBanner=window.wxsdk.conf.updateBanner,t.loadingVideo=window.wxsdk.conf.loadingVideo,t.remenBanner=window.wxsdk.conf.remenBanner,t.delay_play_count=window.wxsdk.conf.delay_play_count,t.delay_play_countBanner=window.wxsdk.conf.delay_play_countBanner,t.delay_play_countVideo=window.wxsdk.conf.delay_play_countVideo,t.banner_gezi_switch=window.wxsdk.conf.banner_gezi_switch,t.loadingGezi=window.wxsdk.conf.loadingGezi,t.vitualWx_count=window.wxsdk.conf.vitualWx_count,t.endBanner=window.wxsdk.conf.endBanner,t.bannerBox_count=window.wxsdk.conf.bannerBox_count,t.remenBanner_count=window.wxsdk.conf.remenBanner_count,t.startRemen=window.wxsdk.conf.startRemen,t.endRemen=window.wxsdk.conf.endRemen,this.jsonConfig=t,console.log("config:",this.jsonConfig),this.jsonConfig.channel_ditch&&!window.wxsdk.user.channel&&(this.jsonConfig.allowMistouch=!1,console.log("config1:",this.jsonConfig)),l.inidAd(),e&&e()}),window.wxsdk.login()}static get isVersionValid(){return!(!Laya.Browser.onWeiXin||this.isPure)&&this.version.split(".")[2]<=this.jsonConfig.version.split(".")[2]}static get canTrapAll(){return!(!Laya.Browser.onWeiXin||this.isPure)&&(this.allowScene&&this.jsonConfig.allowMistouch&&this.version.split(".")[2]<=this.jsonConfig.version.split(".")[2])}static get bannerBox(){return!(!Laya.Browser.onWeiXin||this.isPure)&&(this.canTrapAll&&this.jsonConfig.bannerBox&&this.gameCount>=this.jsonConfig.delay_play_count)}static get gridBox(){return!(!Laya.Browser.onWeiXin||this.isPure)&&(this.canTrapAll&&this.jsonConfig.gridBox&&this.gameCount>=this.jsonConfig.delay_play_count)}static get startVideo(){return!(!Laya.Browser.onWeiXin||this.isPure)&&(this.canTrapAll&&this.jsonConfig.startVideo&&this.gameCount>=this.jsonConfig.delay_play_countVideo)}static get homepageVideo(){return!(!Laya.Browser.onWeiXin||this.isPure)&&(this.canTrapAll&&this.jsonConfig.homepageVideo&&this.gameCount>=this.jsonConfig.delay_play_count)}static get gridBoxVideo(){return!(!Laya.Browser.onWeiXin||this.isPure)&&(this.canTrapAll&&this.jsonConfig.gridBoxVideo&&this.gameCount>=this.jsonConfig.delay_play_count)}static get showRemen(){return!(!Laya.Browser.onWeiXin||this.isPure)&&this.jsonConfig.showRemen}static get showVitualWx(){return!(!Laya.Browser.onWeiXin||this.isPure)&&(this.canTrapAll&&this.jsonConfig.showVitualWx&&this.gameCount>=this.jsonConfig.delay_play_countVideo)}static get loadingVideo(){return!(!Laya.Browser.onWeiXin||this.isPure)&&(this.canTrapAll&&this.jsonConfig.loadingVideo)}static get remenBanner(){return!(!Laya.Browser.onWeiXin||this.isPure)&&(this.canTrapAll&&this.jsonConfig.remenBanner&&this.gameCount>=this.jsonConfig.delay_play_countBanner)}static get banner_gezi_switch(){return!(Laya.Browser.onWeiXin&&!this.isPure)||this.jsonConfig.banner_gezi_switch}static get loadingGezi(){return!(!Laya.Browser.onWeiXin||this.isPure)&&(this.canTrapAll&&this.jsonConfig.loadingGezi)}static get endBanner(){return!(!Laya.Browser.onWeiXin||this.isPure)&&(this.canTrapAll&&this.jsonConfig.endBanner&&this.gameCount>=this.jsonConfig.delay_play_countBanner)}static get startRemen(){return!(!Laya.Browser.onWeiXin||this.isPure)&&this.jsonConfig.startRemen}static get endRemen(){return!(!Laya.Browser.onWeiXin||this.isPure)&&this.jsonConfig.endRemen}}d.version="1.0.7",d.wuchuProgressValue=0,d.wuchuProgressStepAdd=.1,d.wuchuProgressFrameSub=.0032,d.gameCount=1,d.isPure=!1,d.showVirtualCount=0;class c{}!function(e){e.Remen="FDScene/Remen.scene",e.VitrualWx="FDScene/VitrualWx.scene",e.Box1="FDScene/Box1.scene",e.Box2="FDScene/Box2.scene"}(o||(o={}));class y extends Laya.Script{constructor(){super(),this.myOwner=null,this.greenBody=null,this.redBody=null,this.type=0,this.isFinish=!1,this.isLeft=!1}onAwake(){this.myOwner=this.owner,this.greenBody=this.myOwner.getChildAt(0),this.redBody=this.myOwner.getChildAt(1)}init(e,t){this.isLeft=t,this.type=e;for(let t=0;t<this.greenBody.numChildren;t++)this.greenBody.getChildAt(t).active=e==t+1;for(let t=0;t<this.redBody.numChildren;t++)this.redBody.getChildAt(t).active=e==t+1}onUpdate(){if(this.isFinish)return;let e=B.Share._player.transform.position.clone(),t=this.myOwner.transform.position.clone();Math.abs(e.z-t.z)<=.5&&(a.DoVibrate(),this.isFinish=!0,e.x>=0?(t.y+=1.8,t.x+=1.5,B.Share.createLightFX(t),B.Share._playerCrl.changeBody(this.type,this.isLeft)):(t.y+=1.8,t.x-=1.5,B.Share.createLightFX(t),B.Share._playerCrl.changeBody(this.type,!this.isLeft)))}}class u extends Laya.Script{constructor(){super(),this.myOwner=null,this.isDied=!1,this.curAniName=""}onAwake(){this.myOwner=this.owner,this._ani=this.myOwner.getComponent(Laya.Animator),this.init(),this.playAni(r.ANI_IDLE)}init(){for(let e=1;e<this.myOwner.numChildren;e++){let t=this.myOwner.getChildAt(e);t.active=-1!=t.name.search("Dude")&&-1==t.name.search("Head")}this.myOwner.getChildByName("Enemy_Head").active=!0}playAni(e,t=1,a=0){e!=this.curAniName&&(this._ani.crossFade(e,.2,0,a),this._ani.speed=t,this.curAniName=e)}hitCB(){B.Share._player.transform.position.clone();let e=this.myOwner.transform.position.clone();e.z+=15,s.TmoveTo(this.myOwner,500,e,null,Laya.Ease.linearIn)}onUpdate(){let e=B.Share._player.transform.position.clone(),t=this.myOwner.transform.position.clone();if(!this.isDied&&!B.Share.isGameOver&&!B.Share.isFinish&&Laya.Vector3.distance(e,t)<=1)return B.Share._playerCrl.playAni(r.ANI_ATTACK,1.5),B.Share._playerCrl.decHp(),i.instance.playSoundEffect("hit.mp3"),this.playAni(r.ANI_DIE,2,.3),this.isDied=!0,void this.hitCB();if(Math.abs(t.z-e.z)<=7&&!this.isDied){this.playAni(r.ANI_RUN),this.myOwner.transform.lookAt(e,new Laya.Vector3(0,1,0));let a=this.myOwner.transform.localRotationEuler.clone();a.y+=180,this.myOwner.transform.localRotationEuler=a;let i=new Laya.Vector3;Laya.Vector3.subtract(e,t,i),Laya.Vector3.normalize(i,i),Laya.Vector3.scale(i,.05,i),this.myOwner.transform.translate(i,!1)}}}class m extends Laya.Script{constructor(){super(),this.myOwner=null}onAwake(){this.myOwner=this.owner}onUpdate(){let e=B.Share._player.transform.position.clone(),s=this.myOwner.transform.position.clone();Laya.Vector3.distance(e,s)<=1&&(i.instance.playSoundEffect("mutagen.mp3"),B.Share._playerCrl.addHp(),a.DoVibrate(),B.Share.createGreenFX(),t.changeCoin(1),this.myOwner.destroy())}}class w extends Laya.Script{constructor(){super(),this.myOwner=null,this.isDied=!1}onAwake(){this.myOwner=this.owner}onUpdate(){let e=B.Share._player.transform.position.clone(),t=this.myOwner.transform.position.clone();if((t.x>3||t.x<-3)&&this.myOwner.transform.position.y>-5&&this.myOwner.transform.translate(new Laya.Vector3(0,-.2,0),!1),!this.isDied&&Laya.Vector3.distance(e,t)<=2){i.instance.playSoundEffect("hit.mp3"),B.Share._playerCrl.decHp(),a.DoVibrate(),this.isDied=!0;let e=this.myOwner.transform.position.x>=0?2*Math.random()+3:-(2*Math.random()+3);t.x=e,t.z+=10*Math.random()+10,s.TmoveTo(this.myOwner,500,t,null);let n=new Laya.Vector3;n.x=720*Math.random()+360,n.y=720*Math.random()+360,n.z=720*Math.random()+360,s.RotateTo(this.myOwner,500,n,null)}}}class p extends Laya.Script{constructor(){super(),this.myOwner=null,this.numSp=null}onAwake(){this.myOwner=this.owner,this._ani=this.myOwner.getComponent(Laya.Animator),this.numSp=this.myOwner.getChildAt(1).getChildAt(0).getChildAt(0)}raiseCB(){this._ani.play("raise"),Laya.timer.once(600,this,()=>{this._ani.play("raise_1")});let e=1,t=1;0==B.Share.correctCount?(e=1,t=1):1==B.Share.correctCount?(e=.2,t=1):2==B.Share.correctCount?(e=.4,t=1):3==B.Share.correctCount?(e=.6,t=1):4==B.Share.correctCount?(e=.8,t=1):5==B.Share.correctCount?(e=.4,t=-.22):6==B.Share.correctCount&&(e=.8,t=-.22),this.numSp.meshRenderer.material.tilingOffset=new Laya.Vector4(1,1,e,t)}onUpdate(){}}class g extends Laya.Script{constructor(){super(),this.myOwner=null}onAwake(){this.myOwner=this.owner}onUpdate(){if(B.Share.isGameOver)return;let e=B.Share._player.transform.position.clone(),t=this.myOwner.transform.position.clone();e.z>t.z&&e.z<t.z+2&&!B.Share._playerCrl.isJumping&&(B.Share.gameOver(!1),B.Share._playerCrl.drop())}}class L extends Laya.Script{constructor(){super(),this.myOwner=null,this.isDied=!1}onAwake(){this.myOwner=this.owner}onUpdate(){if(B.Share.isGameOver||this.isDied)return;let e=B.Share._player.transform.position.clone(),t=this.myOwner.transform.position.clone();t.y=0,Laya.Vector3.distance(t,e)<1&&(this.isDied=!0,i.instance.playSoundEffect("spring.mp3"),B.Share._playerCrl.jump(),t.y+=.3,s.TmoveTo(this.myOwner,200,t,null))}}class f extends Laya.Script{constructor(){super(),this.myOwner=null,this.isDied=!1,this.hp=10,this.hpMax=10,this.curAniName=""}onAwake(){this.myOwner=this.owner,this._ani=this.myOwner.getComponent(Laya.Animator),this.init(),this.playAni(r.ANI_BOXING_IDLE)}init(){let e=s.getRandomItemInArr(["Cat","Huga","Shouter"]);for(let t=1;t<this.myOwner.numChildren;t++){let a=this.myOwner.getChildAt(t);a.active=-1!=a.name.search(e)}}playAni(e,t=1,a=0){e!=this.curAniName&&this.curAniName!=r.ANI_WIN&&(this._ani.crossFade(e,.2,0,a),this._ani.speed=t,this.curAniName=e)}hitCB(){a.DoVibrate(),this.hp-=2,i.instance.playSoundEffect("hurt.mp3"),this.hp<=0?(B.Share._scene.enableFog=!1,this.isDied=!0,B.Share.isGameOver=!0,this.playAni(r.ANI_DIE,1.5,.3),this.dieCB(),Laya.timer.clearAll(this)):(Laya.timer.once(200,this,()=>{this.playAni(r.ANI_BOXING_HIT,1.5)}),Laya.timer.once(400,this,()=>{this.playAni(r.ANI_BOXING_IDLE)}));let e=this.myOwner.transform.position.clone();e.y+=7,e.z-=1,B.Share.createHitFX(e,this)}updateBoxingAtk(){this.isDied||B.Share.isGameOver||Laya.timer.once(1e3*Math.random()+1e3,this,()=>{if(this.isDied||B.Share.isGameOver)return;this.playAni(r.ANI_BOXING_ATTACK,2),Laya.timer.once(200,this,()=>{B.Share._playerCrl.hurtCB(1*Math.random()+1)}),Laya.timer.once(500,this,()=>{this.playAni(r.ANI_BOXING_IDLE)}),this.updateBoxingAtk();let e=B.Share._player.transform.position.clone();e.y+=7,B.Share.createHitFX(e,this)})}dieCB(){let e=this.myOwner.transform.position.clone();e.y+=20,e.z+=60,s.TmoveTo(this.myOwner,2e3,e,()=>{B.Share.gameOver(!0)});let t=this.myOwner.transform.rotationEuler.clone();t.z=720*Math.random()+360,s.RotateTo(this.myOwner,2e3,t,null),B.Share._cameraCrl.bossDie()}onUpdate(){}}class S extends Laya.Scene{constructor(){super(),this.touchStartPosX=0}onOpened(){S.Share=this,this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),Laya.timer.frameLoop(1,this,this.myUpdate),this.gradeNum.value=t.getPlayerData().grade.toString(),this.touchBtn.on(Laya.Event.MOUSE_DOWN,this,this.touchStart),this.touchBtn.on(Laya.Event.MOUSE_MOVE,this,this.touchMove),this.touchBtn.on(Laya.Event.MOUSE_UP,this,this.touchEnd),d.inGame()}onClosed(){Laya.timer.clearAll(this)}touchStart(e){if(B.Share.isGameOver)return;if(B.Share._playerCrl.readyBoxing)return void B.Share._playerCrl.attackBoss();if(B.Share.isFinish)return;B.Share.isStartGame||(this.guideAni.visible=!1,B.Share.gameStart());let t=e.stageX;B.Share._playerCrl.touchX=t}touchMove(e){if(B.Share.isGameOver)return;if(B.Share.isFinish)return;let t=e.stageX;B.Share._playerCrl.touchX=t}touchEnd(e){B.Share.isGameOver||B.Share.isFinish}fixPlayerHp(){if(!B.Share._player||B.Share.isFinish)return;let e=new Laya.Vector4(0,0,0),t=B.Share._player.transform.position.clone();t.y+=3,B.Share._camera.viewport.project(t,B.Share._camera.projectionViewMatrix,e),this.playerHp.pos(e.x/Laya.stage.clientScaleX,e.y/Laya.stage.clientScaleY),this.playerHp.value=B.Share._playerCrl.hp/B.Share._playerCrl.hpMax}bossReady(){this.createTips()}fixBossHp(){let e=new Laya.Vector4(0,0,0),t=B.Share._player.transform.position.clone();t.y+=9,B.Share._camera.viewport.project(t,B.Share._camera.projectionViewMatrix,e),this.playerHp.pos(e.x/Laya.stage.clientScaleX,e.y/Laya.stage.clientScaleY),this.playerHp.value=B.Share._playerCrl.hp/B.Share._playerCrl.hpMax;let a=new Laya.Vector4(0,0,0),i=B.Share._boss.transform.position.clone();i.y+=9,B.Share._camera.viewport.project(i,B.Share._camera.projectionViewMatrix,a),this.bossHp.pos(a.x/Laya.stage.clientScaleX,a.y/Laya.stage.clientScaleY),this.bossHp.value=B.Share._bossCrl.hp/B.Share._bossCrl.hpMax}createTips(){Laya.timer.loop(300,this,()=>{if(B.Share.isGameOver)return this.tipsNode.visible=!1,void Laya.timer.clearAll(this);let e=new Laya.Image("gameUI/yxz_wz_2.png");e.anchorX=.5,e.anchorY=.5,e.pos(200*Math.random()-100,200*Math.random()-100),this.tipsNode.addChild(e),Laya.Tween.to(e,{scaleX:1.2,scaleY:1.2},80,null,new Laya.Handler(this,()=>{})),Laya.timer.once(300,this,()=>{e.destroy()})})}myUpdate(){this.fixPlayerHp(),B.Share.isFinish&&t.getIsBossGrade()&&this.fixBossHp(),B.Share.isGameOver&&(this.playerHp.visible=!1,this.bossHp.visible=!1),this.coinNum.value=t.getPlayerData().coin.toString()}}class A extends Laya.Script{constructor(){super(),this._ani=null,this.myOwner=null,this.isDied=!1}onAwake(){this.myOwner=this.owner,this._ani=this.myOwner.getComponent(Laya.Animator),this._ani.speed=0,this.myOwner.transform.rotate(new Laya.Vector3(0,180,0),!0,!1)}onUpdate(){if(B.Share.isGameOver||this.isDied)return;let e=B.Share._player.transform.position.clone(),t=this.myOwner.transform.position.clone();t.y=0,Math.abs(e.z-t.z)<1&&Math.abs(e.x-t.x)<3&&(this.isDied=!0,i.instance.playSoundEffect("hit.mp3"),B.Share._playerCrl.playAni(r.ANI_ATTACK,1.5),B.Share._playerCrl.decHp(),this._ani.speed=1,t.z+=10,s.TmoveTo(this.myOwner,300,t,()=>{},Laya.Ease.linearIn))}}class C extends Laya.Script{constructor(){super(),this.myOwner=null,this.isDied=!1}onAwake(){this.myOwner=this.owner}onUpdate(){let e=B.Share._player.transform.position.clone(),t=this.myOwner.transform.position.clone();Math.abs(e.z-t.z)<2.5&&Math.abs(e.x-t.x)<1.5&&B.Share._playerCrl.decHp1(.02)}}class B{constructor(){this.camStartPos=new Laya.Vector3(0,0,0),this.camStartRotation=null,this._cameraCrl=null,this.startCamField=60,this.isStartGame=!1,this.isGameOver=!1,this.isWin=!1,this.isPause=!1,this.isFinish=!1,this._levelNode=null,this._player=null,this._boss=null,this._playerCrl=null,this._bossCrl=null,this._standNode=null,this._desNode=null,this._roadFinish=null,this._lavaPoosArr=[],this.correctCount=0,this.bodyArr=[],Laya.Browser.onWeiXin||localStorage.clear(),B.Share=this,t.getPlayerData(),Laya.Browser.onWeiXin&&(Laya.Browser.window.wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),Laya.Browser.window.wx.onShareAppMessage(()=>({title:"怪物实验室",imageUrl:""}))),Laya.Scene.open("MyScenes/LoadingUI.scene")}initScene(){Laya.Scene3D.load(a.UnityPath+"SampleScene.ls",Laya.Handler.create(this,this.onLoadScene))}onLoadScene(e){Laya.Scene.open("MyScenes/StartUI.scene"),this._scene=Laya.stage.addChild(e),Laya.stage.setChildIndex(this._scene,0),this._camera=this._scene.getChildByName("Main Camera"),this._light=this._scene.getChildByName("Directional Light"),this._light.shadowMode=Laya.ShadowMode.SoftHigh,this._light.shadowDistance=15,this._light.shadowResolution=1024,this._light.shadowCascadesMode=Laya.ShadowCascadesMode.NoCascades,this._light.shadowNormalBias=0,this._scene.enableFog=!0,this._scene.fogColor=new Laya.Vector3(0,.8,0),this._scene.fogStart=10,this._scene.fogRange=60,this.camStartPos=this._camera.transform.position.clone(),this.camStartRotation=this._camera.transform.rotation.clone(),this._camera.fieldOfView=this.startCamField,this._cameraCrl=this._camera.addComponent(n),this._levelNode=this._scene.addChild(new Laya.Sprite3D),this.createLevel()}gameStart(){this.isStartGame=!0,this._standNode.getChildAt(0).active=!1,this._standNode.getChildAt(1).active=!0,this._standNode.getChildAt(1).getComponent(Laya.Animator).speed=1,this._playerCrl.startRun(),i.instance.playSoundEffect("glass.mp3")}createLevel(){this._lavaPoosArr=[],this.bodyArr=[0,1,2,3,4,5],this.bodyArr=s.shuffleArr(this.bodyArr);let e=t.getPlayerData().grade;e=Math.floor((e-1)%4);let a=t.levelDataArr[e];for(let e=0;e<a.length;e++){let t=a[e],i=t.name,s=new Laya.Vector3(Number(t.position.x),Number(t.position.y),Number(t.position.z)),n=new Laya.Vector3(Number(t.rotation.x),Number(t.rotation.y),Number(t.rotation.z)),r=new Laya.Vector3(Number(t.scale.x),Number(t.scale.y),Number(t.scale.z));this.createItem(i,s,n,r)}}createItem(e,a,i,n){let r=0;-1!=e.search("SelectNode")&&(r=Number(e.slice(e.length-1)),e=e.slice(0,e.length-1));let o=s.getSprite3DResByUrl(e+".lh",this._levelNode,!1);if(o.transform.position=a,o.transform.rotationEuler=i,o.transform.setWorldLossyScale(n),-1!=e.search("Player"))this._player=o,this._playerCrl=o.addComponent(h);else if(-1!=e.search("Stand"))o.getChildAt(0).active=!0,o.getChildAt(1).active=!1,this._standNode=o;else if(-1!=e.search("SelectNode")){o.addComponent(y).init(r,"L"==e.slice(e.length-1))}else if(-1!=e.search("Enemy"))o.addComponent(u);else if(-1!=e.search("Mutagen"))o.addComponent(m);else if(-1!=e.search("Barrel"))o.addComponent(w);else if("Finish"==e)this._desNode=o;else if("DropArea"==e)o.addComponent(g);else if("Jumper"==e)o.addComponent(L);else if("Boss"==e)this._boss=o,this._bossCrl=o.addComponent(f);else if("Wall"==e)o.addComponent(A);else if("Lava_Pool"==e)o.addComponent(C),this._lavaPoosArr.push(o);else if("Road_Finish"==e){this._roadFinish=o;for(let e=0;e<this._roadFinish.numChildren;e++){let a=this._roadFinish.getChildAt(e);a.addComponent(p);t.getIsBossGrade()&&(a.active=!1)}}}createGreenFX(){let e=s.getSprite3DResByUrl("FX_Green.lh",this._levelNode,!1),t=this._player.transform.position.clone();t.y+=1,t.z+=5,e.transform.position=t,Laya.timer.once(500,this,()=>{e.destroy()})}createHitFX(e,t){let a=s.getSprite3DResByUrl("FX_Hit_1.lh",this._levelNode,!1);a.transform.position=e,Laya.timer.once(400,t,()=>{a.destroy()})}createLightFX(e){let t=s.getSprite3DResByUrl("lightning_1.lh",this._levelNode,!1);t.transform.position=e,Laya.timer.once(1e3,this,()=>{t.destroy()})}finish(){if(this.isFinish=!0,t.getIsBossGrade())this._playerCrl.walkToBoss(),this._cameraCrl.finishCB();else{this._playerCrl.walkToDes(),this._cameraCrl.normalFinishCB();for(let e=0;e<this._roadFinish.numChildren;e++){this._roadFinish.getChildAt(e).getComponent(p).raiseCB()}}}fightWithBoss(){S.Share.bossReady(),this._bossCrl.updateBoxingAtk()}gameOver(e){e&&i.instance.playSoundEffect("win.mp3"),t.getIsBossGrade()&&!e&&this._bossCrl.playAni(r.ANI_WIN),Laya.timer.clearAll(this),a.DoVibrate(!1),this.isWin=e,this.isGameOver=!0,this.isStartGame=!1,Laya.Scene.close("MyScenes/GameUI.scene"),Laya.timer.once(2e3,this,()=>{d.showGameOver(()=>{Laya.Scene.open("MyScenes/FinishUI.scene")})})}restartGame(){this.isStartGame=!1,this.isGameOver=!1,this.isWin=!1,this.isPause=!1,this._camera.fieldOfView=this.startCamField,this.isFinish=!1,this.correctCount=0,this._camera.transform.position=this.camStartPos,this._camera.transform.rotation=this.camStartRotation,this._scene.enableFog=!0,this._levelNode.destroyChildren(),this.createLevel()}}class _ extends Laya.Scene{constructor(){super(...arguments),this.progressValue=0,this.wuchuCount=1,this.hadShowBanner=!1,this.onShowCB=null}onAwake(){this.size(Laya.stage.width,Laya.stage.height)}onOpened(e){this.wuchuCount=d.jsonConfig.bannerBox_count,e&&e.closeCB&&(this.closeCB=e.closeCB),l.hideBannerAd(),this.btnPress.on(Laya.Event.CLICK,this,this.onPress),Laya.timer.frameLoop(1,this,this.reFreshUI),this.onShowCB=(()=>{this.close()}),Laya.Browser.onWeiXin&&Laya.Browser.window.wx.onShow(this.onShowCB)}onClosed(){Laya.Browser.onWeiXin&&Laya.Browser.window.wx.offShow(this.onShowCB),l.hideBannerAd(),Laya.timer.clearAll(this),this.closeCB&&this.closeCB()}onPress(){this.progressValue+=d.wuchuProgressStepAdd,Laya.Tween.to(this.btnPress,{scaleX:1.2,scaleY:1.2},100,null,Laya.Handler.create(this,()=>{Laya.Tween.to(this.btnPress,{scaleX:1,scaleY:1},100,null)})),this.progressValue>=d.wuchuProgressValue&&(l.showBannerAd(),this.hadShowBanner=!0,d.randTouchProgress(),Laya.timer.once(2e3,this,()=>{this.wuchuCount--,this.wuchuCount>0?(l.hideBannerAd(),this.hadShowBanner=!1):this.close()})),Laya.Tween.to(this.imgSushi,{rotation:30},100,null,Laya.Handler.create(this,()=>{Laya.Tween.to(this.imgSushi,{rotation:0},100)})),this.pressBar.value=this.progressValue}reFreshUI(){this.progressValue>d.wuchuProgressFrameSub&&(this.progressValue-=d.wuchuProgressFrameSub),this.pressBar.value=this.progressValue,this.light.rotation+=1}}class b extends Laya.Scene{constructor(){super(...arguments),this.progressValue=0,this.wuchuCount=1}onAwake(){this.size(Laya.stage.width,Laya.stage.height)}onOpened(e){e&&e.count&&(this.wuchuCount=e.count),e&&e.closeCB&&(this.closeCB=e.closeCB),l.visibleFullGridAd(!1),this.btnPress.on(Laya.Event.CLICK,this,this.onPress),Laya.timer.frameLoop(1,this,this.reFreshUI),this.tweenScale(),l.showBannerAd()}onClosed(){l.hideBannerAd(),l.visibleFullGridAd(!1),Laya.timer.clearAll(this),Laya.Tween.clearAll(this.imgEffect),this.closeCB&&this.closeCB()}onPress(){this.progressValue+=d.wuchuProgressStepAdd,Laya.Tween.to(this.imgGift,{scaleX:1.2,scaleY:1.2},100,null,Laya.Handler.create(this,()=>{Laya.Tween.to(this.imgGift,{scaleX:1,scaleY:1},100,null)})),this.progressValue>=d.wuchuProgressValue&&(l.visibleFullGridAd(),d.randTouchProgress(),Laya.timer.once(2e3,this,()=>{this.wuchuCount--,this.wuchuCount>0?l.visibleFullGridAd(!1):this.close()}))}reFreshUI(){this.progressValue>d.wuchuProgressFrameSub&&(this.progressValue-=d.wuchuProgressFrameSub),this.light.rotation+=1}tweenScale(){var e=200;Laya.Tween.to(this.imgEffect,{scaleX:1.2,scaleY:1.2,alpha:.8},e),Laya.timer.once(e,this,()=>{Laya.Tween.to(this.imgEffect,{scaleX:1,scaleY:1,alpha:1},e),Laya.timer.once(e,this,this.tweenScale)})}}class x extends Laya.Scene{constructor(){super(),this.ccb=null,this.clickCount=0}onAwake(){this.size(Laya.stage.displayWidth,Laya.stage.displayHeight)}onOpened(e){e&&e.ccb&&(this.ccb=e.ccb),this.clickCount=0,this.btnContinue.on(Laya.Event.CLICK,this,this.btnContinueCB),l.visibleFullGridAd(),d.remenBanner&&d.gameCount>=d.jsonConfig.delay_play_countBanner&&this.bannerShowHide(),l.bannerIndex=0}onClosed(){Laya.timer.clearAll(this),l.hideBannerAd(),l.visibleFullGridAd(!1),Laya.timer.once(100,this,()=>{this.ccb&&this.ccb()})}bannerShowHide(){l.hideBannerAd(),Laya.timer.once(1e3,this,()=>{l.showBannerAd(),Laya.timer.once(800,this,()=>{this.bannerShowHide()})})}btnContinueCB(){this.clickCount++,this.clickCount>=d.jsonConfig.remenBanner_count&&this.close()}}class v extends Laya.Scene{constructor(){super(),this.freeSkin=[]}onOpened(){this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),this.gradeNum.value=t.getPlayerData().grade.toString(),this.coinNum.value=t.getPlayerData().coin.toString();let e=B.Share.isWin;this.winTitle.visible=e,this.bounesIcon.visible=e,this.loseTitle.visible=!e,this.nextBtn.visible=e,this.restartBtn.visible=!e,s.addClickEvent(this.nextBtn,this,this.closeCB),s.addClickEvent(this.restartBtn,this,this.closeCB),d.inFinish(e?this.nextBtn:this.restartBtn)}onClosed(){}closeCB(){d.closeFinish(()=>{B.Share.isWin&&(t.getPlayerData().coin+=200,t.getPlayerData().grade++,t.setPlayerData()),B.Share.restartGame(),Laya.Scene.open("MyScenes/StartUI.scene")})}}class I extends Laya.Script{constructor(){super()}onAwake(){let e=this.owner;e.y=e.y*Laya.stage.displayHeight/1334}}class O extends Laya.Scene{constructor(){super(),this.maxGrade=4}onOpened(){this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),d.init(()=>{this.loadJsonData(1)}),Laya.timer.frameLoop(1,this,()=>{this.bar.value+=.01})}onClosed(){}loadJsonData(e){s.loadJson("res/configs/Level"+e+".json",a=>{if(t.levelDataArr.push(a),++e>this.maxGrade)return Laya.Browser.onWeiXin?this.loadSubpackage():this.loadRes(),void console.log("levelDataArr:",t.levelDataArr);this.loadJsonData(e)})}loadSubpackage(){Laya.Browser.window.wx.loadSubpackage({name:"unity",success:e=>{this.loadRes()},fail:e=>{this.loadSubpackage()}}).onProgressUpdate(e=>{console.log("下载进度",e.progress),console.log("已经下载的数据长度",e.totalBytesWritten),console.log("预期需要下载的数据总长度",e.totalBytesExpectedToWrite)})}loadRes(){var e=[a.UnityPath+"Player.lh",a.UnityPath+"Enemy.lh",a.UnityPath+"Barrel.lh",a.UnityPath+"Wall.lh",a.UnityPath+"Road.lh",a.UnityPath+"Jumper.lh",a.UnityPath+"Mutagen.lh",a.UnityPath+"Finish.lh",a.UnityPath+"Lava_Pool.lh",a.UnityPath+"Points_plate.lh",a.UnityPath+"Road_Finish.lh",a.UnityPath+"Stand.lh",a.UnityPath+"SelectNodeL.lh",a.UnityPath+"SelectNodeR.lh",a.UnityPath+"DropArea.lh",a.UnityPath+"Boss.lh",a.UnityPath+"Wormhole.lh",a.UnityPath+"WaveGun.lh",a.UnityPath+"FX_Green.lh",a.UnityPath+"FX_Hit_1.lh",a.UnityPath+"lightning_1.lh"];Laya.loader.create(e,Laya.Handler.create(this,this.onComplete),Laya.Handler.create(this,this.onProgress))}onComplete(){d.loadGame(()=>{i.instance.initLoading(()=>{B.Share.initScene()})})}onProgress(e){}}class P extends Laya.Scene{constructor(){super(),this.playerNode=null,this.playerCrl=null,this.chooseId=0}onOpened(){this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),s.addClickEvent(this.closeBtn,this,this.closeBtnCB),this.chooseId=t.getPlayerData().skinId,this.createPlayer(),this.initList(),Laya.timer.frameLoop(1,this,this.myUpdate)}onClosed(){Laya.timer.clearAll(this),this.playerNode.destroy(),B.Share._levelNode.active=!0}createPlayer(){let e=Laya.loader.getRes(a.UnityPath+"Player.lh");this.playerNode=Laya.Sprite3D.instantiate(e,B.Share._scene,!1,new Laya.Vector3(0,0,0)),this.playerNode.transform.position=new Laya.Vector3(0,2.5,2),this.playerCrl=this.playerNode.addComponent(h),this.playerCrl.playAni(r.ANI_WIN);let i=["Dude","Cat","Huga","Shouter"];for(let e=1;e<this.playerNode.numChildren;e++){let a=this.playerNode.getChildAt(e);a.active=-1!=a.name.search(i[t.getPlayerData().skinId])}}initList(){this.myList.vScrollBarSkin="",this.myList.array=t.getPlayerData().skinArr,this.myList.repeatX=3,this.myList.repeatY=2,this.myList.renderHandler=Laya.Handler.create(this,this.onmyListRender,null,!1)}onmyListRender(e,a){if(a>=this.myList.array.length)return;var i=e.getChildByName("item");let n=i.getChildByName("select"),r=i.getChildByName("icon"),o=i.getChildByName("using"),h=i.getChildByName("unlocked"),l=i.getChildByName("buyBtn"),d=l.getChildByName("cost"),c=i.getChildByName("adBtn");n.visible=this.chooseId==a,r.skin="skinUI/skin"+(a+1)+".png",o.visible=t.getPlayerData().skinId==a,h.visible=t.getPlayerData().skinId!=a&&1==t.getPlayerData().skinArr[a],l.visible=0==t.getPlayerData().skinArr[a],d.value=t.getCostById(a).toString(),c.visible=0==t.getPlayerData().skinArr[a],r.off(Laya.Event.CLICK,this,this.chooseCB),r.on(Laya.Event.CLICK,this,this.chooseCB,[a]),s.addClickEvent(l,this,this.buyBtnCB,[a]),s.addClickEvent(c,this,this.adBtnCB,[a])}chooseCB(e){if(i.instance.playSoundEffect("Click.mp3"),this.chooseId==e)return;let a=["Dude","Cat","Huga","Shouter"];for(let t=1;t<this.playerNode.numChildren;t++){let i=this.playerNode.getChildAt(t);i.active=-1!=i.name.search(a[e])}this.chooseId=e,1==t.getPlayerData().skinArr[e]&&(t.getPlayerData().skinId=e,t.setPlayerData()),this.myList.array=t.getPlayerData().skinArr}buyBtnCB(e){let a=e[0];if(t.getPlayerData().coin<t.getCostById(a))return;let i=["Dude","Cat","Huga","Shouter"];for(let e=1;e<this.playerNode.numChildren;e++){let t=this.playerNode.getChildAt(e);t.active=-1!=t.name.search(i[a])}this.chooseId=a,t.getPlayerData().coin-=t.getCostById(a),t.getPlayerData().skinArr[a]=1,t.getPlayerData().skinId=a,t.setPlayerData(),this.myList.array=t.getPlayerData().skinArr}adBtnCB(e){let a=e[0];l.showVideoAd(()=>{let e=["Dude","Cat","Huga","Shouter"];for(let t=1;t<this.playerNode.numChildren;t++){let i=this.playerNode.getChildAt(t);i.active=-1!=i.name.search(e[a])}this.chooseId=a,t.getPlayerData().skinArr[a]=1,t.getPlayerData().skinId=a,t.setPlayerData(),this.myList.array=t.getPlayerData().skinArr})}closeBtnCB(){Laya.Scene.open("MyScenes/StartUI.scene")}myUpdate(){this.coinNum.value=t.getPlayerData().coin.toString()}}class N extends Laya.Scene{constructor(){super()}onOpened(){i.instance.playMusic("bgm.mp3"),this.size(Laya.stage.displayWidth,Laya.stage.displayHeight),s.addClickEvent(this.startBtn,this,this.startBtnCB),s.addClickEvent(this.skinBtn,this,this.skinBtnCB),d.inHomePage()}onClosed(){}startBtnCB(){d.startGame(()=>{Laya.Scene.open("MyScenes/GameUI.scene")})}skinBtnCB(){l.visibleSideGridAd(!1),l.visibleTopGrid(!1),d.banner_gezi_switch?l.hideBannerAd():l.visibleBottomGridAd(!1),B.Share._levelNode.active=!1,Laya.Scene.open("MyScenes/SkinUI.scene")}}class V extends Laya.Script{constructor(){super(),this.startY=0}onAwake(){this.myOwner=this.owner,this.startY=this.myOwner.y,this.startTween()}startTween(){Laya.Tween.to(this.myOwner,{y:this.startY+50},1e3,Laya.Ease.sineInOut,new Laya.Handler(this,()=>{Laya.Tween.to(this.myOwner,{y:this.startY},1e3,Laya.Ease.sineInOut,new Laya.Handler(this,()=>{this.startTween()}))}))}}class G{constructor(){}static init(){var e=Laya.ClassUtils.regClass;e("FanDong/Box1.ts",_),e("FanDong/Box2.ts",b),e("FanDong/Remen.ts",x),e("View/FinishUI.ts",v),e("View/GameUI.ts",S),e("Libs/FixNodeY.ts",I),e("View/LoadingUI.ts",O),e("View/SkinUI.ts",P),e("View/StartUI.ts",N),e("Mod/UpDownLoop.ts",V)}}G.width=750,G.height=1334,G.scaleMode="fixedwidth",G.screenMode="vertical",G.alignV="top",G.alignH="left",G.startScene="MyScenes/FinishUI.scene",G.sceneRoot="",G.debug=!1,G.stat=!1,G.physicsDebug=!1,G.exportSceneToJson=!0,G.init();new class{constructor(){window.Laya3D?Laya3D.init(G.width,G.height):Laya.init(G.width,G.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=G.scaleMode,Laya.stage.screenMode=G.screenMode,Laya.stage.alignV=G.alignV,Laya.stage.alignH=G.alignH,Laya.URL.exportSceneToJson=G.exportSceneToJson,Laya.stage.useRetinalCanvas=!0,(G.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),G.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),G.stat&&Laya.Stat.show(),Laya.alertGlobalError(!0),Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){new B}}}();