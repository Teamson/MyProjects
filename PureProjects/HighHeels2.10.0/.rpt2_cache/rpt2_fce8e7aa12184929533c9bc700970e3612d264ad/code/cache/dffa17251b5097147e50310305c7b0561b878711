{
  "code": "import GameLogic from \"./GameLogic\";\r\nexport default class CameraCrl extends Laya.Script {\r\n    constructor() {\r\n        super();\r\n    }\r\n    onAwake() {\r\n        this.myOwner = this.owner;\r\n    }\r\n    onDisable() {\r\n    }\r\n    startRotate() {\r\n        Laya.timer.frameLoop(1, this, this.finishRotate);\r\n        Laya.timer.once(3000, this, () => {\r\n            Laya.timer.clearAll(this);\r\n        });\r\n        let desPos = GameLogic.Share._player.transform.position.clone();\r\n        desPos.y += 2;\r\n        desPos.z -= 2;\r\n        this.myOwner.transform.position = desPos;\r\n    }\r\n    finishRotate() {\r\n        let a = 1 * Math.PI / 180;\r\n        let pPos = GameLogic.Share._player.transform.position.clone();\r\n        let pos = this.myOwner.transform.position.clone();\r\n        pos.x = (pos.x - pPos.x) * Math.cos(a) - (pos.z - pPos.z) * Math.sin(a) + pPos.x;\r\n        pos.z = (pos.x - pPos.x) * Math.sin(a) + (pos.z - pPos.z) * Math.cos(a) + pPos.z;\r\n        this.myOwner.transform.position = pos;\r\n        this.myOwner.transform.lookAt(GameLogic.Share._player.transform.position.clone(), new Laya.Vector3(0, 1, 0));\r\n        GameLogic.Share._light.transform.rotate(new Laya.Vector3(0, -1, 0), false, false);\r\n    }\r\n    onUpdate() {\r\n        if (GameLogic.Share.isGameOver)\r\n            return;\r\n        let desPos = GameLogic.Share._player.transform.position.clone();\r\n        desPos.y += 7;\r\n        desPos.z -= 6;\r\n        let pos = new Laya.Vector3();\r\n        Laya.Vector3.lerp(this.myOwner.transform.position.clone(), desPos, 0.1, pos);\r\n        this.myOwner.transform.position = pos;\r\n        let euler = this.myOwner.transform.localRotationEuler.clone();\r\n        euler.x = -25;\r\n        this.myOwner.transform.localRotationEuler = euler;\r\n    }\r\n    resetCamera() {\r\n        let desPos = GameLogic.Share._player.transform.position.clone();\r\n        desPos.y += 7;\r\n        desPos.z -= 6;\r\n        this.myOwner.transform.position = desPos;\r\n        let euler = this.myOwner.transform.localRotationEuler.clone();\r\n        euler.x = -25;\r\n        this.myOwner.transform.localRotationEuler = euler;\r\n    }\r\n}\r\n//# sourceMappingURL=CameraCrl.js.map",
  "references": [
    "E:/FDProjects/Projects/PureProjects/HighHeels2.10.0/src/Mod/Utility.ts",
    "E:/FDProjects/Projects/PureProjects/HighHeels2.10.0/src/Crl/GameLogic.ts"
  ],
  "map": "{\"version\":3,\"file\":\"CameraCrl.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/Crl/CameraCrl.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
