{
  "code": "import Utility from \"../Mod/Utility\";\r\nimport GameLogic from \"./GameLogic\";\r\nexport default class Pole extends Laya.Script {\r\n    constructor() {\r\n        super();\r\n        this.myOwner = null;\r\n        this.coll = null;\r\n        this.min = null;\r\n        this.max = null;\r\n        this.canColl = true;\r\n    }\r\n    onEnable() {\r\n        this.myOwner = this.owner;\r\n        this.myOwner.transform.localScale = new Laya.Vector3(5, 1, 1);\r\n        this.max = this.myOwner.getChildByName('min');\r\n        this.min = this.myOwner.getChildByName('max');\r\n    }\r\n    getMyBound() {\r\n        return new Laya.BoundBox(this.min.transform.position.clone(), this.max.transform.position.clone());\r\n    }\r\n    onDisable() {\r\n    }\r\n    scalePole(v) {\r\n        this.myOwner.transform.localScale = new Laya.Vector3(this.myOwner.transform.localScaleX + v, 1, 1);\r\n    }\r\n    movePole(v) {\r\n        let p = this.myOwner.transform.localPosition.clone();\r\n        p.x += v;\r\n        this.myOwner.transform.localPosition = p;\r\n    }\r\n    checkCollision() {\r\n        if (!this.canColl)\r\n            return;\r\n        for (let i = 0; i < GameLogic.Share._collisionArr.length; i++) {\r\n            let c = GameLogic.Share._collisionArr[i];\r\n            if (c === this.myOwner)\r\n                continue;\r\n            let mybb = this.getMyBound();\r\n            let obb = Utility.getBoundBox(c);\r\n            if (Laya.CollisionUtils.intersectsBoxAndBox(mybb, obb)) {\r\n                if (c.name.search('Wall') != -1 || c.name.search('Saw') != -1) {\r\n                    this.canColl = false;\r\n                    let l = 0;\r\n                    let isLeft = true;\r\n                    if (c.transform.position.x > this.myOwner.transform.position.x) {\r\n                        l = this.max.transform.position.x - c.getChildByName('max').transform.position.x;\r\n                    }\r\n                    else if (c.transform.position.x < this.myOwner.transform.position.x) {\r\n                        l = c.getChildByName('min').transform.position.x - this.min.transform.position.x;\r\n                        isLeft = false;\r\n                    }\r\n                    this.scalePole(-l);\r\n                    this.movePole(isLeft ? -l / 2 : l / 2);\r\n                    Laya.timer.once(500, this, () => {\r\n                        let p = this.myOwner.transform.localPosition.clone();\r\n                        if (isLeft)\r\n                            p.x += l / 2;\r\n                        else\r\n                            p.x -= l / 2;\r\n                        Utility.TmoveToX(this.myOwner, 200, p, () => { this.canColl = true; });\r\n                    });\r\n                    let newP = Utility.getSprite3DResByUrl('Pole_01.lh', GameLogic.Share._levelNode);\r\n                    let myp = this.myOwner.transform.position.clone();\r\n                    newP.transform.localScale = new Laya.Vector3(l, 1, 1);\r\n                    myp.x = isLeft ? this.max.transform.position.x + l / 2 : this.min.transform.position.x - l / 2;\r\n                    myp.z -= 0.2;\r\n                    newP.transform.position = myp;\r\n                    let des = myp.clone();\r\n                    des.y -= 0.8;\r\n                    Utility.TmoveTo(newP, 1000, des, null);\r\n                }\r\n                else if (c.name.search('Pole') != -1) {\r\n                    this.scalePole(1);\r\n                    GameLogic.Share._collisionArr.splice(GameLogic.Share._collisionArr.indexOf(c), 1);\r\n                    c.destroy();\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onUpdate() {\r\n        if (GameLogic.Share.isGameOver || !GameLogic.Share.isStartGame)\r\n            return;\r\n        this.checkCollision();\r\n    }\r\n}\r\n//# sourceMappingURL=Pole.js.map",
  "references": [
    "E:/LayaProjects/PoleRush/src/Mod/Utility.ts",
    "E:/LayaProjects/PoleRush/src/Crl/GameLogic.ts"
  ],
  "map": "{\"version\":3,\"file\":\"Pole.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/Crl/Pole.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
